{"version":3,"file":"js/IamportCertification.a78380b5.js","mappings":"6LACKA,MAAM,OAAOC,MAAA,kB,GACXD,MAAM,a,GAETE,EAAAA,EAAAA,GAAwB,UAApB,mBAAe,G,GACnBA,EAAAA,EAAAA,GAAK,mB,GACLA,EAAAA,EAAAA,GAA0B,UAAtB,qBAAiB,G,GAE+DA,EAAAA,EAAAA,GAAI,mB,0CAP5FC,EAAAA,EAAAA,IASM,MATN,EASM,EARJD,EAAAA,EAAAA,GAKM,MALN,EAKM,EAJJA,EAAAA,EAAAA,GAAwE,UAApE,OAAGE,EAAAA,EAAAA,IAAGC,EAAAA,QAAQC,cAAe,SAAKF,EAAAA,EAAAA,IAAGC,EAAAA,QAAQE,gBAAiB,IAAC,GACnEC,EACAC,EACAC,KAEFR,EAAAA,EAAAA,GAAsF,UAA9EF,MAAM,oCAAqCW,QAAK,oBAAEC,EAAAA,eAAAA,EAAAA,iBAAAA,KAAe,QAAaC,G,oDAWxFC,IAAAA,SAAAA,QAAAA,KAAAA,gBAA8C,mBAE9C,MAAMC,EAAMC,OAAOD,IACnBA,EAAIE,KAAKC,CAAAA,SAAAA,aAAAA,SAAAA,KAAYC,wBACrB,OACEC,UAAUC,EAAAA,EAAAA,IAAW,CACnBC,QAAS,2BAEXC,MAAO,CACLC,WAAYC,QAEdC,OACE,MAAO,CACLC,UAAW,GACXC,WAAY,GAEf,EACDC,QAAS,CACPC,cAAe,WACbf,EAAIe,cAAc,CAChBC,aAAcC,KAAKV,QAAQE,WAAa,KAAM,IAAIS,MAAOC,UACzDC,eAAiB,eACjBC,OAAQ,IACP,SAAUC,GACPA,EAAIC,QACNxB,IAAAA,KAAY,4CAA2CuB,EAAIE,WACxDC,MAAMC,IACLT,KAAKL,UAAYe,KAAKC,MAAMF,EAAKf,KAAKkB,oBAAoBC,SAASC,KACnEd,KAAKJ,WAAac,KAAKC,MAAMF,EAAKf,KAAKkB,oBAAoBC,SAASE,MACpEC,EAAAA,EAAAA,OAAa,uBAAwB,CAACrB,UAAYK,KAAKL,UAAWC,WAAYI,KAAKJ,aACnFqB,EAAAA,EAAAA,KAAY,CAAEH,KAAM,YAApB,IAEDI,OAAOC,IACNC,QAAQC,IAAIF,EAAZ,IAGJG,MAAM,uBAA0BjB,EAAIkB,UAEvC,GACF,GAEHC,MAAMjC,GACJ,MAAMyB,GAAQS,EAAAA,EAAAA,OACdC,EAAAA,EAAAA,KAAU,KACRV,EAAMW,SAAS,+BAAgCpC,EAAMC,YAClDgB,MAAMoB,IACLZ,EAAMa,OAAO,yBAA0BD,EAAOlC,KAA9C,IAEDwB,OAAOC,IACNC,QAAQC,IAAIF,EAAZ,GALJ,GAQJ,G,QChEF,MAAMW,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://frontend/./src/views/IamportCertification.vue","webpack://frontend/./src/views/IamportCertification.vue?fcd3"],"sourcesContent":["<template>\r\n<div class=\"cert\" style=\"height:52rem\">\r\n  <div class=\"cert-font\">\r\n    <h1>신랑 {{ wedding.weddingManNm }}와 신부 {{ wedding.weddingWomanNm }}의</h1>\r\n    <h1>결혼식에 오신걸 환영합니다.</h1>\r\n    <br/>\r\n    <h3>본인인증을 통해 참석부탁드립니다</h3>\r\n  </div>\r\n  <button class=\"btn btn-outline-secondary btnCert\" @click=\"certification\">본인인증</button><br>\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport { onMounted } from 'vue'\r\nimport { useStore, mapGetters } from 'vuex';\r\nimport router from '@/router';\r\nimport store from '@/store'\r\naxios.defaults.headers.post['Content-Type'] = 'application/json';\r\n\r\nconst IMP = window.IMP; // 생략 가능\r\nIMP.init(process.env.VUE_APP_IAMPORT_API_ID); // Example: imp00000000\r\nexport default {\r\n  computed: mapGetters({\r\n    wedding: 'root/getNowWeddingInfo',\r\n  }),\r\n  props: {\r\n    weddingNum: Number\r\n  },\r\n  data() {\r\n    return {\r\n      guestName: '',\r\n      guestPhone: '',\r\n    }\r\n  },\r\n  methods: {\r\n    certification: function() {\r\n      IMP.certification({ // param\r\n        merchant_uid: this.wedding.weddingNum + '-' + new Date().getTime(), // 주문 번호\r\n        m_redirect_url : \"{리디렉션 될 URL}\", // 모바일환경에서 popup:false(기본값) 인 경우 필수, 예: https://www.myservice.com/payments/complete/mobile\r\n        popup : true // PC환경에서는 popup 파라메터가 무시되고 항상 true 로 적용됨\r\n      }, function (rsp) { // callback\r\n        if (rsp.success) {\r\n          axios.post(`https://i7e206.p.ssafy.io/api/v1/certify/${rsp.imp_uid}`)\r\n            .then((resp) => {\r\n              this.guestName = JSON.parse(resp.data.certificationsInfo).response.name\r\n              this.guestPhone = JSON.parse(resp.data.certificationsInfo).response.phone\r\n              store.commit('root/setNowGuestInfo', {guestName : this.guestName, guestPhone: this.guestPhone})\r\n              router.push({ name: 'entrance' })\r\n            })\r\n            .catch((error) => {\r\n              console.log(error)\r\n            })\r\n        } else {\r\n          alert(\"인증에 실패하였습니다. 에러 내용: \" +  rsp.error_msg);\r\n        }\r\n      });\r\n    },\r\n  },\r\n  setup(props) {\r\n    const store = useStore()\r\n    onMounted(() => {\r\n      store.dispatch('root/requestWeddingInfoByNum', props.weddingNum)\r\n        .then((result) => {\r\n          store.commit('root/setNowWeddingInfo', result.data)\r\n        })\r\n        .catch((error) => {\r\n          console.log(error)\r\n        })\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n@import url('https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap');\r\n\r\n.cert{\r\n  background: #f0ebe7;\r\n}\r\n\r\n.cert-font{\r\n  font-family: 'Gowun Dodum', sans-serif;\r\n  padding-top:3rem;\r\n  margin-bottom: 3rem;\r\n}\r\n.btnCert{\r\n  font-size:20px;\r\n  margin-bottom: 3rem;\r\n}\r\n</style>\r\n","import { render } from \"./IamportCertification.vue?vue&type=template&id=09261ed6\"\nimport script from \"./IamportCertification.vue?vue&type=script&lang=js\"\nexport * from \"./IamportCertification.vue?vue&type=script&lang=js\"\n\nimport \"./IamportCertification.vue?vue&type=style&index=0&id=09261ed6&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\SSAFY\\\\Desktop\\\\asd\\\\Weanodding\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","style","_createElementVNode","_createElementBlock","_toDisplayString","_ctx","weddingManNm","weddingWomanNm","_hoisted_3","_hoisted_4","_hoisted_5","onClick","$options","_hoisted_6","axios","IMP","window","init","process","VUE_APP_IAMPORT_API_ID","computed","mapGetters","wedding","props","weddingNum","Number","data","guestName","guestPhone","methods","certification","merchant_uid","this","Date","getTime","m_redirect_url","popup","rsp","success","imp_uid","then","resp","JSON","parse","certificationsInfo","response","name","phone","store","router","catch","error","console","log","alert","error_msg","setup","useStore","onMounted","dispatch","result","commit","__exports__","render"],"sourceRoot":""}