(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[989],{3793:function(e,t,n){"use strict";n(1703);var i,o="object"===typeof Reflect?Reflect:null,r=o&&"function"===typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function s(e){console&&console.warn&&console.warn(e)}i=o&&"function"===typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!==e};function c(){c.init.call(this)}e.exports=c,e.exports.once=E,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var d=10;function u(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?c.defaultMaxListeners:e._maxListeners}function p(e,t,n,i){var o,r,a;if(u(n),r=e._events,void 0===r?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),a=r[t]),void 0===a)a=r[t]=n,++e._eventsCount;else if("function"===typeof a?a=r[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),o=l(e),o>0&&a.length>o&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,s(c)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=h.bind(i);return o.listener=n,i.wrapFn=o,o}function m(e,t,n){var i=e._events;if(void 0===i)return[];var o=i[t];return void 0===o?[]:"function"===typeof o?n?[o.listener||o]:[o]:n?y(o):g(o,o.length)}function v(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function b(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function y(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function E(e,t){return new Promise((function(n,i){function o(n){e.removeListener(t,r),i(n)}function r(){"function"===typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}S(e,t,r,{once:!0}),"error"!==t&&w(e,o,{once:!0})}))}function w(e,t,n){"function"===typeof e.on&&S(e,"error",t,n)}function S(e,t,n,i){if("function"===typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(r){i.once&&e.removeEventListener(t,o),n(r)}))}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");d=e}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},c.prototype.getMaxListeners=function(){return l(this)},c.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"===typeof c)r(c,this,t);else{var d=c.length,u=g(c,d);for(n=0;n<d;++n)r(u[n],this,t)}return!0},c.prototype.addListener=function(e,t){return p(this,e,t,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(e,t){return p(this,e,t,!0)},c.prototype.once=function(e,t){return u(t),this.on(e,f(this,e,t)),this},c.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,f(this,e,t)),this},c.prototype.removeListener=function(e,t){var n,i,o,r,s;if(u(t),i=this._events,void 0===i)return this;if(n=i[e],void 0===n)return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(o=-1,r=n.length-1;r>=0;r--)if(n[r]===t||n[r].listener===t){s=n[r].listener,o=r;break}if(o<0)return this;0===o?n.shift():b(n,o),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,r=Object.keys(n);for(i=0;i<r.length;++i)o=r[i],"removeListener"!==o&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],"function"===typeof t)this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},c.prototype.listeners=function(e){return m(this,e,!0)},c.prototype.rawListeners=function(e){return m(this,e,!1)},c.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},c.prototype.listenerCount=v,c.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},7267:function(e,t,n){"use strict";var i=n(4456),o=function(e){var t,o={stun:(e||{}).stun||n(8808),turn:(e||{}).turn||n(4576)},r=(e||{}).stunCount||2,s=(e||{}).turnCount||0;function a(e,t){var n,r=[],s=[].concat(o[e]);while(s.length&&r.length<t)n=Math.random()*s.length|0,r=r.concat(s.splice(n,1));return r.map((function(t){return"string"===typeof t||t instanceof String?i(e+":"+t):t}))}return t=[].concat(a("stun",r)),s&&(t=t.concat(a("turn",s))),t};e.exports=o},4615:function(e,t,n){n(8675),n(3462),n(7380),n(1118);var i,o=n(2568);function r(e,t){var n=-1/0;e.getFloatFrequencyData(t);for(var i=4,o=t.length;i<o;i++)t[i]>n&&t[i]<0&&(n=t[i]);return n}"undefined"!==typeof window&&(i=window.AudioContext||window.webkitAudioContext);var s=null;e.exports=function(e,t){var n=new o;if(!i)return n;t=t||{};var a,c,d,u=t.smoothing||.1,l=t.interval||50,p=t.threshold,h=t.play,f=t.history||10,m=!0;s=t.audioContext||s||new i,d=s.createAnalyser(),d.fftSize=512,d.smoothingTimeConstant=u,c=new Float32Array(d.frequencyBinCount),e.jquery&&(e=e[0]),e instanceof HTMLAudioElement||e instanceof HTMLVideoElement?(a=s.createMediaElementSource(e),"undefined"===typeof h&&(h=!0),p=p||-50):(a=s.createMediaStreamSource(e),p=p||-50),a.connect(d),h&&d.connect(s.destination),n.speaking=!1,n.suspend=function(){return s.suspend()},n.resume=function(){return s.resume()},Object.defineProperty(n,"state",{get:function(){return s.state}}),s.onstatechange=function(){n.emit("state_change",s.state)},n.setThreshold=function(e){p=e},n.setInterval=function(e){l=e},n.stop=function(){m=!1,n.emit("volume_change",-100,p),n.speaking&&(n.speaking=!1,n.emit("stopped_speaking")),d.disconnect(),a.disconnect()},n.speakingHistory=[];for(var v=0;v<f;v++)n.speakingHistory.push(0);var g=function(){setTimeout((function(){if(m){var e=r(d,c);n.emit("volume_change",e,p);var t=0;if(e>p&&!n.speaking){for(var i=n.speakingHistory.length-3;i<n.speakingHistory.length;i++)t+=n.speakingHistory[i];t>=2&&(n.speaking=!0,n.emit("speaking"))}else if(e<p&&n.speaking){for(i=0;i<n.speakingHistory.length;i++)t+=n.speakingHistory[i];0==t&&(n.speaking=!1,n.emit("stopped_speaking"))}n.speakingHistory.shift(),n.speakingHistory.push(0+(e>p)),g()}}),l)};return g(),n}},1923:function(e){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},3322:function(e,t,n){n(1703);var i,o=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function r(e){if(!e)return r.__;Array.prototype.reduce||(Array.prototype.reduce=function(e,t){for(var n=t,i=0;i<this.length;i++)n=e(n,this[i],i,this);return n});var t="",n=("."+e).split(".").reduce((function(e,n,i,o){t?t+="."+n:t=n;var s=e["__"+t];return void 0===s&&(r.Logger.prototype=e,s=new r.Logger(t),e["__"+t]=s),s}),r.__);return n}(function(e){function t(e,t,n){void 0!==t[e]&&(null!==t[e]?n[e]=t[e]:delete n[e])}function n(t){if(null!=e.enabled&&!e.enabled)return!1;try{if(t.userAgentRegex&&!new RegExp(t.userAgentRegex).test(navigator.userAgent))return!1}catch(n){}try{if(t.ipRegex&&e.clientIP&&!new RegExp(t.ipRegex).test(e.clientIP))return!1}catch(n){}return!0}function i(e,t){try{if(e.disallow&&new RegExp(e.disallow).test(t))return!1}catch(n){}return!0}function r(e){return"function"==typeof e?e instanceof RegExp?e.toString():e():e}e.requestId="",e.entryId=0,e._createXMLHttpRequest=function(){return new XMLHttpRequest},e._getTime=function(){return(new Date).getTime()},e._console=console,e._appenderNames=[];var s=function(){function e(e,t,n){this.msg=e,this.meta=t,this.finalString=n}return e}();function a(t){var n,i=r(t);switch(typeof i){case"string":return new s(i,null,i);case"number":return n=i.toString(),new s(n,null,n);case"boolean":return n=i.toString(),new s(n,null,n);case"undefined":return new s("undefined",null,"undefined");case"object":return i instanceof RegExp||i instanceof String||i instanceof Number||i instanceof Boolean?(n=i.toString(),new s(n,null,n)):(n="function"===typeof e.serialize?e.serialize.call(this,i):JSON.stringify(i),new s("",i,n));default:return new s("unknown",null,"unknown")}}function c(e){return t("enabled",e,this),t("maxMessages",e,this),t("defaultAjaxUrl",e,this),t("clientIP",e,this),t("requestId",e,this),t("defaultBeforeSend",e,this),t("serialize",e,this),this}function d(){return-2147483648}function u(){return 1e3}function l(){return 2e3}function p(){return 3e3}function h(){return 4e3}function f(){return 5e3}function m(){return 6e3}function v(){return 2147483647}function g(e){return e<=1e3?"trace":e<=2e3?"debug":e<=3e3?"info":e<=4e3?"warn":e<=5e3?"error":"fatal"}e.setOptions=c,e.getAllLevel=d,e.getTraceLevel=u,e.getDebugLevel=l,e.getInfoLevel=p,e.getWarnLevel=h,e.getErrorLevel=f,e.getFatalLevel=m,e.getOffLevel=v;var b=function(){function e(e,t){this.inner=t,this.name="JL.Exception",this.message=a(e).finalString}return e}();e.Exception=b,b.prototype=new Error;var y=function(){function e(e,t,n,i,o){this.l=e,this.m=t,this.n=n,this.t=i,this.u=o}return e}();function E(t,n,i){return e.entryId++,new y(t,n,i,e._getTime(),e.entryId)}function w(e){e.id&&(clearTimeout(e.id),e.id=null)}function S(e,t,n){var i=this;e.id||(e.id=setTimeout((function(){n.call(i)}),t))}e.LogItem=y;var O=function(){function o(t,n){this.appenderName=t,this.sendLogItems=n,this.level=e.getTraceLevel(),this.sendWithBufferLevel=2147483647,this.storeInBufferLevel=-2147483648,this.bufferSize=0,this.batchSize=1,this.maxBatchSize=20,this.batchTimeout=2147483647,this.sendTimeout=5e3,this.buffer=[],this.batchBuffer=[],this.batchTimeoutTimer={id:null},this.sendTimeoutTimer={id:null},this.nbrLogItemsSkipped=0,this.nbrLogItemsBeingSent=0;var i="Trying to create an appender without a name or with an empty name";if(void 0==t)throw i;if(-1!=e._appenderNames.indexOf(t)){if(!t)throw i;throw"Multiple appenders use the same name "+t}e._appenderNames.push(t)}return o.prototype.addLogItemsToBuffer=function(t){if(this.batchBuffer.length>=this.maxBatchSize)this.nbrLogItemsSkipped+=t.length;else{if(null!=e.maxMessages){if(e.maxMessages<1)return;e.maxMessages-=t.length}this.batchBuffer=this.batchBuffer.concat(t);var n=this;S(this.batchTimeoutTimer,this.batchTimeout,(function(){n.sendBatch.call(n)}))}},o.prototype.batchBufferHasOverdueMessages=function(){for(var t=0;t<this.batchBuffer.length;t++){var n=e._getTime()-this.batchBuffer[t].t;if(n>this.batchTimeout)return!0}return!1},o.prototype.batchBufferHasStrandedMessage=function(){return!(null==e.maxMessages)&&e.maxMessages<1&&this.batchBuffer.length>0},o.prototype.sendBatchIfComplete=function(){(this.batchBuffer.length>=this.batchSize||this.batchBufferHasOverdueMessages()||this.batchBufferHasStrandedMessage())&&this.sendBatch()},o.prototype.onSendingEnded=function(){w(this.sendTimeoutTimer),this.nbrLogItemsBeingSent=0,this.sendBatchIfComplete()},o.prototype.setOptions=function(n){if(t("level",n,this),t("ipRegex",n,this),t("userAgentRegex",n,this),t("disallow",n,this),t("sendWithBufferLevel",n,this),t("storeInBufferLevel",n,this),t("bufferSize",n,this),t("batchSize",n,this),t("maxBatchSize",n,this),t("batchTimeout",n,this),t("sendTimeout",n,this),this.bufferSize<this.buffer.length&&(this.buffer.length=this.bufferSize),this.maxBatchSize<this.batchSize)throw new e.Exception({message:"maxBatchSize cannot be smaller than batchSize",maxBatchSize:this.maxBatchSize,batchSize:this.batchSize});return this},o.prototype.log=function(e,t,o,r,s,a,c){var d;n(this)&&i(this,a)&&(s<this.storeInBufferLevel||(d=E(s,a,c),s<this.level?this.bufferSize>0&&(this.buffer.push(d),this.buffer.length>this.bufferSize&&this.buffer.shift()):(this.addLogItemsToBuffer([d]),s>=this.sendWithBufferLevel&&this.buffer.length&&(this.addLogItemsToBuffer(this.buffer),this.buffer.length=0),this.sendBatchIfComplete())))},o.prototype.sendBatch=function(){if(!(this.nbrLogItemsBeingSent>0)&&(w(this.batchTimeoutTimer),0!=this.batchBuffer.length)){this.nbrLogItemsBeingSent=this.batchBuffer.length;var e=this;S(this.sendTimeoutTimer,this.sendTimeout,(function(){e.onSendingEnded.call(e)})),this.sendLogItems(this.batchBuffer,(function(){e.batchBuffer.splice(0,e.nbrLogItemsBeingSent),e.nbrLogItemsSkipped>0&&(e.batchBuffer.push(E(h(),"Lost "+e.nbrLogItemsSkipped+" messages. Either connection with the server was down or logging was disabled via the enabled option. Reduce lost messages by increasing the ajaxAppender option maxBatchSize.",e.appenderName)),e.nbrLogItemsSkipped=0),e.onSendingEnded.call(e)}))}},o}();e.Appender=O;var I=function(i){function r(e){return i.call(this,e,r.prototype.sendLogItemsAjax)||this}return o(r,i),r.prototype.setOptions=function(e){return t("url",e,this),t("beforeSend",e,this),i.prototype.setOptions.call(this,e),this},r.prototype.sendLogItemsAjax=function(t,i){try{if(!n(this))return;this.xhr&&0!=this.xhr.readyState&&4!=this.xhr.readyState&&this.xhr.abort(),this.xhr=e._createXMLHttpRequest();var o="/jsnlog.logger";null!=e.defaultAjaxUrl&&(o=e.defaultAjaxUrl),this.url&&(o=this.url),this.xhr.open("POST",o),this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("JSNLog-RequestId",e.requestId);var r=this;this.xhr.onreadystatechange=function(){4==r.xhr.readyState&&r.xhr.status>=200&&r.xhr.status<300&&i()};var s={r:e.requestId,lg:t};"function"===typeof this.beforeSend?this.beforeSend.call(this,this.xhr,s):"function"===typeof e.defaultBeforeSend&&e.defaultBeforeSend.call(this,this.xhr,s);var a=JSON.stringify(s);this.xhr.send(a)}catch(c){}},r}(O);e.AjaxAppender=I;var C=function(t){function i(e){return t.call(this,e,i.prototype.sendLogItemsConsole)||this}return o(i,t),i.prototype.clog=function(t){e._console.log(t)},i.prototype.cerror=function(t){e._console.error?e._console.error(t):this.clog(t)},i.prototype.cwarn=function(t){e._console.warn?e._console.warn(t):this.clog(t)},i.prototype.cinfo=function(t){e._console.info?e._console.info(t):this.clog(t)},i.prototype.cdebug=function(t){e._console.debug?e._console.debug(t):this.cinfo(t)},i.prototype.sendLogItemsConsole=function(t,i){try{if(!n(this))return;if(!e._console)return;var o;for(o=0;o<t.length;++o){var r=t[o],s=r.n+": "+r.m;"undefined"===typeof window&&(s=new Date(r.t)+" | "+s),r.l<=e.getDebugLevel()?this.cdebug(s):r.l<=e.getInfoLevel()?this.cinfo(s):r.l<=e.getWarnLevel()?this.cwarn(s):this.cerror(s)}}catch(a){}i()},i}(O);e.ConsoleAppender=C;var R,k=function(){function e(e){this.loggerName=e,this.seenRegexes=[]}return e.prototype.setOptions=function(e){return t("level",e,this),t("userAgentRegex",e,this),t("disallow",e,this),t("ipRegex",e,this),t("appenders",e,this),t("onceOnly",e,this),this.seenRegexes=[],this},e.prototype.buildExceptionObject=function(e){var t={};return e.stack?t.stack=e.stack:t.e=e,e.message&&(t.message=e.message),e.name&&(t.name=e.name),e.data&&(t.data=e.data),e.inner&&(t.inner=this.buildExceptionObject(e.inner)),t},e.prototype.log=function(e,t,o){var s,c,d=0;if(!this.appenders)return this;if(e>=this.level&&n(this)&&(o?(c=this.buildExceptionObject(o),c.logData=r(t)):c=t,s=a(c),i(this,s.finalString))){if(this.onceOnly){d=this.onceOnly.length-1;while(d>=0){if(new RegExp(this.onceOnly[d]).test(s.finalString)){if(this.seenRegexes[d])return this;this.seenRegexes[d]=!0}d--}}s.meta=s.meta||{},d=this.appenders.length-1;while(d>=0)this.appenders[d].log(g(e),s.msg,s.meta,(function(){}),e,s.finalString,this.loggerName),d--}return this},e.prototype.trace=function(e){return this.log(u(),e)},e.prototype.debug=function(e){return this.log(l(),e)},e.prototype.info=function(e){return this.log(p(),e)},e.prototype.warn=function(e){return this.log(h(),e)},e.prototype.error=function(e){return this.log(f(),e)},e.prototype.fatal=function(e){return this.log(m(),e)},e.prototype.fatalException=function(e,t){return this.log(m(),e,t)},e}();function _(e){return new I(e)}function x(e){return new C(e)}e.Logger=k,e.createAjaxAppender=_,e.createConsoleAppender=x,R="undefined"!==typeof window?new I(""):new C(""),e.__=new e.Logger(""),e.__.setOptions({level:e.getDebugLevel(),appenders:[R]})})(r||(r={})),t.__esModule=!0,t.JL=r,"function"==typeof i&&i.amd&&i("jsnlog",[],(function(){return r})),"function"==typeof __jsnlog_configure&&__jsnlog_configure(r),"undefined"===typeof window||window.onerror||(window.onerror=function(e,t,n,i,o){return r("onerrorLogger").fatalException({msg:"Uncaught Exception",errorMsg:e?e.message||e:"",url:t,"line number":n,column:i},o),!1}),"undefined"===typeof window||window.onunhandledrejection||(window.onunhandledrejection=function(e){r("onerrorLogger").fatalException({msg:"unhandledrejection",errorMsg:e.reason?e.reason.message:e.message||null},e.reason)})},4456:function(e){var t=["stun:","turn:"];e.exports=function(e){var n,i,o=(e||{}).url||e,r={};return"string"==typeof o||o instanceof String?(o=o.trim(),n=t[t.indexOf(o.slice(0,5))],n?(o=o.slice(5),i=o.split("@"),r.username=e.username,r.credential=e.credential,i.length>1&&(o=i[1],i=i[0].split(":"),r.username=i[0],r.credential=(e||{}).credential||i[1]||""),r.url=n+o,r.urls=[r.url],r):e):e}},4257:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalRecorderState=void 0,function(e){e["READY"]="READY",e["RECORDING"]="RECORDING",e["PAUSED"]="PAUSED",e["FINISHED"]="FINISHED"}(t.LocalRecorderState||(t.LocalRecorderState={}))},3018:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenViduError=t.OpenViduErrorName=void 0,function(e){e["BROWSER_NOT_SUPPORTED"]="BROWSER_NOT_SUPPORTED",e["DEVICE_ACCESS_DENIED"]="DEVICE_ACCESS_DENIED",e["DEVICE_ALREADY_IN_USE"]="DEVICE_ALREADY_IN_USE",e["SCREEN_CAPTURE_DENIED"]="SCREEN_CAPTURE_DENIED",e["SCREEN_SHARING_NOT_SUPPORTED"]="SCREEN_SHARING_NOT_SUPPORTED",e["SCREEN_EXTENSION_NOT_INSTALLED"]="SCREEN_EXTENSION_NOT_INSTALLED",e["SCREEN_EXTENSION_DISABLED"]="SCREEN_EXTENSION_DISABLED",e["INPUT_VIDEO_DEVICE_NOT_FOUND"]="INPUT_VIDEO_DEVICE_NOT_FOUND",e["INPUT_AUDIO_DEVICE_NOT_FOUND"]="INPUT_AUDIO_DEVICE_NOT_FOUND",e["INPUT_AUDIO_DEVICE_GENERIC_ERROR"]="INPUT_AUDIO_DEVICE_GENERIC_ERROR",e["NO_INPUT_SOURCE_SET"]="NO_INPUT_SOURCE_SET",e["PUBLISHER_PROPERTIES_ERROR"]="PUBLISHER_PROPERTIES_ERROR",e["OPENVIDU_PERMISSION_DENIED"]="OPENVIDU_PERMISSION_DENIED",e["OPENVIDU_NOT_CONNECTED"]="OPENVIDU_NOT_CONNECTED",e["VIRTUAL_BACKGROUND_ERROR"]="VIRTUAL_BACKGROUND_ERROR",e["GENERIC_ERROR"]="GENERIC_ERROR"}(t.OpenViduErrorName||(t.OpenViduErrorName={}));var n=function(){function e(e,t){this.name=e,this.message=t}return e}();t.OpenViduError=n},4477:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeOfVideo=void 0,function(e){e["CAMERA"]="CAMERA",e["SCREEN"]="SCREEN",e["CUSTOM"]="CUSTOM",e["IPCAM"]="IPCAM"}(t.TypeOfVideo||(t.TypeOfVideo={}))},4713:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoInsertMode=void 0,function(e){e["AFTER"]="AFTER",e["APPEND"]="APPEND",e["BEFORE"]="BEFORE",e["PREPEND"]="PREPEND",e["REPLACE"]="REPLACE"}(t.VideoInsertMode||(t.VideoInsertMode={}))},9758:function(e,t,n){"use strict";n(1703);var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionEvent=void 0;var o=n(7763),r=function(e){function t(t,n,i,o,r){var s=e.call(this,t,n,i)||this;return s.connection=o,s.reason=r,s}return i(t,e),t.prototype.callDefaultBehavior=function(){},t}(o.Event);t.ConnectionEvent=r},7849:function(e,t,n){"use strict";n(1703);var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionPropertyChangedEvent=void 0;var o=n(7763),r=function(e){function t(t,n,i,o,r){var s=e.call(this,!1,t,"connectionPropertyChanged")||this;return s.connection=n,s.changedProperty=i,s.newValue=o,s.oldValue=r,s}return i(t,e),t.prototype.callDefaultBehavior=function(){},t}(o.Event);t.ConnectionPropertyChangedEvent=r},7763:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;var n=function(){function e(e,t,n){this.hasBeenPrevented=!1,this.cancelable=e,this.target=t,this.type=n}return e.prototype.isDefaultPrevented=function(){return this.hasBeenPrevented},e.prototype.preventDefault=function(){this.callDefaultBehavior=function(){},this.hasBeenPrevented=!0},e}();t.Event=n},1092:function(e,t,n){"use strict";n(1703);var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ExceptionEvent=t.ExceptionEventName=void 0;var o=n(7763);(function(e){e["ICE_CANDIDATE_ERROR"]="ICE_CANDIDATE_ERROR",e["ICE_CONNECTION_FAILED"]="ICE_CONNECTION_FAILED",e["ICE_CONNECTION_DISCONNECTED"]="ICE_CONNECTION_DISCONNECTED",e["NO_STREAM_PLAYING_EVENT"]="NO_STREAM_PLAYING_EVENT"})(t.ExceptionEventName||(t.ExceptionEventName={}));var r=function(e){function t(t,n,i,o,r){var s=e.call(this,!1,t,"exception")||this;return s.name=n,s.origin=i,s.message=o,s.data=r,s}return i(t,e),t.prototype.callDefaultBehavior=function(){},t}(o.Event);t.ExceptionEvent=r},2876:function(e,t,n){"use strict";n(1703);var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.FilterEvent=void 0;var o=n(7763),r=function(e){function t(t,n,i){var o=e.call(this,!1,t,n)||this;return o.data=i,o}return i(t,e),t.prototype.callDefaultBehavior=function(){},t}(o.Event);t.FilterEvent=r},2895:function(e,t,n){"use strict";n(1703);var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkQualityLevelChangedEvent=void 0;var o=n(7763),r=function(e){function t(t,n,i,o){var r=e.call(this,!1,t,"networkQualityLevelChanged")||this;return r.newValue=n,r.oldValue=i,r.connection=o,r}return i(t,e),t.prototype.callDefaultBehavior=function(){},t}(o.Event);t.NetworkQualityLevelChangedEvent=r},7733:function(e,t,n){"use strict";n(1703);var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.PublisherSpeakingEvent=void 0;var o=n(7763),r=function(e){function t(t,n,i,o){var r=e.call(this,!1,t,n)||this;return r.type=n,r.connection=i,r.streamId=o,r}return i(t,e),t.prototype.callDefaultBehavior=function(){},t}(o.Event);t.PublisherSpeakingEvent=r},6570:function(e,t,n){"use strict";n(1703);var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.RecordingEvent=void 0;var o=n(7763),r=function(e){function t(t,n,i,o,r){var s=e.call(this,!1,t,n)||this;return s.id=i,o!==i&&(s.name=o),s.reason=r,s}return i(t,e),t.prototype.callDefaultBehavior=function(){},t}(o.Event);t.RecordingEvent=r},5142:function(e,t,n){"use strict";n(1703);var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.SessionDisconnectedEvent=void 0;var o=n(7763),r=n(4111),s=r.OpenViduLogger.getInstance(),a=function(e){function t(t,n){var i=e.call(this,!0,t,"sessionDisconnected")||this;return i.reason=n,i}return i(t,e),t.prototype.callDefaultBehavior=function(){s.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Session'");var e=this.target;e.remoteConnections.forEach((function(t){var n,i,o,r,s,a,c,d,u=t.connectionId;if(null===(n=e.remoteConnections.get(u))||void 0===n?void 0:n.stream){null===(i=e.remoteConnections.get(u))||void 0===i||i.stream.disposeWebRtcPeer(),null===(o=e.remoteConnections.get(u))||void 0===o||o.stream.disposeMediaStream(),(null===(r=e.remoteConnections.get(u))||void 0===r?void 0:r.stream.streamManager)&&(null===(s=e.remoteConnections.get(u))||void 0===s||s.stream.streamManager.removeAllVideos());var l=null===(c=null===(a=e.remoteConnections.get(u))||void 0===a?void 0:a.stream)||void 0===c?void 0:c.streamId;l&&e.remoteStreamsCreated.delete(l),null===(d=e.remoteConnections.get(u))||void 0===d||d.dispose()}e.remoteConnections.delete(u)}))},t}(o.Event);t.SessionDisconnectedEvent=a},4855:function(e,t,n){"use strict";n(1703);var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.SignalEvent=void 0;var o=n(7763),r=function(e){function t(t,n,i,o){var r=e.call(this,!1,t,"signal")||this;return n&&(r.type="signal:"+n),r.data=i,r.from=o,r}return i(t,e),t.prototype.callDefaultBehavior=function(){},t}(o.Event);t.SignalEvent=r},1835:function(e,t,n){"use strict";n(1703);var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.StreamEvent=void 0;var o=n(7763),r=n(2398),s=n(2171),a=n(4111),c=a.OpenViduLogger.getInstance(),d=function(e){function t(t,n,i,o,r){var s=e.call(this,t,n,i)||this;return s.stream=o,s.reason=r,s}return i(t,e),t.prototype.callDefaultBehavior=function(){if("streamDestroyed"===this.type){if(this.target instanceof s.Session)c.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Session'"),this.stream.disposeWebRtcPeer();else if(this.target instanceof r.Publisher){c.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Publisher'"),clearInterval(this.target.screenShareResizeInterval),this.stream.isLocalStreamReadyToPublish=!1;for(var e=this.target.openvidu.publishers,t=0;t<e.length;t++)if(e[t]===this.target){e.splice(t,1);break}}this.stream.disposeMediaStream(),this.stream.streamManager&&this.stream.streamManager.removeAllVideos(),this.stream.session.remoteStreamsCreated.delete(this.stream.streamId);var n=this.stream.session.remoteConnections.get(this.stream.connection.connectionId);if(n&&n.remoteOptions){var i=n.remoteOptions.streams;for(t=i.length-1;t>=0;--t)i[t].id===this.stream.streamId&&i.splice(t,1)}}},t}(o.Event);t.StreamEvent=d},4600:function(e,t,n){"use strict";n(1703);var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.StreamManagerEvent=void 0;var o=n(7763),r=function(e){function t(t,n,i){var o=e.call(this,!1,t,n)||this;return o.value=i,o}return i(t,e),t.prototype.callDefaultBehavior=function(){},t}(o.Event);t.StreamManagerEvent=r},4226:function(e,t,n){"use strict";n(1703);var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.StreamPropertyChangedEvent=void 0;var o=n(7763),r=function(e){function t(t,n,i,o,r,s){var a=e.call(this,!1,t,"streamPropertyChanged")||this;return a.stream=n,a.changedProperty=i,a.newValue=o,a.oldValue=r,a.reason=s,a}return i(t,e),t.prototype.callDefaultBehavior=function(){},t}(o.Event);t.StreamPropertyChangedEvent=r},6850:function(e,t,n){"use strict";n(1703);var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.VideoElementEvent=void 0;var o=n(7763),r=function(e){function t(t,n,i){var o=e.call(this,!1,n,i)||this;return o.element=t,o}return i(t,e),t.prototype.callDefaultBehavior=function(){},t}(o.Event);t.VideoElementEvent=r},946:function(e){function t(){var e={};this.forEach=function(t){for(var n in e){var i=e[n];for(var o in i)t(i[o])}},this.get=function(t,n){var i=e[n];if(void 0!=i)return i[t]},this.remove=function(t,n){var i=e[n];if(void 0!=i){for(var o in delete i[t],i)return!1;delete e[n]}},this.set=function(t,n,i){if(void 0==t)return this.remove(n,i);var o=e[i];void 0==o&&(e[i]=o={}),o[n]=t}}t.prototype.pop=function(e,t){var n=this.get(e,t);if(void 0!=n)return this.remove(e,t),n},e.exports=t},4104:function(e,t,n){var i=n(2999);t.JsonRpcClient=i},2999:function(e,t,n){var i=n(1554),o=n(7048),r=n(4111).OpenViduLogger;Date.now=Date.now||function(){return+new Date};var s=5e3,a="RECONNECTING",c="CONNECTED",d="DISCONNECTED",u=r.getInstance();function l(e){var t,n=this,r=e.ws,l=-1,p=0,h=!0,f=!1,m=d,v=r.onreconnecting,g=r.onreconnected,b=r.onconnected,y=r.onerror;e.rpc.pull=function(e,t){t.reply(null,"push")},r.onreconnecting=function(){u.debug("--------- ONRECONNECTING -----------"),m!==a?(R(),m=a,v&&v()):u.error("Websocket already in RECONNECTING state when receiving a new ONRECONNECTING message. Ignoring it")},r.onreconnected=function(){u.debug("--------- ONRECONNECTED -----------"),m!==c?(m=c,O(),g&&g()):u.error("Websocket already in CONNECTED state when receiving a new ONRECONNECTED message. Ignoring it")},r.onconnected=function(){u.debug("--------- ONCONNECTED -----------"),m!==c?(m=c,h=!0,C(),b&&b()):u.error("Websocket already in CONNECTED state when receiving a new ONCONNECTED message. Ignoring it")},r.onerror=function(e){u.debug("--------- ONERROR -----------"),m=d,R(),y&&y(e)};var E=new o(r);u.debug("Connecting websocket to URI: "+r.uri);var w={request_timeout:e.rpc.requestTimeout,ping_request_timeout:e.rpc.heartbeatRequestTimeout},S=new i(i.packers.JsonRPC,w,E,(function(t){u.debug("Received request: "+JSON.stringify(t));try{var n=e.rpc[t.method];void 0===n?u.error("Method "+t.method+" not registered in client"):n(t.params,t)}catch(i){u.error("Exception processing request: "+JSON.stringify(t)),u.error(i)}}));function O(){u.debug("notReconnectIfNumLessThan = "+p+" (old="+l+")"),l=p}function I(){if(h){var t=null;0!=p&&p!=l||(t={interval:e.heartbeat||s}),p++,n.send("ping",t,function(e){return function(t,n){t&&(u.debug("Error in ping request #"+e+" ("+t.message+")"),e>l&&(h=!1,O(),u.debug("Server did not respond to ping message #"+e+". Reconnecting... "),E.reconnectWs()))}}(p))}else u.debug("Trying to send ping, but ping is not enabled")}function C(){f||(u.debug("Starting ping (if configured)"),f=!0,void 0!=e.heartbeat&&(t=setInterval(I,e.heartbeat),I()))}function R(){clearInterval(t),f=!1,h=!1,p=-1,S.cancel()}this.send=function(e,t,n){var i=Date.now();S.encode(e,t,(function(o,r){if(o){try{u.error("ERROR:"+o.message+" in Request: method:"+e+" params:"+JSON.stringify(t)+" request:"+o.request),o.data&&u.error("ERROR DATA:"+JSON.stringify(o.data))}catch(s){}o.requestTime=i}n&&(void 0!=r&&"pong"!==r.value&&u.debug("Response: "+JSON.stringify(r)),n(o,r))}))},this.close=function(e,n){u.debug("Closing  with code: "+e+" because: "+n),void 0!=t&&(u.debug("Clearing ping interval"),clearInterval(t)),f=!1,h=!1,E.close(e,n)},this.reconnect=function(){E.reconnectWs()},this.resetPing=function(){h=!0,p=0,C()},this.getReadyState=function(){return E.getReadyState()}}e.exports=l},3434:function(e,t,n){var i=n(7048);t.WebSocketWithReconnection=i},7048:function(e,t,n){"use strict";var i=n(4111).OpenViduLogger,o=i.getInstance(),r=2e3,s=3e3,a=3;function c(e){var t,n=!1,i=e.uri,c=!1,d=new WebSocket(i);d.onopen=function(){o.debug("WebSocket connected to "+i),e.onconnected&&e.onconnected()},d.onerror=function(t){o.error("Could not connect to "+i+" (invoking onerror if defined)",t),e.onerror&&e.onerror(t)};var u=function(){d.readyState===a?n?o.debug("Connection closed by user"):e.ismasternodecrashed()?o.error("Master Node has crashed. Stopping reconnection process"):(o.debug("Connection closed unexpectedly. Reconnecting..."),l(r,1)):o.debug("Close callback from previous websocket. Ignoring it")};function l(t,n){if(o.debug("reconnect (attempt #"+n+", max="+t+")"),1===n){if(c)return void o.warn("Trying to reconnect when already reconnecting... Ignoring this reconnection.");c=!0,e.onreconnecting&&e.onreconnecting()}h(t,n)}function p(e){var t=new URLSearchParams(new URL(e).search);return t.has("reconnect")||(e=Array.from(t).length>0?e+"&reconnect=true":e+"?reconnect=true"),e}function h(n,r){o.debug("Reconnection attempt #"+r),d.close(4104,"Connection closed for reconnection"),i=p(i),d=new WebSocket(i),d.onopen=function(){o.debug("Reconnected to "+i+" after "+r+" attempts..."),c=!1,t(),e.onreconnected()&&e.onreconnected(),d.onclose=u},d.onerror=function(t){o.warn("Reconnection error: ",t),r===n?e.ondisconnect&&e.ondisconnect():setTimeout((function(){l(n,r+1)}),s)}}d.onclose=u,this.close=function(e,t){n=!0,d.close(e,t)},this.reconnectWs=function(){o.debug("reconnectWs"),l(r,1)},this.send=function(e){d.send(e)},this.addEventListener=function(e,n){t=function(){d.addEventListener(e,n)},t()},this.getReadyState=function(){return d.readyState}}e.exports=c},1554:function(e,t,n){n(1703);var i=!1;if(Object.defineProperty)try{Object.defineProperty({},"x",{})}catch(m){i=!0}Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o});var o=n(3793).EventEmitter,r=n(1923),s=n(1805),a=n(946),c=5e3;function d(e){if(!e)return{};for(var t in e){var n=e[t];"string"==typeof n&&(e[t]={response:n})}return e}function u(e){if(e){if(e instanceof Function)return{send:e};if(e.send instanceof Function)return e;if(e.postMessage instanceof Function)return e.send=e.postMessage,e;if(e.write instanceof Function)return e.send=e.write,e;if(void 0===e.onmessage&&!(e.pause instanceof Function))throw new SyntaxError("Transport is not a function nor a valid object")}}function l(e,t){i?(this.method=e,this.params=t):(Object.defineProperty(this,"method",{value:e,enumerable:!0}),Object.defineProperty(this,"params",{value:t,enumerable:!0}))}function p(e,t,n,s){var p=this;if(!e)throw new SyntaxError("Packer is not defined");if(!e.pack||!e.unpack)throw new SyntaxError("Packer is invalid");var h=d(e.responseMethods);if(t instanceof Function){if(void 0!=n)throw new SyntaxError("There can't be parameters after onRequest");s=t,n=void 0,t=void 0}if(t&&t.send instanceof Function){if(n&&!(n instanceof Function))throw new SyntaxError("Only a function can be after transport");s=n,n=t,t=void 0}if(n instanceof Function){if(void 0!=s)throw new SyntaxError("There can't be parameters after onRequest");s=n,n=void 0}if(n&&n.send instanceof Function&&s&&!(s instanceof Function))throw new SyntaxError("Only a function can be after transport");t=t||{},o.call(this),s&&this.on("request",s),i?this.peerID=t.peerID:Object.defineProperty(this,"peerID",{value:t.peerID});var f=t.max_retries||0;function v(e){p.decode(e.data||e)}this.getTransport=function(){return n},this.setTransport=function(e){n&&(n.removeEventListener?n.removeEventListener("message",v):n.removeListener&&n.removeListener("data",v)),e&&(e.addEventListener?e.addEventListener("message",v):e.addListener&&e.addListener("data",v)),n=u(e)},i||Object.defineProperty(this,"transport",{get:this.getTransport.bind(this),set:this.setTransport.bind(this)}),this.setTransport(n);var g=t.request_timeout||c,b=t.ping_request_timeout||g,y=t.response_timeout||c,E=t.duplicates_timeout||c,w=0,S=new a,O=new a,I=new a,C={};function R(e,t,n){var i={message:e,timeout:setTimeout((function(){O.remove(t,n)}),y)};O.set(i,t,n)}function k(e,t){var n=setTimeout((function(){I.remove(e,t)}),E);I.set(n,e,t)}function _(t,n,o,r,s){l.call(this,t,n),this.getTransport=function(){return s},this.setTransport=function(e){s=u(e)},i||Object.defineProperty(this,"transport",{get:this.getTransport.bind(this),set:this.setTransport.bind(this)});var a=O.get(o,r);s||p.getTransport()||(i?this.duplicated=Boolean(a):Object.defineProperty(this,"duplicated",{value:Boolean(a)}));var c=h[t];this.pack=e.pack.bind(e,this,o),this.reply=function(t,n,i){if(t instanceof Function||t&&t.send instanceof Function){if(void 0!=n)throw new SyntaxError("There can't be parameters after callback");i=t,n=null,t=void 0}else if(n instanceof Function||n&&n.send instanceof Function){if(void 0!=i)throw new SyntaxError("There can't be parameters after callback");i=n,n=null}var s;if(i=u(i),a&&clearTimeout(a.timeout),void 0!=r&&(t&&(t.dest=r),n&&(n.dest=r)),t||void 0!=n){if(void 0!=p.peerID&&(t?t.from=p.peerID:n.from=p.peerID),c)if(void 0==c.error&&t)s={error:t};else{var d=t?c.error:c.response;s={method:d,params:t||n}}else s={error:t,result:n};s=e.pack(s,o)}else s=a?a.message:e.pack({result:null},o);return R(s,o,r),i=i||this.getTransport()||p.getTransport(),i?i.send(s):s}}function x(e){var t=C[e];if(t){delete C[e];var n=S.pop(t.id,t.dest);n&&(clearTimeout(n.timeout),k(t.id,t.dest))}}r(_,l),this.cancel=function(e){if(e)return x(e);for(var e in C)x(e)},this.close=function(){var e=this.getTransport();e&&e.close&&e.close(4003,"Cancel request"),this.cancel(),I.forEach(clearTimeout),O.forEach((function(e){clearTimeout(e.timeout)}))},this.encode=function(t,n,i,o,r){if(n instanceof Function){if(void 0!=i)throw new SyntaxError("There can't be parameters after callback");r=n,o=void 0,i=void 0,n=void 0}else if(i instanceof Function){if(void 0!=o)throw new SyntaxError("There can't be parameters after callback");r=i,o=void 0,i=void 0}else if(o instanceof Function){if(void 0!=r)throw new SyntaxError("There can't be parameters after callback");r=o,o=void 0}void 0!=p.peerID&&(n=n||{},n.from=p.peerID),void 0!=i&&(n=n||{},n.dest=i);var s={method:t,params:n};if(r){var a=w++,c=0;function d(e,t){p.cancel(s),r(e,t)}s=e.pack(s,a);var l={message:s,callback:d,responseMethods:h[t]||{}},m=u(o);function v(e){var n="ping"===t?b:g;return l.timeout=setTimeout(E,n*Math.pow(2,c++)),C[s]={id:a,dest:i},S.set(l,a,i),e=e||m||p.getTransport(),e?e.send(s):s}function y(e){e=u(e),console.warn(c+" retry for request message:",s);var t=I.pop(a,i);return clearTimeout(t),v(e)}function E(){if(c<f)return y(o);var e=new Error("Request has timed out");e.request=s,e.retry=y,d(e)}return v(o)}return s=e.pack(s),o=o||this.getTransport(),o?o.send(s):s},this.decode=function(t,n){if(!t)throw new TypeError("Message is not defined");try{t=e.unpack(t)}catch(m){return console.debug(m,t)}var i=t.id,o=t.ack,r=t.method,s=t.params||{},a=s.from,c=s.dest;if(void 0==p.peerID||a!=p.peerID){if(void 0==i&&void 0==o){var d=new l(r,s);if(p.emit("request",d))return;return d}if(r){if(void 0==c||c==p.peerID){var h=S.get(o,a);if(h){var f=h.responseMethods;return r==f.error?E(h,s):r==f.response?E(h,null,s):y()}var v=I.get(o,a);if(v)return w(v)}return y()}var g=t.error,b=t.result;if((!g||!g.dest||g.dest==p.peerID)&&(!b||!b.dest||b.dest==p.peerID)){h=S.get(o,a);if(!h){v=I.get(o,a);return v?w(v):console.warn("No callback was defined for this message",t)}E(h,g,b)}}function y(){if(n=u(n)||p.getTransport(),n){var e=O.get(i,a);if(e)return n.send(e.message)}var t=void 0!=i?i:o,c=new _(r,s,t,a,n);if(!p.emit("request",c))return c}function E(e,t,n){e.callback(t,n)}function w(e){console.warn("Response already processed",t),clearTimeout(e),k(o,a)}}}r(p,o),p.RpcNotification=l,e.exports=p;var h=n(4104),f=n(3434);p.clients=h,p.clients.transports=f,p.packers=s},6841:function(e,t,n){function i(e,t){var n={jsonrpc:"2.0"};if(e.method)n.method=e.method,e.params&&(n.params=e.params),void 0!=t&&(n.id=t);else if(void 0!=t){if(e.error){if(void 0!==e.result)throw new TypeError("Both result and error are defined");n.error=e.error}else{if(void 0===e.result)throw new TypeError("No result or error is defined");n.result=e.result}n.id=t}return JSON.stringify(n)}function o(e){var t=e;("string"===typeof e||e instanceof String)&&(t=JSON.parse(e));var n=t.jsonrpc;if("2.0"!==n)throw new TypeError("Invalid JsonRPC version '"+n+"': "+e);if(void 0==t.method){if(void 0==t.id)throw new TypeError("Invalid message: "+e);var i=void 0!==t.result,o=void 0!==t.error;if(i&&o)throw new TypeError("Both result and error are defined: "+e);if(!i&&!o)throw new TypeError("No result or error is defined: "+e);t.ack=t.id,delete t.id}return t}n(1703),t.pack=i,t.unpack=o},7728:function(e,t,n){function i(e){throw new TypeError("Not yet implemented")}function o(e){throw new TypeError("Not yet implemented")}n(1703),t.pack=i,t.unpack=o},1805:function(e,t,n){var i=n(6841),o=n(7728);t.JsonRPC=i,t.XmlRPC=o},5514:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLogger=void 0;var n=function(){function e(e){this.logger=e,this.log=window.console.log,this.info=window.console.info,this.debug=window.console.debug,this.warn=window.console.warn,this.error=window.console.error}return e}();t.ConsoleLogger=n},4111:function(e,t,n){"use strict";n(2801),Object.defineProperty(t,"__esModule",{value:!0}),t.OpenViduLogger=void 0;var i=n(3322),o=n(5514),r=n(973),s=function(){function e(){this.JSNLOG_URL="/openvidu/elk/openvidu-browser-logs",this.MAX_JSNLOG_BATCH_LOG_MESSAGES=100,this.MAX_MSECONDS_BATCH_MESSAGES=5e3,this.MAX_LENGTH_STRING_JSON=1e3,this.defaultConsoleLogger=new o.ConsoleLogger(window.console),this.isProdMode=!1,this.isJSNLogSetup=!1}return e.configureJSNLog=function(e,t){var n=this;try{if(window["LOG_JSNLOG_RESULTS"]||this.instance&&e.isAtLeastPro&&this.instance.isOpenViduBrowserLogsDebugActive(e)&&this.instance.canConfigureJSNLog(e,this.instance)){e.sendBrowserLogs===r.OpenViduLoggerConfiguration.debug_app&&this.instance.replaceWindowConsole(),this.instance.isJSNLogSetup=!1,this.instance.info("Configuring JSNLogs.");var o=e.finalUserId,s=e.session.sessionId,a=function(e){var i=e.onreadystatechange;e.onreadystatechange=function(){n.isInvalidResponse(e)&&(Object.defineProperty(e,"readyState",{value:4}),Object.defineProperty(e,"status",{value:200}),n.instance.disableLogger()),i()},e.setRequestHeader("Authorization","Basic "+btoa("".concat(o,"%/%").concat(s)+":"+t)),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.setRequestHeader("OV-Final-User-Id",o),e.setRequestHeader("OV-Session-Id",s),e.setRequestHeader("OV-Token",t)};this.instance.currentAppender=i.JL.createAjaxAppender("appender-".concat(o,"-").concat(s)),this.instance.currentAppender.setOptions({beforeSend:a,maxBatchSize:1e3,batchSize:this.instance.MAX_JSNLOG_BATCH_LOG_MESSAGES,batchTimeout:this.instance.MAX_MSECONDS_BATCH_MESSAGES});var c=function(e){var t=function(){var e=new WeakSet;return function(t,n){if("object"===typeof n&&null!=n){if(e.has(n)||HTMLElement&&n instanceof HTMLElement)return;e.add(n)}return n}},i=JSON.stringify(e,t());return i.length>n.instance.MAX_LENGTH_STRING_JSON&&(i="".concat(i.substring(0,n.instance.MAX_LENGTH_STRING_JSON),"...")),window["LOG_JSNLOG_RESULTS"]&&console.log(i),i};i.JL.setOptions({defaultAjaxUrl:e.httpUri+this.instance.JSNLOG_URL,serialize:c,enabled:!0}),(0,i.JL)().setOptions({appenders:[this.instance.currentAppender]}),this.instance.isJSNLogSetup=!0,this.instance.loggingSessionId=s,this.instance.info("JSNLog configured.")}}catch(d){console.error("Error configuring JSNLog: "),console.error(d),this.instance.disableLogger()}},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.isInvalidResponse=function(e){return 401==e.status||403==e.status||404==e.status||0==e.status},e.prototype.canConfigureJSNLog=function(e,t){return e.session.sessionId!=t.loggingSessionId},e.prototype.isOpenViduBrowserLogsDebugActive=function(e){return e.sendBrowserLogs===r.OpenViduLoggerConfiguration.debug||e.sendBrowserLogs===r.OpenViduLoggerConfiguration.debug_app},e.prototype.getConsoleWithJSNLog=function(){return function(e){return{log:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.defaultConsoleLogger.log.apply(e.defaultConsoleLogger.logger,arguments),e.isJSNLogSetup&&(0,i.JL)().info(arguments)},info:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.defaultConsoleLogger.info.apply(e.defaultConsoleLogger.logger,arguments),e.isJSNLogSetup&&(0,i.JL)().info(arguments)},debug:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.defaultConsoleLogger.debug.apply(e.defaultConsoleLogger.logger,arguments)},warn:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.defaultConsoleLogger.warn.apply(e.defaultConsoleLogger.logger,arguments),e.isJSNLogSetup&&(0,i.JL)().warn(arguments)},error:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.defaultConsoleLogger.error.apply(e.defaultConsoleLogger.logger,arguments),e.isJSNLogSetup&&(0,i.JL)().error(arguments)}}}(this)},e.prototype.replaceWindowConsole=function(){window.console=this.defaultConsoleLogger.logger,window.console.log=this.getConsoleWithJSNLog().log,window.console.info=this.getConsoleWithJSNLog().info,window.console.debug=this.getConsoleWithJSNLog().debug,window.console.warn=this.getConsoleWithJSNLog().warn,window.console.error=this.getConsoleWithJSNLog().error},e.prototype.disableLogger=function(){i.JL.setOptions({enabled:!1}),this.isJSNLogSetup=!1,this.loggingSessionId=void 0,this.currentAppender=void 0,window.console=this.defaultConsoleLogger.logger,window.console.log=this.defaultConsoleLogger.log,window.console.info=this.defaultConsoleLogger.info,window.console.debug=this.defaultConsoleLogger.debug,window.console.warn=this.defaultConsoleLogger.warn,window.console.error=this.defaultConsoleLogger.error},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isProdMode||this.defaultConsoleLogger.log.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,i.JL)().info(arguments)},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isProdMode||this.defaultConsoleLogger.debug.apply(this.defaultConsoleLogger.logger,arguments)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isProdMode||this.defaultConsoleLogger.info.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,i.JL)().info(arguments)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.defaultConsoleLogger.warn.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,i.JL)().warn(arguments)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.defaultConsoleLogger.error.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,i.JL)().error(arguments)},e.prototype.flush=function(){this.isJSNLogSetup&&null!=this.currentAppender&&this.currentAppender.sendBatch()},e.prototype.enableProdMode=function(){this.isProdMode=!0},e}();t.OpenViduLogger=s},973:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenViduLoggerConfiguration=void 0,function(e){e["disabled"]="disabled",e["debug"]="debug",e["debug_app"]="debug_app"}(t.OpenViduLoggerConfiguration||(t.OpenViduLoggerConfiguration={}))},78:function(e,t){function n(e,t,n){var i={audio:!1,video:{mandatory:{chromeMediaSource:e?"screen":"desktop",maxWidth:window.screen.width>1920?window.screen.width:1920,maxHeight:window.screen.height>1080?window.screen.height:1080},optional:[]}};return n&&(i.audio={mandatory:{chromeMediaSource:e?"screen":"desktop"},optional:[]}),t&&(i.video.mandatory.chromeMediaSourceId=t,i.audio&&i.audio.mandatory&&(i.audio.mandatory.chromeMediaSourceId=t)),i}function i(e){o?o.isLoaded?e?e.forEach?o.contentWindow.postMessage({captureCustomSourceId:e},"*"):o.contentWindow.postMessage({captureSourceIdWithAudio:!0},"*"):o.contentWindow.postMessage({captureSourceId:!0},"*"):setTimeout((function(){i(e)}),100):r((function(){i(e)}))}var o;function r(e){o?e():(o=document.createElement("iframe"),o.onload=function(){o.isLoaded=!0,e()},o.src="https://openvidu.github.io/openvidu-screen-sharing-chrome-extension/",o.style.display="none",(document.body||document.documentElement).appendChild(o))}function s(){o?o.isLoaded?o.contentWindow.postMessage({getChromeExtensionStatus:!0},"*"):setTimeout(s,100):r(s)}window.getScreenId=function(e,t,o){function r(e){e.data&&(e.data.chromeMediaSourceId&&("PermissionDeniedError"===e.data.chromeMediaSourceId?t("permission-denied"):t(null,e.data.chromeMediaSourceId,n(null,e.data.chromeMediaSourceId,e.data.canRequestAudioTrack)),window.removeEventListener("message",r)),e.data.chromeExtensionStatus&&(t(e.data.chromeExtensionStatus,null,n(e.data.chromeExtensionStatus)),window.removeEventListener("message",r)))}-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveOrOpenBlob&&!navigator.msSaveBlob?navigator.mozGetUserMedia?t(null,"firefox",{video:{mozMediaSource:e,mediaSource:e}}):(window.addEventListener("message",r),o?setTimeout((function(){i(o)}),100):setTimeout(i,100)):t({video:!0})},window.getScreenConstraints=function(e){r((function(){getScreenId((function(t,n,i){i||(i={video:!0}),e(t,i.video)}))}))},window.getChromeExtensionStatus=function(e){function t(n){n.data&&n.data.chromeExtensionStatus&&(e(n.data.chromeExtensionStatus),window.removeEventListener("message",t))}navigator.mozGetUserMedia?e("installed-enabled"):(window.addEventListener("message",t),setTimeout(s,100))},t.getScreenId=window.getScreenId},6301:function(e,t,n){n(1703);var i,o,r="screen";if("undefined"!==typeof window&&"undefined"!==typeof navigator&&"undefined"!==typeof navigator.userAgent){var s="undefined"!==typeof window.InstallTrigger,a=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0;window.chrome;window.addEventListener("message",(function(e){e.origin==window.location.origin&&c(e.data)}))}function c(e){if("PermissionDeniedError"==e){if(o)return o("PermissionDeniedError");throw new Error("PermissionDeniedError")}"rtcmulticonnection-extension-loaded"==e&&(r="desktop"),e.sourceId&&o&&o(i=e.sourceId,!0===e.canRequestAudioTrack)}function d(e){if(e){if("desktop"==r)return e(!0);window.postMessage("are-you-there","*"),setTimeout((function(){e("screen"!=r)}),2e3)}}function u(e){if(!e)throw'"callback" parameter is mandatory.';if(i)return e(i);o=e,window.postMessage("get-sourceId","*")}function l(e){if(!e)throw'"callback" parameter is mandatory.';if(i)return e(i);o=e,window.postMessage("audio-plus-tab","*")}function p(e,t){if(s)return t("not-chrome");2!=arguments.length&&(t=e,e="lfcgfepafnobdloecchnfaclibenjold");var n=document.createElement("img");n.src="chrome-extension://"+e+"/icon.png",n.onload=function(){r="screen",window.postMessage("are-you-there","*"),setTimeout((function(){t("screen"==r?"installed-disabled":"installed-enabled")}),2e3)},n.onerror=function(){t("not-installed")}}function h(e){f(e,!0)}function f(e,t){i="";var n={mozMediaSource:"window",mediaSource:"window"};if(s)return e(null,n);var o={mandatory:{chromeMediaSource:r,maxWidth:screen.width>1920?screen.width:1920,maxHeight:screen.height>1080?screen.height:1080},optional:[]};"desktop"!=r||i?("desktop"==r&&(o.mandatory.chromeMediaSourceId=i),e(null,o)):t?l((function(t,n){o.mandatory.chromeMediaSourceId=t,n&&(o.canRequestAudioTrack=!0),e("PermissionDeniedError"==t?t:null,o)})):u((function(t){o.mandatory.chromeMediaSourceId=t,e("PermissionDeniedError"==t?t:null,o)}))}t.getScreenConstraints=f,t.getScreenConstraintsWithAudio=h,t.isChromeExtensionAvailable=d,t.getChromeExtensionStatus=p,t.getSourceId=u},5159:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformUtils=void 0;var i=n(6120),o=function(){function e(){}return e.getInstance=function(){return this.instance||(this.instance=new e),e.instance},e.prototype.isChromeBrowser=function(){return"Chrome"===i.name},e.prototype.isSafariBrowser=function(){return"Safari"===i.name},e.prototype.isChromeMobileBrowser=function(){return"Chrome Mobile"===i.name},e.prototype.isFirefoxBrowser=function(){return"Firefox"===i.name},e.prototype.isFirefoxMobileBrowser=function(){return"Firefox Mobile"===i.name||"Firefox for iOS"===i.name},e.prototype.isOperaBrowser=function(){return"Opera"===i.name},e.prototype.isOperaMobileBrowser=function(){return"Opera Mobile"===i.name},e.prototype.isEdgeBrowser=function(){var e=(null===i||void 0===i?void 0:i.version)?parseFloat(i.version):-1;return"Microsoft Edge"===i.name&&e>=80},e.prototype.isEdgeMobileBrowser=function(){var e,t,n=(null===i||void 0===i?void 0:i.version)?parseFloat(i.version):-1;return"Microsoft Edge"===i.name&&("Android"===(null===(e=i.os)||void 0===e?void 0:e.family)||"iOS"===(null===(t=i.os)||void 0===t?void 0:t.family))&&n>45},e.prototype.isAndroidBrowser=function(){return"Android Browser"===i.name},e.prototype.isElectron=function(){return"Electron"===i.name},e.prototype.isSamsungBrowser=function(){return"Samsung Internet Mobile"===i.name||"Samsung Internet"===i.name},e.prototype.isIPhoneOrIPad=function(){var e=i.ua?i.ua:navigator.userAgent,t="ontouchend"in document,n=/\b(\w*Macintosh\w*)\b/.test(e)&&t,o=/\b(\w*iPhone\w*)\b/.test(e)&&/\b(\w*Mobile\w*)\b/.test(e)&&t;return n||o},e.prototype.isIOSWithSafari=function(){var e=i.ua?i.ua:navigator.userAgent;return this.isIPhoneOrIPad()&&/\b(\w*Apple\w*)\b/.test(navigator.vendor)&&/\b(\w*Safari\w*)\b/.test(e)&&!/\b(\w*CriOS\w*)\b/.test(e)&&!/\b(\w*FxiOS\w*)\b/.test(e)},e.prototype.isIonicIos=function(){return this.isIPhoneOrIPad()&&-1===i.ua.indexOf("Safari")},e.prototype.isIonicAndroid=function(){return"Android"===i.os.family&&"Android Browser"==i.name},e.prototype.isMobileDevice=function(){return"iOS"===i.os.family||"Android"===i.os.family},e.prototype.isReactNative=function(){return!1},e.prototype.isChromium=function(){return this.isChromeBrowser()||this.isChromeMobileBrowser()||this.isOperaBrowser()||this.isOperaMobileBrowser()||this.isEdgeBrowser()||this.isEdgeMobileBrowser()||this.isSamsungBrowser()||this.isIonicAndroid()||this.isIonicIos()||this.isElectron()},e.prototype.canScreenShare=function(){var e=(null===i||void 0===i?void 0:i.version)?parseFloat(i.version):-1;return!this.isMobileDevice()&&(this.isChromeBrowser()||this.isFirefoxBrowser()||this.isOperaBrowser()||this.isElectron()||this.isEdgeBrowser()||this.isSafariBrowser()&&e>=13)},e.prototype.getName=function(){return i.name||""},e.prototype.getVersion=function(){return i.version||""},e.prototype.getFamily=function(){return i.os.family||""},e.prototype.getDescription=function(){return i.description||""},e}();t.PlatformUtils=o},8645:function(e,t,n){"use strict";n(1703),n(6699);var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o.apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,i){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i["throw"](e))}catch(t){r(t)}}function c(e){e.done?n(e.value):o(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return c([e,t])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,i&&(o=2&r[0]?i["return"]:r[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebRtcPeerSendrecv=t.WebRtcPeerSendonly=t.WebRtcPeerRecvonly=t.WebRtcPeer=void 0;var a=n(7267),c=n(759),d=n(1092),u=n(4111),l=n(5159),p=u.OpenViduLogger.getInstance(),h=function(){function e(e){var t=this;this.remoteCandidatesQueue=[],this.localCandidatesQueue=[],this.iceCandidateList=[],this.candidategatheringdone=!1,l.PlatformUtils.getInstance(),this.configuration=o(o({},e),{iceServers:e.iceServers&&e.iceServers.length>0?e.iceServers:a(),mediaStream:void 0!==e.mediaStream?e.mediaStream:null,mode:e.mode?e.mode:"sendrecv",id:e.id?e.id:this.generateUniqueId()}),p.debug("[WebRtcPeer] configuration:\n".concat(JSON.stringify(this.configuration,null,2))),this.pc=new RTCPeerConnection({iceServers:this.configuration.iceServers}),this.pc.addEventListener("icecandidate",(function(e){if(null!==e.candidate){var n=e.candidate,i=new RTCIceCandidate(n);t.configuration.onIceCandidate(i),""!==i.candidate&&t.localCandidatesQueue.push(i)}})),this.pc.addEventListener("signalingstatechange",(function(){if("stable"===t.pc.signalingState)while(t.iceCandidateList.length>0){var e=t.iceCandidateList.shift();t.pc.addIceCandidate(e)}}))}return e.prototype.getId=function(){return this.configuration.id},e.prototype.dispose=function(){if(p.debug("Disposing WebRtcPeer"),this.pc){if("closed"===this.pc.signalingState)return;this.pc.close(),this.remoteCandidatesQueue=[],this.localCandidatesQueue=[]}},e.prototype.createOfferLegacy=function(){this.configuration.mediaStream&&this.deprecatedPeerConnectionTrackApi();var e=this.configuration.mediaConstraints.audio,t=this.configuration.mediaConstraints.video,n={offerToReceiveAudio:"sendonly"!==this.configuration.mode&&e,offerToReceiveVideo:"sendonly"!==this.configuration.mode&&t};return p.debug("[createOfferLegacy] RTCPeerConnection.createOffer() options:",JSON.stringify(n)),this.pc.createOffer(n)},e.prototype.createOffer=function(){var e,t,n,i,o,a,c,d;return r(this,void 0,void 0,(function(){var r,u,l,h,f,m,v,g,b,y,E,w,S,O,I,C,R,k,_,x,N,P,T;return s(this,(function(s){switch(s.label){case 0:if(!("addTransceiver"in this.pc))return p.warn("[createOffer] Method RTCPeerConnection.addTransceiver() is NOT available; using LEGACY offerToReceive{Audio,Video}"),[2,this.createOfferLegacy()];if(p.debug("[createOffer] Method RTCPeerConnection.addTransceiver() is available; using it"),"recvonly"===this.configuration.mode)return[3,7];if(!this.configuration.mediaStream)throw new Error("[WebRtcPeer.createOffer] Direction is '".concat(this.configuration.mode,"', but no stream was configured to be sent"));r=0,u=this.configuration.mediaStream.getTracks(),s.label=1;case 1:if(!(r<u.length))return[3,6];if(l=u[r],h={direction:this.configuration.mode,streams:[this.configuration.mediaStream]},"video"===l.kind&&this.configuration.simulcast)for(f=l.getSettings(),m=l.getConstraints(),v=null!==(n=null!==(t=null!==(e=f.width)&&void 0!==e?e:m.width.ideal)&&void 0!==t?t:m.width)&&void 0!==n?n:0,g=null!==(a=null!==(o=null!==(i=f.height)&&void 0!==i?i:m.height.ideal)&&void 0!==o?o:m.height)&&void 0!==a?a:0,p.info("[createOffer] Video track dimensions: ".concat(v,"x").concat(g)),b=v*g,y=0,y=b>=518400?3:b>=129600?2:1,h.sendEncodings=[],E=0;E<y;E++)w=Math.pow(2,y-E-1),S={rid:"rdiv"+w.toString(),scalabilityMode:"L1T1"},["detail","text"].includes(l.contentHint)?(S.scaleResolutionDownBy=1,S.maxFramerate=Math.floor(30/w)):S.scaleResolutionDownBy=w,h.sendEncodings.push(S);if(O=this.pc.addTransceiver(l,h),"video"!==l.kind)return[3,5];if(I=O.sender.getParameters(),C=!1,(null===(c=I.degradationPreference)||void 0===c?void 0:c.length)||(["detail","text"].includes(l.contentHint)?I.degradationPreference="maintain-resolution":I.degradationPreference="balanced",p.info("[createOffer] Video sender Degradation Preference set: ".concat(I.degradationPreference)),C=!0),this.configuration.simulcast&&(null===(d=I.encodings)||void 0===d?void 0:d.length)!==h.sendEncodings.length&&(I.encodings=h.sendEncodings,C=!0),!C)return[3,5];p.debug("[createOffer] Setting new RTCRtpSendParameters to video sender"),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,O.sender.setParameters(I)];case 3:return s.sent(),[3,5];case 4:throw R=s.sent(),T="[WebRtcPeer.createOffer] Cannot set RTCRtpSendParameters to video sender",R instanceof Error&&(T+=": ".concat(R.message)),new Error(T);case 5:return r++,[3,1];case 6:return[3,8];case 7:for(k=0,_=["audio","video"];k<_.length;k++)x=_[k],this.configuration.mediaConstraints[x]&&(this.configuration.mediaStream=new MediaStream,this.pc.addTransceiver(x,{direction:this.configuration.mode,streams:[this.configuration.mediaStream]}));s.label=8;case 8:return s.trys.push([8,10,,11]),[4,this.pc.createOffer()];case 9:return N=s.sent(),[3,11];case 10:throw P=s.sent(),T="[WebRtcPeer.createOffer] Browser failed creating an SDP Offer",P instanceof Error&&(T+=": ".concat(P.message)),new Error(T);case 11:return[2,N]}}))}))},e.prototype.deprecatedPeerConnectionTrackApi=function(){for(var e=0,t=this.configuration.mediaStream.getTracks();e<t.length;e++){var n=t[e];this.pc.addTrack(n,this.configuration.mediaStream)}},e.prototype.createAnswer=function(){var e=this;return new Promise((function(t,n){if("getTransceivers"in e.pc){p.debug("[createAnswer] Method RTCPeerConnection.getTransceivers() is available; using it");for(var i=function(t){if(!e.configuration.mediaConstraints[t])return"continue";var i=e.pc.getTransceivers().find((function(e){return e.receiver.track.kind===t}));if(!i)return{value:n(new Error("".concat(t," requested, but no transceiver was created from remote description")))};i.direction=e.configuration.mode},o=0,r=["audio","video"];o<r.length;o++){var s=r[o],a=i(s);if("object"===typeof a)return a.value}e.pc.createAnswer().then((function(e){return t(e)})).catch((function(e){return n(e)}))}else{var c=void 0,d=!0;if(e.configuration.mediaConstraints){c="boolean"!==typeof e.configuration.mediaConstraints.audio||e.configuration.mediaConstraints.audio,d="boolean"!==typeof e.configuration.mediaConstraints.video||e.configuration.mediaConstraints.video;var u={offerToReceiveAudio:c,offerToReceiveVideo:d};e.pc.createAnswer(u).then((function(e){return t(e)})).catch((function(e){return n(e)}))}}}))},e.prototype.processLocalOffer=function(e){var t=this;return new Promise((function(n,i){t.pc.setLocalDescription(e).then((function(){var e=t.pc.localDescription;return e?(p.debug("Local description set",e.sdp),n()):i("Local description is not defined")})).catch((function(e){return i(e)}))}))},e.prototype.processRemoteOffer=function(e){var t=this;return new Promise((function(n,i){var o={type:"offer",sdp:e};if(p.debug("SDP offer received, setting remote description",o),"closed"===t.pc.signalingState)return i("RTCPeerConnection is closed when trying to set remote description");t.setRemoteDescription(o).then((function(){return n()})).catch((function(e){return i(e)}))}))},e.prototype.processLocalAnswer=function(e){var t=this;return new Promise((function(n,i){if(p.debug("SDP answer created, setting local description"),"closed"===t.pc.signalingState)return i("RTCPeerConnection is closed when trying to set local description");t.pc.setLocalDescription(e).then((function(){return n()})).catch((function(e){return i(e)}))}))},e.prototype.processRemoteAnswer=function(e){var t=this;return new Promise((function(n,i){var o={type:"answer",sdp:e};if(p.debug("SDP answer received, setting remote description"),"closed"===t.pc.signalingState)return i("RTCPeerConnection is closed when trying to set remote description");t.setRemoteDescription(o).then((function(){n()})).catch((function(e){return i(e)}))}))},e.prototype.setRemoteDescription=function(e){return r(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this.pc.setRemoteDescription(e)]}))}))},e.prototype.addIceCandidate=function(e){var t=this;return new Promise((function(n,i){switch(p.debug("Remote ICE candidate received",e),t.remoteCandidatesQueue.push(e),t.pc.signalingState){case"closed":i(new Error("PeerConnection object is closed"));break;case"stable":t.pc.remoteDescription?t.pc.addIceCandidate(e).then((function(){return n()})).catch((function(e){return i(e)})):(t.iceCandidateList.push(e),n());break;default:t.iceCandidateList.push(e),n()}}))},e.prototype.addIceConnectionStateChangeListener=function(e){var t=this;this.pc.addEventListener("iceconnectionstatechange",(function(){var n=t.pc.iceConnectionState;switch(n){case"disconnected":var i="IceConnectionState of RTCPeerConnection "+t.configuration.id+" ("+e+') change to "disconnected". Possible network disconnection';p.warn(i),t.configuration.onIceConnectionStateException(d.ExceptionEventName.ICE_CONNECTION_DISCONNECTED,i);break;case"failed":var o="IceConnectionState of RTCPeerConnection "+t.configuration.id+" ("+e+') to "failed"';p.error(o),t.configuration.onIceConnectionStateException(d.ExceptionEventName.ICE_CONNECTION_FAILED,o);break;case"closed":p.log("IceConnectionState of RTCPeerConnection "+t.configuration.id+" ("+e+') change to "closed"');break;case"new":p.log("IceConnectionState of RTCPeerConnection "+t.configuration.id+" ("+e+') change to "new"');break;case"checking":p.log("IceConnectionState of RTCPeerConnection "+t.configuration.id+" ("+e+') change to "checking"');break;case"connected":p.log("IceConnectionState of RTCPeerConnection "+t.configuration.id+" ("+e+') change to "connected"');break;case"completed":p.log("IceConnectionState of RTCPeerConnection "+t.configuration.id+" ("+e+') change to "completed"');break}}))},e.prototype.generateUniqueId=function(){return(0,c.v4)()},e}();t.WebRtcPeer=h;var f=function(e){function t(t){var n=this;return t.mode="recvonly",n=e.call(this,t)||this,n}return i(t,e),t}(h);t.WebRtcPeerRecvonly=f;var m=function(e){function t(t){var n=this;return t.mode="sendonly",n=e.call(this,t)||this,n}return i(t,e),t}(h);t.WebRtcPeerSendonly=m;var v=function(e){function t(t){var n=this;return t.mode="sendrecv",n=e.call(this,t)||this,n}return i(t,e),t}(h);t.WebRtcPeerSendrecv=v},9885:function(e,t,n){"use strict";n(1703),n(6699);var i=this&&this.__awaiter||function(e,t,n,i){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i["throw"](e))}catch(t){r(t)}}function c(e){e.done?n(e.value):o(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return c([e,t])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,i&&(o=2&r[0]?i["return"]:r[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebRtcStats=void 0;var r,s=n(4111),a=n(5159),c=s.OpenViduLogger.getInstance(),d=function(){function e(e){this.stream=e,this.STATS_ITEM_NAME="webrtc-stats-config",this.webRtcStatsEnabled=!1,this.statsInterval=1,r=a.PlatformUtils.getInstance()}return e.prototype.isEnabled=function(){return this.webRtcStatsEnabled},e.prototype.initWebRtcStats=function(){var e=this,t=localStorage.getItem(this.STATS_ITEM_NAME);if(t){this.webRtcStatsEnabled=!0;var n=JSON.parse(t);c.warn("WebRtc stats enabled for stream "+this.stream.streamId+" of connection "+this.stream.connection.connectionId),c.warn("localStorage item: "+JSON.stringify(n)),this.POST_URL=n.httpEndpoint,this.statsInterval=n.interval,this.webRtcStatsIntervalId=setInterval((function(){return i(e,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.sendStatsToHttpEndpoint()];case 1:return e.sent(),[2]}}))}))}),1e3*this.statsInterval)}else c.debug("WebRtc stats not enabled")},e.prototype.getSelectedIceCandidateInfo=function(){var e=this;return new Promise((function(t,n){return i(e,void 0,void 0,(function(){var e,n,i,s,a,c,d,u,l,p,h,f,m,v,g,b,y,E,w,S,O,I;return o(this,(function(o){switch(o.label){case 0:return[4,this.stream.getRTCPeerConnection().getStats()];case 1:if(e=o.sent(),i=new Map,s=new Map,a=new Map,e.forEach((function(e){switch("transport"===e.type&&(r.isChromium()||r.isSafariBrowser()||r.isReactNative())&&(n=e),e.type){case"candidate-pair":i.set(e.id,e);break;case"local-candidate":s.set(e.id,e);break;case"remote-candidate":a.set(e.id,e);break}})),null!=n)d=n.selectedCandidatePairId,c=i.get(d);else for(u=i.size,l=i.values(),p=0;p<u;p++)if(h=l.next().value,h["selected"]){c=h;break}if(f=c.localCandidateId,m=c.remoteCandidateId,v=s.get(f),v)for(E=this.stream.getLocalIceCandidateList(),w=E.filter((function(e){return!!e.candidate&&(e.candidate.indexOf(v.ip)>=0||e.candidate.indexOf(v.address)>=0)&&e.candidate.indexOf(v.port)>=0})),v.raw=[],g=0,b=w;g<b.length;g++)I=b[g],v.raw.push(I.candidate);else v="ERROR: No active local ICE candidate. Probably ICE-TCP is being used";if(y=a.get(m),y)for(E=this.stream.getRemoteIceCandidateList(),w=E.filter((function(e){return!!e.candidate&&(e.candidate.indexOf(y.ip)>=0||e.candidate.indexOf(y.address)>=0)&&e.candidate.indexOf(y.port)>=0})),y.raw=[],S=0,O=w;S<O.length;S++)I=O[S],y.raw.push(I.candidate);else y="ERROR: No active remote ICE candidate. Probably ICE-TCP is being used";return[2,t({localCandidate:v,remoteCandidate:y})]}}))}))}))},e.prototype.stopWebRtcStats=function(){this.webRtcStatsEnabled&&(clearInterval(this.webRtcStatsIntervalId),c.warn("WebRtc stats stopped for disposed stream "+this.stream.streamId+" of connection "+this.stream.connection.connectionId))},e.prototype.sendStats=function(e,t){return i(this,void 0,void 0,(function(){var n,i;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n={headers:{"Content-type":"application/json"},body:JSON.stringify(t),method:"POST"},[4,fetch(e,n)];case 1:return o.sent(),[3,3];case 2:return i=o.sent(),c.error("sendStats error: ".concat(JSON.stringify(i))),[3,3];case 3:return[2]}}))}))},e.prototype.sendStatsToHttpEndpoint=function(){return i(this,void 0,void 0,(function(){var e,t,n;return o(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,this.getCommonStats()];case 1:return e=i.sent(),t=this.generateJSONStatsResponse(e),[4,this.sendStats(this.POST_URL,t)];case 2:return i.sent(),[3,4];case 3:return n=i.sent(),c.log(n),[3,4];case 4:return[2]}}))}))},e.prototype.getCommonStats=function(){return i(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){return[2,new Promise((function(t,n){return i(e,void 0,void 0,(function(){var e,i,r,s,a,d=this;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.stream.getRTCPeerConnection().getStats()];case 1:return e=o.sent(),i=this.getWebRtcStatsResponseOutline(),r=["framesReceived","framesDropped","framesSent","frameHeight","frameWidth"],s=["availableOutgoingBitrate","currentRoundTripTime"],e.forEach((function(e){var t=null!=e.mediaType?e.mediaType:e.kind,n=function(n,o){null!=e[o]&&null!=i[n]&&(!t&&r.indexOf(o)>-1&&(t="video"),null!=n&&null!=t&&null!=o&&null!=i[n][t]?i[n][t][o]=Number(e[o]):null!=n&&null!=o&&s.includes(o)&&(i[n][o]=Number(e[o])))};switch(e.type){case"outbound-rtp":n("outbound","bytesSent"),n("outbound","packetsSent"),n("outbound","framesEncoded"),n("outbound","nackCount"),n("outbound","firCount"),n("outbound","pliCount"),n("outbound","qpSum");break;case"inbound-rtp":n("inbound","bytesReceived"),n("inbound","packetsReceived"),n("inbound","packetsLost"),n("inbound","jitter"),n("inbound","framesDecoded"),n("inbound","nackCount"),n("inbound","firCount"),n("inbound","pliCount");break;case"track":n("inbound","jitterBufferDelay"),n("inbound","framesReceived"),n("outbound","framesDropped"),n("outbound","framesSent"),n(d.stream.isLocal()?"outbound":"inbound","frameHeight"),n(d.stream.isLocal()?"outbound":"inbound","frameWidth");break;case"candidate-pair":n("candidatepair","currentRoundTripTime"),n("candidatepair","availableOutgoingBitrate");break}})),(null===i||void 0===i?void 0:i.candidatepair)&&0!==Object.keys(i.candidatepair).length||delete i.candidatepair,[2,t(i)];case 2:return a=o.sent(),c.error("Error getting common stats: ",a),[2,n(a)];case 3:return[2]}}))}))}))]}))}))},e.prototype.generateJSONStatsResponse=function(e){return{"@timestamp":(new Date).toISOString(),participant_id:this.stream.connection.data,session_id:this.stream.session.sessionId,platform:r.getName(),platform_description:r.getDescription(),stream:"webRTC",webrtc_stats:e}},e.prototype.getWebRtcStatsResponseOutline=function(){return this.stream.isLocal()?{outbound:{audio:{},video:{}},candidatepair:{}}:{inbound:{audio:{},video:{}}}},e}();t.WebRtcStats=d},3527:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=void 0;var i=n(5279),o=n(4111),r=n(1092),s=o.OpenViduLogger.getInstance(),a=function(){function e(e,t){this.session=e,this.disposed=!1;var n="'Connection' created ";t.role?(this.localOptions=t,this.connectionId=this.localOptions.id,this.creationTime=this.localOptions.createdAt,this.data=this.localOptions.metadata,this.rpcSessionId=this.localOptions.sessionId,this.role=this.localOptions.role,this.record=this.localOptions.record,n+="(local)"):(this.remoteOptions=t,this.connectionId=this.remoteOptions.id,this.creationTime=this.remoteOptions.createdAt,this.remoteOptions.metadata&&(this.data=this.remoteOptions.metadata),this.remoteOptions.streams&&this.initRemoteStreams(this.remoteOptions.streams),n+="(remote) with 'connectionId' ["+this.remoteOptions.id+"]"),s.info(n)}return e.prototype.sendIceCandidate=function(e){var t=this;s.debug((this.stream.outboundStreamOpts?"Local":"Remote")+"candidate for"+this.connectionId,e),this.session.openvidu.sendRequest("onIceCandidate",{endpointName:this.connectionId,candidate:e.candidate,sdpMid:e.sdpMid,sdpMLineIndex:e.sdpMLineIndex},(function(e,n){e&&(s.error("Error sending ICE candidate: "+JSON.stringify(e)),t.session.emitEvent("exception",[new r.ExceptionEvent(t.session,r.ExceptionEventName.ICE_CANDIDATE_ERROR,t.session,"There was an unexpected error on the server-side processing an ICE candidate generated and sent by the client-side",e)]))}))},e.prototype.initRemoteStreams=function(e){var t=this;e.forEach((function(e){var n={id:e.id,createdAt:e.createdAt,connection:t,hasAudio:e.hasAudio,hasVideo:e.hasVideo,audioActive:e.audioActive,videoActive:e.videoActive,typeOfVideo:e.typeOfVideo,frameRate:e.frameRate,videoDimensions:e.videoDimensions?JSON.parse(e.videoDimensions):void 0,filter:e.filter?e.filter:void 0},o=new i.Stream(t.session,n);t.addStream(o)})),s.info("Remote 'Connection' with 'connectionId' ["+this.connectionId+"] is now configured for receiving Streams with options: ",this.stream.inboundStreamOpts)},e.prototype.addStream=function(e){e.connection=this,this.stream=e},e.prototype.removeStream=function(e){delete this.stream},e.prototype.dispose=function(){this.stream&&delete this.stream,this.disposed=!0},e}();t.Connection=a},3481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventDispatcher=void 0;var i=n(9001),o=n(4111),r=o.OpenViduLogger.getInstance(),s=function(){function e(){this.userHandlerArrowHandler=new WeakMap,this.ee=new i}return e.prototype.onAux=function(e,t,n){var i=function(e){e?r.info(t,e):r.info(t),n(e)};return this.userHandlerArrowHandler.set(n,i),this.ee.on(e,i),this},e.prototype.onceAux=function(e,t,n){var i=this,o=function(e){e?r.info(t,e):r.info(t),n(e),i.userHandlerArrowHandler.delete(n)};return this.userHandlerArrowHandler.set(n,o),this.ee.once(e,o),this},e.prototype.offAux=function(e,t){if(t){var n=this.userHandlerArrowHandler.get(t);n&&this.ee.off(e,n),this.userHandlerArrowHandler.delete(t)}else this.ee.removeAllListeners(e);return this},e}();t.EventDispatcher=s},1627:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Filter=void 0;var i=n(4226),o=n(3018),r=n(4111),s=r.OpenViduLogger.getInstance(),a=function(){function e(e,t){this.handlers=new Map,this.type=e,this.options=t}return e.prototype.execMethod=function(e,t){var n=this;return new Promise((function(r,a){var c,d;s.info("Executing filter method to stream "+n.stream.streamId);var u=function(t){s.info("Filter method successfully executed on Stream "+n.stream.streamId);var o=Object.assign({},n.stream.filter);return n.stream.filter.lastExecMethod={method:e,params:d},t&&(n.stream.session.emitEvent("streamPropertyChanged",[new i.StreamPropertyChangedEvent(n.stream.session,n.stream,"filter",n.stream.filter,o,"execFilterMethod")]),n.stream.streamManager.emitEvent("streamPropertyChanged",[new i.StreamPropertyChangedEvent(n.stream.streamManager,n.stream,"filter",n.stream.filter,o,"execFilterMethod")])),r()};if(n.type.startsWith("VB:")){if("string"===typeof t)try{t=JSON.parse(t)}catch(h){return a(new o.OpenViduError(o.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"Wrong params syntax: "+h))}if(d=t,"update"!==e)return a(new o.OpenViduError(o.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,'Unknown Virtual Background method "'.concat(e,'"')));if(!(null===(c=n.stream.virtualBackgroundSinkElements)||void 0===c?void 0:c.VB))return a(new o.OpenViduError(o.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"There is no Virtual Background filter applied"));n.stream.virtualBackgroundSinkElements.VB.updateValues(t).then((function(){return u(!1)})).catch((function(e){return e.name===o.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR?a(new o.OpenViduError(e.name,e.message)):a(new o.OpenViduError(o.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"Error updating values on Virtual Background filter: "+e))}))}else{var l=void 0;if("string"!==typeof t)try{l=JSON.stringify(t)}catch(h){var p="'params' property must be a JSON formatted object";return s.error(p),a(p)}else l=t;d=l,n.stream.session.openvidu.sendRequest("execFilterMethod",{streamId:n.stream.streamId,method:e,params:l},(function(e,t){return e?(s.error("Error executing filter method for Stream "+n.stream.streamId,e),401===e.code?a(new o.OpenViduError(o.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to execute a filter method")):a(e)):u(!0)}))}}))},e.prototype.addEventListener=function(e,t){var n=this;return new Promise((function(i,r){s.info("Adding filter event listener to event "+e+" to stream "+n.stream.streamId),n.stream.session.openvidu.sendRequest("addFilterEventListener",{streamId:n.stream.streamId,eventType:e},(function(a,c){return a?(s.error("Error adding filter event listener to event "+e+"for Stream "+n.stream.streamId,a),401===a.code?r(new o.OpenViduError(o.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to add a filter event listener")):r(a)):(n.handlers.set(e,t),s.info("Filter event listener to event "+e+" successfully applied on Stream "+n.stream.streamId),i())}))}))},e.prototype.removeEventListener=function(e){var t=this;return new Promise((function(n,i){s.info("Removing filter event listener to event "+e+" to stream "+t.stream.streamId),t.stream.session.openvidu.sendRequest("removeFilterEventListener",{streamId:t.stream.streamId,eventType:e},(function(r,a){return r?(s.error("Error removing filter event listener to event "+e+"for Stream "+t.stream.streamId,r),401===r.code?i(new o.OpenViduError(o.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to add a filter event listener")):i(r)):(t.handlers.delete(e),s.info("Filter event listener to event "+e+" successfully removed on Stream "+t.stream.streamId),n())}))}))},e}();t.Filter=a},7057:function(e,t,n){"use strict";n(1703),Object.defineProperty(t,"__esModule",{value:!0}),t.LocalRecorder=void 0;var i,o=n(4257),r=n(4111),s=n(5159),a=n(407),c=r.OpenViduLogger.getInstance(),d=function(){function e(e){this.stream=e,this.chunks=[],i=s.PlatformUtils.getInstance(),this.connectionId=this.stream.connection?this.stream.connection.connectionId:"default-connection",this.id=this.stream.streamId+"_"+this.connectionId+"_localrecord",this.state=o.LocalRecorderState.READY}return e.prototype.record=function(e){var t=this;return new Promise((function(n,i){try{if("string"===typeof e||e instanceof String)return i("When calling LocalRecorder.record(options) parameter 'options' cannot be a string. Must be an object like { mimeType: \"".concat(e,'" }'));if("undefined"===typeof MediaRecorder)throw c.error("MediaRecorder not supported on your device. See compatibility in https://caniuse.com/#search=MediaRecorder"),Error("MediaRecorder not supported on your device. See compatibility in https://caniuse.com/#search=MediaRecorder");if(t.state!==o.LocalRecorderState.READY)throw Error("'LocalRecord.record()' needs 'LocalRecord.state' to be 'READY' (current value: '"+t.state+"'). Call 'LocalRecorder.clean()' or init a new LocalRecorder before");c.log("Starting local recording of stream '"+t.stream.streamId+"' of connection '"+t.connectionId+"'"),e?e.mimeType||(e.mimeType="video/webm"):e={mimeType:"video/webm"},t.mediaRecorder=new MediaRecorder(t.stream.getMediaStream(),e),t.mediaRecorder.start()}catch(r){return i(r)}return t.mediaRecorder.ondataavailable=function(e){e.data.size>0&&t.chunks.push(e.data)},t.mediaRecorder.onerror=function(e){c.error("MediaRecorder error: ",e)},t.mediaRecorder.onstart=function(){c.log("MediaRecorder started (state="+t.mediaRecorder.state+")")},t.mediaRecorder.onstop=function(){t.onStopDefault()},t.mediaRecorder.onpause=function(){c.log("MediaRecorder paused (state="+t.mediaRecorder.state+")")},t.mediaRecorder.onresume=function(){c.log("MediaRecorder resumed (state="+t.mediaRecorder.state+")")},t.state=o.LocalRecorderState.RECORDING,n()}))},e.prototype.stop=function(){var e=this;return new Promise((function(t,n){try{if(e.state===o.LocalRecorderState.READY||e.state===o.LocalRecorderState.FINISHED)throw Error("'LocalRecord.stop()' needs 'LocalRecord.state' to be 'RECORDING' or 'PAUSED' (current value: '"+e.state+"'). Call 'LocalRecorder.start()' before");e.mediaRecorder.onstop=function(){return e.onStopDefault(),t()},e.mediaRecorder.stop()}catch(i){return n(i)}}))},e.prototype.pause=function(){var e=this;return new Promise((function(t,n){try{return e.state!==o.LocalRecorderState.RECORDING?n(Error("'LocalRecord.pause()' needs 'LocalRecord.state' to be 'RECORDING' (current value: '"+e.state+"'). Call 'LocalRecorder.start()' or 'LocalRecorder.resume()' before")):(e.mediaRecorder.pause(),e.state=o.LocalRecorderState.PAUSED,t())}catch(i){return n(i)}}))},e.prototype.resume=function(){var e=this;return new Promise((function(t,n){try{if(e.state!==o.LocalRecorderState.PAUSED)throw Error("'LocalRecord.resume()' needs 'LocalRecord.state' to be 'PAUSED' (current value: '"+e.state+"'). Call 'LocalRecorder.pause()' before");return e.mediaRecorder.resume(),e.state=o.LocalRecorderState.RECORDING,t()}catch(i){return n(i)}}))},e.prototype.preview=function(e){if(this.state!==o.LocalRecorderState.FINISHED)throw Error("'LocalRecord.preview()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+this.state+"'). Call 'LocalRecorder.stop()' before");if(this.videoPreview=document.createElement("video"),this.videoPreview.id=this.id,this.videoPreview.autoplay=!0,i.isSafariBrowser()&&this.videoPreview.setAttribute("playsinline","true"),"string"===typeof e){var t=document.getElementById(e);t&&(this.videoPreview=t.appendChild(this.videoPreview))}else this.videoPreview=e.appendChild(this.videoPreview);return this.videoPreview.src=this.videoPreviewSrc,this.videoPreview},e.prototype.clean=function(){var e=this,t=function(){delete e.blob,e.chunks=[],e.state=o.LocalRecorderState.READY};this.state===o.LocalRecorderState.RECORDING||this.state===o.LocalRecorderState.PAUSED?this.stop().then((function(){return t()})).catch((function(){return t()})):t()},e.prototype.download=function(){if(this.state!==o.LocalRecorderState.FINISHED)throw Error("'LocalRecord.download()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+this.state+"'). Call 'LocalRecorder.stop()' before");var e=document.createElement("a");e.style.display="none",document.body.appendChild(e);var t=window.URL.createObjectURL(this.blob);e.href=t,e.download=this.id+"."+a.getExtension(this.blob.type),e.click(),window.URL.revokeObjectURL(t),document.body.removeChild(e)},e.prototype.getBlob=function(){if(this.state!==o.LocalRecorderState.FINISHED)throw Error("Call 'LocalRecord.stop()' before getting Blob file");return this.blob},e.prototype.uploadAsBinary=function(e,t){var n=this;return new Promise((function(i,r){if(n.state!==o.LocalRecorderState.FINISHED)return r(Error("'LocalRecord.uploadAsBinary()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+n.state+"'). Call 'LocalRecorder.stop()' before"));var s=new XMLHttpRequest;if(s.open("POST",e,!0),"object"===typeof t)for(var a=0,c=Object.keys(t);a<c.length;a++){var d=c[a];s.setRequestHeader(d,t[d])}s.onreadystatechange=function(){if(4===s.readyState)return"2"===s.status.toString().charAt(0)?i(s.responseText):r(s.status)},s.send(n.blob)}))},e.prototype.uploadAsMultipartfile=function(e,t){var n=this;return new Promise((function(i,r){if(n.state!==o.LocalRecorderState.FINISHED)return r(Error("'LocalRecord.uploadAsMultipartfile()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+n.state+"'). Call 'LocalRecorder.stop()' before"));var s=new XMLHttpRequest;if(s.open("POST",e,!0),"object"===typeof t)for(var c=0,d=Object.keys(t);c<d.length;c++){var u=d[c];s.setRequestHeader(u,t[u])}var l=new FormData;l.append("file",n.blob,n.id+"."+a.getExtension(n.blob.type)),s.onreadystatechange=function(){if(4===s.readyState)return"2"===s.status.toString().charAt(0)?i(s.responseText):r(s.status)},s.send(l)}))},e.prototype.onStopDefault=function(){c.log("MediaRecorder stopped  (state="+this.mediaRecorder.state+")"),this.blob=new Blob(this.chunks,{type:this.mediaRecorder.mimeType}),this.chunks=[],this.videoPreviewSrc=window.URL.createObjectURL(this.blob),this.state=o.LocalRecorderState.FINISHED},e}();t.LocalRecorder=d},4765:function(e,t,n){"use strict";n(6699),Object.defineProperty(t,"__esModule",{value:!0}),t.OpenVidu=void 0;var i,o=n(7057),r=n(2398),s=n(2171),a=n(5142),c=n(4226),d=n(3018),u=n(4713),l=n(4111),p=n(5159),h=n(78),f=n(6301),m=n(973),v=n(9001),g=n(1554),b=n(5549),y=l.OpenViduLogger.getInstance(),E=function(){function e(){var e=this;this.masterNodeHasCrashed=!1,this.publishers=[],this.secret="",this.recorder=!1,this.life=-1,this.advancedConfiguration={},this.webrtcStatsInterval=-1,this.sendBrowserLogs=m.OpenViduLoggerConfiguration.disabled,this.isAtLeastPro=!1,this.isEnterprise=!1,this.ee=new v,i=p.PlatformUtils.getInstance(),this.libraryVersion=b.version,y.info("OpenVidu initialized"),y.info("Platform detected: "+i.getDescription()),y.info("openvidu-browser version: "+this.libraryVersion),(i.isMobileDevice()||i.isReactNative())&&this.onOrientationChanged((function(){e.publishers.forEach((function(t){t.stream.isLocalStreamPublished&&t.stream&&t.stream.hasVideo&&e.sendNewVideoDimensionsIfRequired(t,"deviceRotated",75,10)}))}))}return e.prototype.initSession=function(){return this.session=new s.Session(this),this.session},e.prototype.initPublisher=function(e,t,n){var i;t&&"function"!==typeof t?(i=t,i={audioSource:"undefined"!==typeof i.audioSource?i.audioSource:void 0,frameRate:"undefined"!==typeof MediaStreamTrack&&i.videoSource instanceof MediaStreamTrack?void 0:"undefined"!==typeof i.frameRate?i.frameRate:void 0,insertMode:"undefined"!==typeof i.insertMode?"string"===typeof i.insertMode?u.VideoInsertMode[i.insertMode]:i.insertMode:u.VideoInsertMode.APPEND,mirror:"undefined"===typeof i.mirror||i.mirror,publishAudio:"undefined"===typeof i.publishAudio||i.publishAudio,publishVideo:"undefined"===typeof i.publishVideo||i.publishVideo,resolution:"undefined"!==typeof MediaStreamTrack&&i.videoSource instanceof MediaStreamTrack?void 0:"undefined"!==typeof i.resolution?i.resolution:"640x480",videoSource:"undefined"!==typeof i.videoSource?i.videoSource:void 0,videoSimulcast:i.videoSimulcast,filter:i.filter}):i={insertMode:u.VideoInsertMode.APPEND,mirror:!0,publishAudio:!0,publishVideo:!0,resolution:"640x480"};var o,s=new r.Publisher(e,i,this);return t&&"function"===typeof t?o=t:n&&(o=n),s.initialize().then((function(){void 0!==o&&o(void 0),s.emitEvent("accessAllowed",[])})).catch((function(e){void 0!==o&&o(e),s.emitEvent("accessDenied",[e])})),this.publishers.push(s),s},e.prototype.initPublisherAsync=function(e,t){var n=this;return new Promise((function(i,o){var r,s=function(e){return e?o(e):i(r)};r=t?n.initPublisher(e,t,s):n.initPublisher(e,s)}))},e.prototype.initLocalRecorder=function(e){return new o.LocalRecorder(e)},e.prototype.checkSystemRequirements=function(){return i.isIPhoneOrIPad()?i.isIOSWithSafari()||i.isIonicIos()||i.isChromeMobileBrowser()||i.isEdgeMobileBrowser()||i.isOperaMobileBrowser()||i.isFirefoxMobileBrowser()?1:0:i.isChromeBrowser()||i.isChromeMobileBrowser()||i.isFirefoxBrowser()||i.isFirefoxMobileBrowser()||i.isOperaBrowser()||i.isOperaMobileBrowser()||i.isEdgeBrowser()||i.isEdgeMobileBrowser()||i.isSafariBrowser()||i.isAndroidBrowser()||i.isElectron()||i.isSamsungBrowser()?1:0},e.prototype.checkScreenSharingCapabilities=function(){return i.canScreenShare()},e.prototype.getDevices=function(){return new Promise((function(e,t){navigator.mediaDevices.enumerateDevices().then((function(t){var n,o=[];if(!i.isIonicAndroid()||"undefined"==typeof cordova||!(null===(n=null===cordova||void 0===cordova?void 0:cordova.plugins)||void 0===n?void 0:n.EnumerateDevicesPlugin))return t.forEach((function(e){"audioinput"!==e.kind&&"videoinput"!==e.kind||o.push({kind:e.kind,deviceId:e.deviceId,label:e.label})})),e(o);cordova.plugins.EnumerateDevicesPlugin.getEnumerateDevices().then((function(n){var i=[],r=[],s=[];return i=n.filter((function(e){return"audioinput"===e.kind})),r=t.filter((function(e){return"videoinput"===e.kind})),s=t.filter((function(e){return"audioinput"===e.kind})),r.forEach((function(e,t){if(e.label)o.push({kind:e.kind,deviceId:e.deviceId,label:e.label});else{var n="";n=0===t?"Front Camera":1===t?"Back Camera":"Unknown Camera",o.push({kind:e.kind,deviceId:e.deviceId,label:n})}})),s.forEach((function(e,t){if(e.label)o.push({kind:e.kind,deviceId:e.deviceId,label:e.label});else{var n="";switch(t){case 0:n="Default";break;case 1:var r=i.filter((function(e){return e.label.includes("Built")}))[0];n=r?r.label:"Built-in Microphone";break;case 2:var s=i.filter((function(e){return e.label.includes("Wired")}))[0];n=s?s.label:"Headset earpiece";break;case 3:var a=i.filter((function(e){return e.label.includes("Bluetooth")}))[0];n=a?a.label:"Wireless";break;default:n="Unknown Microphone";break}o.push({kind:e.kind,deviceId:e.deviceId,label:n})}})),e(o)}))})).catch((function(e){return y.error("Error getting devices",e),t(e)}))}))},e.prototype.getUserMedia=function(e){var t=this;return new Promise((function(n,o){var r=function(e,i){var r=void 0===i.audio||i.audio,s={audio:r,video:!1};navigator.mediaDevices.getUserMedia(s).then((function(t){return e.addTrack(t.getAudioTracks()[0]),n(e)})).catch((function(n){return e.getAudioTracks().forEach((function(e){e.stop()})),e.getVideoTracks().forEach((function(e){e.stop()})),o(t.generateAudioDeviceError(n,s))}))};t.generateMediaConstraints(e).then((function(s){var a,c;if(s.videoTrack&&s.audioTrack||s.audioTrack&&!1===(null===(a=s.constraints)||void 0===a?void 0:a.video)||s.videoTrack&&!1===(null===(c=s.constraints)||void 0===c?void 0:c.audio))return n(t.addAlreadyProvidedTracks(s,new MediaStream));s.videoTrack&&delete s.constraints.video,s.audioTrack&&delete s.constraints.audio;var u=!1;if("string"===typeof e.videoSource&&("screen"===e.videoSource||"window"===e.videoSource||i.isElectron()&&e.videoSource.startsWith("screen:"))&&(u=!s.audioTrack&&null!==e.audioSource&&!1!==e.audioSource,navigator.mediaDevices["getDisplayMedia"]&&!i.isElectron()))navigator.mediaDevices["getDisplayMedia"]({video:!0}).then((function(e){return t.addAlreadyProvidedTracks(s,e),u?void r(e,s.constraints):n(e)})).catch((function(e){var t=d.OpenViduErrorName.SCREEN_CAPTURE_DENIED,n=e.toString();return o(new d.OpenViduError(t,n))}));else{var l=u?{video:s.constraints.video}:s.constraints;navigator.mediaDevices.getUserMedia(l).then((function(e){return t.addAlreadyProvidedTracks(s,e),u?void r(e,s.constraints):n(e)})).catch((function(t){var n,i=t.toString();return n="screen"!==e.videoSource?d.OpenViduErrorName.DEVICE_ACCESS_DENIED:d.OpenViduErrorName.SCREEN_CAPTURE_DENIED,o(new d.OpenViduError(n,i))}))}})).catch((function(e){return o(e)}))}))},e.prototype.enableProdMode=function(){y.enableProdMode()},e.prototype.setAdvancedConfiguration=function(e){this.advancedConfiguration=e},e.prototype.onOrientationChanged=function(e){window.addEventListener("orientationchange",e)},e.prototype.sendNewVideoDimensionsIfRequired=function(e,t,n,i){var o=this,r=0,s=e.stream.videoDimensions.width,a=e.stream.videoDimensions.height,c=setInterval((function(){r++,r>i&&clearTimeout(c),e.getVideoDimensions().then((function(n){n.width===s&&n.height===a||(clearTimeout(c),o.sendVideoDimensionsChangedEvent(e,t,s,a,n.width,n.height))}))}),n)},e.prototype.sendVideoDimensionsChangedEvent=function(e,t,n,i,o,r){var s=this;e.stream.videoDimensions={width:o||0,height:r||0},this.sendRequest("streamPropertyChanged",{streamId:e.stream.streamId,property:"videoDimensions",newValue:JSON.stringify(e.stream.videoDimensions),reason:t},(function(o,r){o?y.error("Error sending 'streamPropertyChanged' event",o):(s.session.emitEvent("streamPropertyChanged",[new c.StreamPropertyChangedEvent(s.session,e.stream,"videoDimensions",e.stream.videoDimensions,{width:n,height:i},t)]),e.emitEvent("streamPropertyChanged",[new c.StreamPropertyChangedEvent(e,e.stream,"videoDimensions",e.stream.videoDimensions,{width:n,height:i},t)]),s.session.sendVideoData(e))}))},e.prototype.generateMediaConstraints=function(e){var t=this;return new Promise((function(n,i){var o={audioTrack:void 0,videoTrack:void 0,constraints:{audio:void 0,video:void 0}},r=e.audioSource,s=e.videoSource;if(null!==r&&!1!==r||(o.constraints.audio=!1),null!==s&&!1!==s||(o.constraints.video=!1),!1===o.constraints.audio&&!1===o.constraints.video)return i(new d.OpenViduError(d.OpenViduErrorName.NO_INPUT_SOURCE_SET,"Properties 'audioSource' and 'videoSource' cannot be set to false or null at the same time"));if("undefined"!==typeof MediaStreamTrack&&r instanceof MediaStreamTrack&&(o.audioTrack=r),"undefined"!==typeof MediaStreamTrack&&s instanceof MediaStreamTrack&&(o.videoTrack=s),void 0===r&&(o.constraints.audio=!0),void 0===s&&(o.constraints.video={width:{ideal:640},height:{ideal:480}}),null!==s&&!1!==s){if(e.resolution){var a=e.resolution.toLowerCase().split("x"),c=Number(a[0]),u=Number(a[1]);o.constraints.video={width:{ideal:c},height:{ideal:u}}}e.frameRate&&(o.constraints.video.frameRate={ideal:e.frameRate})}return t.configureDeviceIdOrScreensharing(o,e,n,i),n(o)}))},e.prototype.startWs=function(e){var t={heartbeat:5e3,ws:{uri:this.wsUri+"?sessionId="+this.session.sessionId,onconnected:e,ondisconnect:this.disconnectCallback.bind(this),onreconnecting:this.reconnectingCallback.bind(this),onreconnected:this.reconnectedCallback.bind(this),ismasternodecrashed:this.isMasterNodeCrashed.bind(this)},rpc:{requestTimeout:1e4,heartbeatRequestTimeout:5e3,participantJoined:this.session.onParticipantJoined.bind(this.session),participantPublished:this.session.onParticipantPublished.bind(this.session),participantUnpublished:this.session.onParticipantUnpublished.bind(this.session),participantLeft:this.session.onParticipantLeft.bind(this.session),participantEvicted:this.session.onParticipantEvicted.bind(this.session),recordingStarted:this.session.onRecordingStarted.bind(this.session),recordingStopped:this.session.onRecordingStopped.bind(this.session),sendMessage:this.session.onNewMessage.bind(this.session),streamPropertyChanged:this.session.onStreamPropertyChanged.bind(this.session),connectionPropertyChanged:this.session.onConnectionPropertyChanged.bind(this.session),networkQualityLevelChanged:this.session.onNetworkQualityLevelChangedChanged.bind(this.session),filterEventDispatched:this.session.onFilterEventDispatched.bind(this.session),iceCandidate:this.session.recvIceCandidate.bind(this.session),mediaError:this.session.onMediaError.bind(this.session),masterNodeCrashedNotification:this.onMasterNodeCrashedNotification.bind(this),forciblyReconnectSubscriber:this.session.onForciblyReconnectSubscriber.bind(this.session)}};this.jsonRpcClient=new g.clients.JsonRpcClient(t)},e.prototype.onMasterNodeCrashedNotification=function(e){console.error("Master Node has crashed"),this.masterNodeHasCrashed=!0,this.session.onLostConnection("nodeCrashed"),this.jsonRpcClient.close(4103,"Master Node has crashed")},e.prototype.getWsReadyState=function(){return this.jsonRpcClient.getReadyState()},e.prototype.closeWs=function(){this.jsonRpcClient.close(4102,"Connection closed by client")},e.prototype.sendRequest=function(e,t,n){t&&t instanceof Function&&(n=t,t={}),y.debug('Sending request: {method:"'+e+'", params: '+JSON.stringify(t)+"}"),this.jsonRpcClient.send(e,t,n)},e.prototype.getWsUri=function(){return this.wsUri},e.prototype.getSecret=function(){return this.secret},e.prototype.getRecorder=function(){return this.recorder},e.prototype.generateAudioDeviceError=function(e,t){var n,i;switch("Error"===e.name&&(e.name=e.constructor.name),e.name.toLowerCase()){case"notfounderror":return n=d.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,i=e.toString(),new d.OpenViduError(n,i);case"notallowederror":return n=d.OpenViduErrorName.DEVICE_ACCESS_DENIED,i=e.toString(),new d.OpenViduError(n,i);case"overconstrainederror":return"deviceid"===e.constraint.toLowerCase()?(n=d.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,i="Audio input device with deviceId '"+t.audio.deviceId.exact+"' not found"):(n=d.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,i="Audio input device doesn't support the value passed for constraint '"+e.constraint+"'"),new d.OpenViduError(n,i);case"notreadableerror":return n=d.OpenViduErrorName.DEVICE_ALREADY_IN_USE,i=e.toString(),new d.OpenViduError(n,i);default:return new d.OpenViduError(d.OpenViduErrorName.INPUT_AUDIO_DEVICE_GENERIC_ERROR,e.toString())}},e.prototype.addAlreadyProvidedTracks=function(e,t,n){return e.videoTrack&&(t.addTrack(e.videoTrack),n&&(e.constraints.video?n.lastVideoTrackConstraints=e.constraints.video:n.lastVideoTrackConstraints=e.videoTrack.getConstraints())),e.audioTrack&&t.addTrack(e.audioTrack),t},e.prototype.configureDeviceIdOrScreensharing=function(e,t,n,o){var r=this,s=t.audioSource,a=t.videoSource;if("string"===typeof s&&(e.constraints.audio={deviceId:{exact:s}}),"string"===typeof a){if(this.isScreenShare(a)){if(this.checkScreenSharingCapabilities()){if(i.isElectron()){var c="screen:",u=a,l=u.substr(u.indexOf(c)+c.length);return e.constraints.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:l}},n(e)}if(!this.advancedConfiguration.screenShareChromeExtension||i.isFirefoxBrowser()||i.isFirefoxMobileBrowser()||navigator.mediaDevices["getDisplayMedia"]){if(navigator.mediaDevices["getDisplayMedia"])return n(e);var p=i.isFirefoxBrowser()||i.isFirefoxMobileBrowser()?t.videoSource:void 0;return void h.getScreenId(p,(function(t,i,s){if(t){if("not-installed"===t){var a=r.advancedConfiguration.screenShareChromeExtension?r.advancedConfiguration.screenShareChromeExtension:"https://chrome.google.com/webstore/detail/openvidu-screensharing/lfcgfepafnobdloecchnfaclibenjold",c=new d.OpenViduError(d.OpenViduErrorName.SCREEN_EXTENSION_NOT_INSTALLED,a);return y.error(c),o(c)}if("installed-disabled"===t){c=new d.OpenViduError(d.OpenViduErrorName.SCREEN_EXTENSION_DISABLED,"You must enable the screen extension");return y.error(c),o(c)}if("permission-denied"===t){c=new d.OpenViduError(d.OpenViduErrorName.SCREEN_CAPTURE_DENIED,"You must allow access to one window of your desktop");return y.error(c),o(c)}c=new d.OpenViduError(d.OpenViduErrorName.GENERIC_ERROR,"Unknown error when accessing screen share");return y.error(c),y.error(t),o(c)}return e.constraints.video=s.video,n(e)}))}return void f.getScreenConstraints((function(t,i){if(!(t||i.mandatory&&"screen"===i.mandatory.chromeMediaSource))return e.constraints.video=i,n(e);if("permission-denied"===t||"PermissionDeniedError"===t){var s=new d.OpenViduError(d.OpenViduErrorName.SCREEN_CAPTURE_DENIED,"You must allow access to one window of your desktop");return y.error(s),o(s)}var a=r.advancedConfiguration.screenShareChromeExtension.split("/").pop().trim();f.getChromeExtensionStatus(a,(function(e){if("installed-disabled"===e){var t=new d.OpenViduError(d.OpenViduErrorName.SCREEN_EXTENSION_DISABLED,"You must enable the screen extension");return y.error(t),o(t)}if("not-installed"===e){var n=new d.OpenViduError(d.OpenViduErrorName.SCREEN_EXTENSION_NOT_INSTALLED,r.advancedConfiguration.screenShareChromeExtension);return y.error(n),o(n)}}))}))}var m=new d.OpenViduError(d.OpenViduErrorName.SCREEN_SHARING_NOT_SUPPORTED,"You can only screen share in desktop Chrome, Firefox, Opera, Safari (>=13.0), Edge (>= 80) or Electron. Detected client: "+i.getName()+" "+i.getVersion());return y.error(m),o(m)}this.setVideoSource(e,a)}},e.prototype.setVideoSource=function(e,t){e.constraints.video||(e.constraints.video={}),e.constraints.video["deviceId"]={exact:t}},e.prototype.disconnectCallback=function(){y.warn("Websocket connection lost"),this.isRoomAvailable()?this.session.onLostConnection("networkDisconnect"):alert("Connection error. Please reload page.")},e.prototype.reconnectingCallback=function(){y.warn("Websocket connection lost (reconnecting)"),this.isRoomAvailable()?this.session.emitEvent("reconnecting",[]):alert("Connection error. Please reload page.")},e.prototype.reconnectWebsocketThroughRpcConnectMethod=function(e){var t=this;this.sendRequest("connect",{sessionId:e,reconnect:!0},(function(e,n){if(e)if(t.isMasterNodeCrashed())y.warn("Master Node has crashed!");else{y.error(e);var i=function(e,n){y.warn(n),t.session.onLostConnection(e),t.jsonRpcClient.close(4101,"Reconnection fault: "+n)},o=function(){-1===t.life?i("networkDisconnect","WS successfully reconnected but the user was already evicted due to timeout"):t.sendRequest("sessionStatus",{sessionId:t.session.sessionId},(function(e,n){null!=e?console.error("Error checking session status",e):t.life===n.life?i("networkDisconnect","WS successfully reconnected but the user was already evicted due to timeout"):i("nodeCrashed","WS successfully reconnected to OpenVidu Server but your Master Node crashed")}))};40007===e.code&&"reconnection error"===e.message?(console.error("Invalid RPC sessionId. Client network disconnection or Master Node crash"),o()):o()}else t.jsonRpcClient.resetPing(),t.session.onRecoveredConnection()}))},e.prototype.reconnectedCallback=function(){if(y.warn("Websocket reconnected"),this.isRoomAvailable())if(this.session.connection)this.reconnectWebsocketThroughRpcConnectMethod(this.session.connection.rpcSessionId);else{y.warn("There was no previous connection when running reconnection callback");var e=new a.SessionDisconnectedEvent(this.session,"networkDisconnect");this.session.ee.emitEvent("sessionDisconnected",[e]),e.callDefaultBehavior()}else alert("Connection error. Please reload page.")},e.prototype.isMasterNodeCrashed=function(){return this.masterNodeHasCrashed},e.prototype.isRoomAvailable=function(){return void 0!==this.session&&this.session instanceof s.Session||(y.warn("Session instance not found"),!1)},e.prototype.isScreenShare=function(e){return"screen"===e||"window"===e||i.isElectron()&&e.startsWith("screen:")},e}();t.OpenVidu=E},2398:function(e,t,n){"use strict";n(1703);var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__awaiter||function(e,t,n,i){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i["throw"](e))}catch(t){r(t)}}function c(e){e.done?n(e.value):o(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return c([e,t])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,i&&(o=2&r[0]?i["return"]:r[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Publisher=void 0;var s,a=n(2171),c=n(5279),d=n(6978),u=n(1835),l=n(4226),p=n(3018),h=n(4111),f=n(5159),m=n(4477),v=h.OpenViduLogger.getInstance(),g=function(e){function t(t,n,i){var o=e.call(this,new c.Stream(i.session?i.session:new a.Session(i),{publisherProperties:n,mediaConstraints:{}}),t)||this;return o.accessAllowed=!1,o.isSubscribedToRemote=!1,o.accessDenied=!1,s=f.PlatformUtils.getInstance(),o.properties=n,o.openvidu=i,o.stream.ee.on("local-stream-destroyed",(function(e){o.stream.isLocalStreamPublished=!1;var t=new u.StreamEvent(!0,o,"streamDestroyed",o.stream,e);o.emitEvent("streamDestroyed",[t]),t.callDefaultBehavior()})),o}return i(t,e),t.prototype.publishAudio=function(e){var t=this;if(this.stream.audioActive!==e){var n=this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream();n.getAudioTracks().forEach((function(t){t.enabled=e})),this.session&&this.stream.streamId&&this.session.openvidu.sendRequest("streamPropertyChanged",{streamId:this.stream.streamId,property:"audioActive",newValue:e,reason:"publishAudio"},(function(n,i){n?v.error("Error sending 'streamPropertyChanged' event",n):(t.session.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(t.session,t.stream,"audioActive",e,!e,"publishAudio")]),t.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(t,t.stream,"audioActive",e,!e,"publishAudio")]),t.session.sendVideoData(t.stream.streamManager))})),this.stream.audioActive=e,v.info("'Publisher' has "+(e?"published":"unpublished")+" its audio stream")}},t.prototype.publishVideo=function(e,t){var n=this;return new Promise((function(i,s){return o(n,void 0,void 0,(function(){var n,a,c,d,u,p,h=this;return r(this,(function(f){switch(f.label){case 0:return this.stream.videoActive===e?[3,9]:(n=this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream(),a=!1,n.getVideoTracks().forEach((function(n){n.enabled=e,e||!0!==t?e&&"ended"===n.readyState&&(a=!0):n.stop()})),!e&&!0===t&&this.stream.filter&&this.stream.filter.type.startsWith("VB:")?(this.stream.lastVBFilter=this.stream.filter,[4,this.stream.removeFilterAux(!0)]):[3,2]);case 1:f.sent(),f.label=2;case 2:return a?(c=n.getVideoTracks()[0],n.removeTrack(c),d=function(e){return o(h,void 0,void 0,(function(){var t=this;return r(this,(function(i){switch(i.label){case 0:return n.addTrack(e),this.stream.isLocalStreamPublished?[4,this.replaceTrackInRtcRtpSender(e)]:[3,2];case 1:i.sent(),i.label=2;case 2:return this.stream.lastVBFilter&&setTimeout((function(){return o(t,void 0,void 0,(function(){var e,t;return r(this,(function(n){switch(n.label){case 0:return e=this.stream.lastVBFilter.options,t=this.stream.lastVBFilter.lastExecMethod,t&&"update"===t.method&&(e=Object.assign({},e,t.params)),[4,this.stream.applyFilter(this.stream.lastVBFilter.type,e)];case 1:return n.sent(),delete this.stream.lastVBFilter,[2]}}))}))}),1),[2]}}))}))},t&&t instanceof MediaStreamTrack?[4,d(t)]:[3,4]):[3,8];case 3:return f.sent(),[3,8];case 4:return f.trys.push([4,7,,8]),[4,navigator.mediaDevices.getUserMedia({audio:!1,video:this.stream.lastVideoTrackConstraints})];case 5:return u=f.sent(),[4,d(u.getVideoTracks()[0])];case 6:return f.sent(),[3,8];case 7:return p=f.sent(),[2,s(p)];case 8:return this.session&&this.stream.streamId&&this.session.openvidu.sendRequest("streamPropertyChanged",{streamId:this.stream.streamId,property:"videoActive",newValue:e,reason:"publishVideo"},(function(t,n){t?v.error("Error sending 'streamPropertyChanged' event",t):(h.session.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(h.session,h.stream,"videoActive",e,!e,"publishVideo")]),h.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(h,h.stream,"videoActive",e,!e,"publishVideo")]),h.session.sendVideoData(h.stream.streamManager))})),this.stream.videoActive=e,v.info("'Publisher' has "+(e?"published":"unpublished")+" its video stream"),[2,i()];case 9:return[2]}}))}))}))},t.prototype.subscribeToRemote=function(e){e=void 0===e||e,this.isSubscribedToRemote=e,this.stream.subscribeToMyRemote(e)},t.prototype.on=function(t,n){var i=this;return e.prototype.on.call(this,t,n),"streamCreated"===t&&(this.stream&&this.stream.isLocalStreamPublished?this.emitEvent("streamCreated",[new u.StreamEvent(!1,this,"streamCreated",this.stream,"")]):this.stream.ee.on("stream-created-by-publisher",(function(){i.emitEvent("streamCreated",[new u.StreamEvent(!1,i,"streamCreated",i.stream,"")])}))),"accessAllowed"===t&&this.accessAllowed&&this.emitEvent("accessAllowed",[]),"accessDenied"===t&&this.accessDenied&&this.emitEvent("accessDenied",[]),this},t.prototype.once=function(t,n){var i=this;return e.prototype.once.call(this,t,n),"streamCreated"===t&&(this.stream&&this.stream.isLocalStreamPublished?this.emitEvent("streamCreated",[new u.StreamEvent(!1,this,"streamCreated",this.stream,"")]):this.stream.ee.once("stream-created-by-publisher",(function(){i.emitEvent("streamCreated",[new u.StreamEvent(!1,i,"streamCreated",i.stream,"")])}))),"accessAllowed"===t&&this.accessAllowed&&this.emitEvent("accessAllowed",[]),"accessDenied"===t&&this.accessDenied&&this.emitEvent("accessDenied",[]),this},t.prototype.off=function(t,n){return e.prototype.off.call(this,t,n),this},t.prototype.replaceTrack=function(e){return o(this,void 0,void 0,(function(){return r(this,(function(t){return[2,this.replaceTrackAux(e,!0)]}))}))},t.prototype.initialize=function(){var e=this;return new Promise((function(t,n){var i,o={},r={},a=2e3,c=function(t){return e.accessDenied=!0,e.accessAllowed=!1,v.error("Publisher initialization failed. ".concat(t.name,": ").concat(t.message)),n(t)},d=function(n){var i,o;if(e.accessAllowed=!0,e.accessDenied=!1,"undefined"!==typeof MediaStreamTrack&&e.properties.audioSource instanceof MediaStreamTrack&&(n.removeTrack(n.getAudioTracks()[0]),n.addTrack(e.properties.audioSource)),"undefined"!==typeof MediaStreamTrack&&e.properties.videoSource instanceof MediaStreamTrack&&(n.removeTrack(n.getVideoTracks()[0]),n.addTrack(e.properties.videoSource)),n.getAudioTracks()[0]){var r=void 0!==e.stream.audioActive&&null!==e.stream.audioActive?e.stream.audioActive:!!e.stream.outboundStreamOpts.publisherProperties.publishAudio;n.getAudioTracks()[0].enabled=r}if(n.getVideoTracks()[0]){r=void 0!==e.stream.videoActive&&null!==e.stream.videoActive?e.stream.videoActive:!!e.stream.outboundStreamOpts.publisherProperties.publishVideo;n.getVideoTracks()[0].enabled=r}for(var s=0,a=n.getAudioTracks();s<a.length;s++){var c=a[s];(null===(i=c.contentHint)||void 0===i?void 0:i.length)||(c.contentHint="",v.info("Audio track Content Hint set: '".concat(c.contentHint,"'")))}for(var d=0,u=n.getVideoTracks();d<u.length;d++){c=u[d];if(!(null===(o=c.contentHint)||void 0===o?void 0:o.length)){switch(e.stream.typeOfVideo){case m.TypeOfVideo.SCREEN:c.contentHint="detail";break;case m.TypeOfVideo.CUSTOM:v.warn("CUSTOM type video track was provided without Content Hint!"),c.contentHint="motion";break;case m.TypeOfVideo.CAMERA:case m.TypeOfVideo.IPCAM:default:c.contentHint="motion";break}v.info("Video track Content Hint set: '".concat(c.contentHint,"'"))}}return e.initializeVideoReference(n),e.stream.displayMyRemote()||e.stream.updateMediaStreamInVideos(),delete e.firstVideoElement,e.stream.isSendVideo()?e.getVideoDimensions().then((function(t){e.stream.videoDimensions={width:t.width,height:t.height},e.stream.isSendScreen()&&(e.screenShareResizeInterval=setInterval((function(){var t=n.getVideoTracks()[0].getSettings(),i=t.width,o=t.height,r=null!=i&&i!==e.stream.videoDimensions.width,s=null!=o&&o!==e.stream.videoDimensions.height;e.stream.isLocalStreamPublished&&(r||s)&&e.openvidu.sendVideoDimensionsChangedEvent(e,"screenResized",e.stream.videoDimensions.width,e.stream.videoDimensions.height,i||0,o||0)}),650)),e.stream.isLocalStreamReadyToPublish=!0,e.stream.ee.emitEvent("stream-ready-to-publish",[])})):(e.stream.isLocalStreamReadyToPublish=!0,e.stream.ee.emitEvent("stream-ready-to-publish",[])),t()},u=function(t,n){e.clearPermissionDialogTimer(i,a),e.stream.isSendScreen()&&e.stream.isSendAudio()?(r.audio=n,r.video=!1,i=Date.now(),e.setPermissionDialogTimer(a),navigator.mediaDevices.getUserMedia(r).then((function(n){e.clearPermissionDialogTimer(i,a),t.addTrack(n.getAudioTracks()[0]),d(t)})).catch((function(n){e.clearPermissionDialogTimer(i,a),t.getAudioTracks().forEach((function(e){e.stop()})),t.getVideoTracks().forEach((function(e){e.stop()})),c(e.openvidu.generateAudioDeviceError(n,o))}))):d(t)},l=function(t){var n,r;switch(v.error("getMediaError: ".concat(t.toString())),e.clearPermissionDialogTimer(i,a),"Error"===t.name&&(t.name=t.constructor.name),t.name.toLowerCase()){case"notfounderror":navigator.mediaDevices.getUserMedia({audio:!1,video:o.video}).then((function(e){e.getVideoTracks().forEach((function(e){e.stop()})),n=p.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,r=t.toString(),c(new p.OpenViduError(n,r))})).catch((function(e){n=p.OpenViduErrorName.INPUT_VIDEO_DEVICE_NOT_FOUND,r=t.toString(),c(new p.OpenViduError(n,r))}));break;case"notallowederror":n=e.stream.isSendScreen()?p.OpenViduErrorName.SCREEN_CAPTURE_DENIED:p.OpenViduErrorName.DEVICE_ACCESS_DENIED,r=t.toString(),c(new p.OpenViduError(n,r));break;case"overconstrainederror":navigator.mediaDevices.getUserMedia({audio:!1,video:o.video}).then((function(e){e.getVideoTracks().forEach((function(e){e.stop()})),"deviceid"===t.constraint.toLowerCase()?(n=p.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,r="Audio input device with deviceId '"+o.audio.deviceId.exact+"' not found"):(n=p.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,r="Audio input device doesn't support the value passed for constraint '"+t.constraint+"'"),c(new p.OpenViduError(n,r))})).catch((function(e){"deviceid"===t.constraint.toLowerCase()?(n=p.OpenViduErrorName.INPUT_VIDEO_DEVICE_NOT_FOUND,r="Video input device with deviceId '"+o.video.deviceId.exact+"' not found"):(n=p.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,r="Video input device doesn't support the value passed for constraint '"+t.constraint+"'"),c(new p.OpenViduError(n,r))}));break;case"aborterror":case"notreadableerror":n=p.OpenViduErrorName.DEVICE_ALREADY_IN_USE,r=t.toString(),c(new p.OpenViduError(n,r));break;default:n=p.OpenViduErrorName.GENERIC_ERROR,r=t.toString(),c(new p.OpenViduError(n,r));break}};e.openvidu.generateMediaConstraints(e.properties).then((function(t){var n,c;if(t.videoTrack&&t.audioTrack||t.audioTrack&&!1===(null===(n=t.constraints)||void 0===n?void 0:n.video)||t.videoTrack&&!1===(null===(c=t.constraints)||void 0===c?void 0:c.audio))d(e.openvidu.addAlreadyProvidedTracks(t,new MediaStream,e.stream));else{o=t.constraints;var p={mediaConstraints:o,publisherProperties:e.properties};e.stream.setOutboundStreamOptions(p);var h=void 0===o.audio||o.audio;r.audio=!e.stream.isSendScreen()&&h,r.video=o.video,i=Date.now(),e.setPermissionDialogTimer(a),e.stream.isSendScreen()&&navigator.mediaDevices["getDisplayMedia"]&&!s.isElectron()?navigator.mediaDevices["getDisplayMedia"]({video:!0}).then((function(n){e.openvidu.addAlreadyProvidedTracks(t,n),u(n,h)})).catch((function(e){l(e)})):(e.stream.lastVideoTrackConstraints=r.video,navigator.mediaDevices.getUserMedia(r).then((function(n){e.openvidu.addAlreadyProvidedTracks(t,n,e.stream),u(n,h)})).catch((function(e){l(e)})))}})).catch((function(e){c(e)}))}))},t.prototype.replaceTrackAux=function(e,t){return o(this,void 0,void 0,(function(){var n,i;return r(this,(function(o){switch(o.label){case 0:n=e.enabled,"video"===e.kind?e.enabled=this.stream.videoActive:"audio"===e.kind&&(e.enabled=this.stream.audioActive),o.label=1;case 1:return o.trys.push([1,7,,8]),this.stream.isLocalStreamPublished?[4,this.replaceTrackInMediaStream(e,t)]:[3,4];case 2:return o.sent(),[4,this.replaceTrackInRtcRtpSender(e)];case 3:return[2,o.sent()];case 4:return[4,this.replaceTrackInMediaStream(e,t)];case 5:return[2,o.sent()];case 6:return[3,8];case 7:throw i=o.sent(),e.enabled=n,i;case 8:return[2]}}))}))},t.prototype.getVideoDimensions=function(){var e=this;return new Promise((function(t,n){var i,o=s.isIonicIos()||s.isIOSWithSafari(),r=function(){var n,r;if("function"===typeof e.stream.getMediaStream().getVideoTracks()[0].getSettings){var a=e.stream.getMediaStream().getVideoTracks()[0].getSettings();n=a.width||e.videoReference.videoWidth,r=a.height||e.videoReference.videoHeight}else v.warn("MediaStreamTrack does not have getSettings method on "+s.getDescription()),n=e.videoReference.videoWidth,r=e.videoReference.videoHeight;return null!=i&&e.videoReference.removeEventListener("loadedmetadata",i),o&&document.body.removeChild(e.videoReference),t({width:n,height:r})};e.videoReference.readyState>=1?r():(i=function(){if(e.videoReference.videoWidth)r();else var t=setInterval((function(){e.videoReference.videoWidth&&(clearInterval(t),r())}),40)},e.videoReference.addEventListener("loadedmetadata",i),o&&document.body.appendChild(e.videoReference))}))},t.prototype.reestablishStreamPlayingEvent=function(){this.ee.getListeners("streamPlaying").length>0&&this.addPlayEventToFirstVideo()},t.prototype.initializeVideoReference=function(e){this.videoReference=document.createElement("video"),this.videoReference.setAttribute("muted","true"),this.videoReference.style.display="none",(s.isSafariBrowser()||s.isIPhoneOrIPad()&&(s.isChromeMobileBrowser()||s.isEdgeMobileBrowser()||s.isOperaMobileBrowser()||s.isFirefoxMobileBrowser()))&&this.videoReference.setAttribute("playsinline","true"),this.stream.setMediaStream(e),this.firstVideoElement&&this.createVideoElement(this.firstVideoElement.targetElement,this.properties.insertMode),this.videoReference.srcObject=e},t.prototype.replaceTrackInMediaStream=function(e,t){return o(this,void 0,void 0,(function(){var n,i;return r(this,(function(o){return n=this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream(),"video"===e.kind?(i=n.getVideoTracks()[0],t&&(this.stream.lastVideoTrackConstraints=e.getConstraints())):i=n.getAudioTracks()[0],n.removeTrack(i),i.stop(),n.addTrack(e),"video"===e.kind&&this.stream.isLocalStreamPublished&&t&&(this.openvidu.sendNewVideoDimensionsIfRequired(this,"trackReplaced",50,30),this.session.sendVideoData(this.stream.streamManager,5,!0,5)),[2]}))}))},t.prototype.setPermissionDialogTimer=function(e){var t=this;this.permissionDialogTimeout=setTimeout((function(){t.emitEvent("accessDialogOpened",[])}),e)},t.prototype.clearPermissionDialogTimer=function(e,t){clearTimeout(this.permissionDialogTimeout),Date.now()-e>t&&this.emitEvent("accessDialogClosed",[])},t.prototype.replaceTrackInRtcRtpSender=function(e){return o(this,void 0,void 0,(function(){var t,n;return r(this,(function(i){switch(i.label){case 0:if(t=this.stream.getRTCPeerConnection().getSenders(),"video"===e.kind){if(n=t.find((function(e){return!!e.track&&"video"===e.track.kind})),!n)throw new Error("There's no replaceable track for that kind of MediaStreamTrack in this Publisher object")}else{if("audio"!==e.kind)throw new Error("Unknown track kind "+e.kind);if(n=t.find((function(e){return!!e.track&&"audio"===e.track.kind})),!n)throw new Error("There's no replaceable track for that kind of MediaStreamTrack in this Publisher object")}return[4,n.replaceTrack(e)];case 1:return i.sent(),[2]}}))}))},t}(d.StreamManager);t.Publisher=g},2171:function(e,t,n){"use strict";n(1703);var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__awaiter||function(e,t,n,i){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i["throw"](e))}catch(t){r(t)}}function c(e){e.done?n(e.value):o(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return c([e,t])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,i&&(o=2&r[0]?i["return"]:r[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Session=void 0;var s,a=n(3527),c=n(1627),d=n(727),u=n(3481),l=n(9758),p=n(2876),h=n(6570),f=n(5142),m=n(4855),v=n(1835),g=n(4226),b=n(7849),y=n(2895),E=n(3018),w=n(4713),S=n(4111),O=n(5159),I=n(9209),C=n(5466),R=S.OpenViduLogger.getInstance(),k=function(e){function t(t){var n=e.call(this)||this;return n.streamManagers=[],n.remoteStreamsCreated=new Map,n.remoteConnections=new Map,s=O.PlatformUtils.getInstance(),n.openvidu=t,n}return i(t,e),t.prototype.connect=function(e,t){var n=this;return new Promise((function(i,o){if(n.processToken(e),!n.openvidu.checkSystemRequirements())return o(new E.OpenViduError(E.OpenViduErrorName.BROWSER_NOT_SUPPORTED,"Browser "+s.getName()+" (version "+s.getVersion()+") for "+s.getFamily()+" is not supported in OpenVidu"));n.options={sessionId:n.sessionId,participantId:e,metadata:t?n.stringClientMetadata(t):""},n.connectAux(e).then((function(){return i()})).catch((function(e){return o(e)}))}))},t.prototype.disconnect=function(){this.leave(!1,"disconnect")},t.prototype.subscribe=function(e,t,n,i){var o={};o=n&&"function"!==typeof n?{insertMode:"undefined"!==typeof n.insertMode?"string"===typeof n.insertMode?w.VideoInsertMode[n.insertMode]:o.insertMode:w.VideoInsertMode.APPEND,subscribeToAudio:"undefined"===typeof n.subscribeToAudio||n.subscribeToAudio,subscribeToVideo:"undefined"===typeof n.subscribeToVideo||n.subscribeToVideo}:{insertMode:w.VideoInsertMode.APPEND,subscribeToAudio:!0,subscribeToVideo:!0};var r=void 0;if(n&&"function"===typeof n?r=n:i&&(r=i),!this.sessionConnected())throw void 0!==r&&r(this.notConnectedError()),this.notConnectedError();R.info("Subscribing to "+e.connection.connectionId),e.subscribe().then((function(){R.info("Subscribed correctly to "+e.connection.connectionId),void 0!==r&&r(void 0)})).catch((function(e){void 0!==r&&r(e)}));var s=new d.Subscriber(e,t,o);return s.targetElement&&e.streamManager.createVideoElement(s.targetElement,o.insertMode),s},t.prototype.subscribeAsync=function(e,t,n){var i=this;return new Promise((function(o,r){if(!i.sessionConnected())return r(i.notConnectedError());var s,a=function(e){return e?r(e):o(s)};s=n?i.subscribe(e,t,n,a):i.subscribe(e,t,a)}))},t.prototype.unsubscribe=function(e){var t=this;return new Promise((function(n,i){if(!t.sessionConnected())return i(t.notConnectedError());var o=e.stream.connection.connectionId;R.info("Unsubscribing from "+o),t.openvidu.sendRequest("unsubscribeFromVideo",{sender:e.stream.connection.connectionId},(function(t,r){return t?(R.error("Error unsubscribing from "+o),i(t)):(R.info("Unsubscribed correctly from "+o),e.stream.streamManager.removeAllVideos(),e.stream.disposeWebRtcPeer(),e.stream.disposeMediaStream(),n())}))}))},t.prototype.publish=function(e){var t=this;return new Promise((function(n,i){if(!t.sessionConnected())return i(t.notConnectedError());e.session=t,e.stream.session=t,e.stream.publishedOnce?e.initialize().then((function(){t.connection.addStream(e.stream),e.reestablishStreamPlayingEvent(),e.stream.publish().then((function(){return t.sendVideoData(e,8,!0,5),n()})).catch((function(e){return i(e)}))})).catch((function(e){return i(e)})):(t.connection.addStream(e.stream),e.stream.publish().then((function(){return t.sendVideoData(e,8,!0,5),n()})).catch((function(e){return i(e)})))}))},t.prototype.unpublish=function(e){var t=this;return new Promise((function(n,i){if(!t.sessionConnected())throw t.notConnectedError();var o=e.stream;return o.connection?o.connection!==t.connection?i(new Error("The associated Connection object of this Publisher is not your local Connection.Only moderators can force unpublish on remote Streams via 'forceUnpublish' method")):(R.info("Unpublishing local media ("+o.connection.connectionId+")"),void t.openvidu.sendRequest("unpublishVideo",(function(t,r){if(t)return i(t);R.info("Media unpublished correctly"),o.disposeWebRtcPeer(),o.connection.stream==o&&delete o.connection.stream;var s=new v.StreamEvent(!0,e,"streamDestroyed",e.stream,"unpublish");return e.emitEvent("streamDestroyed",[s]),s.callDefaultBehavior(),n()}))):i(new Error("The associated Connection object of this Publisher is null"))}))},t.prototype.forceDisconnect=function(e){var t=this;return new Promise((function(n,i){if(!t.sessionConnected())return i(t.notConnectedError());R.info("Forcing disconnect for connection "+e.connectionId),t.openvidu.sendRequest("forceDisconnect",{connectionId:e.connectionId},(function(t,o){return t?(R.error("Error forcing disconnect for Connection "+e.connectionId,t),401===t.code?i(new E.OpenViduError(E.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to force a disconnection")):i(t)):(R.info("Forcing disconnect correctly for Connection "+e.connectionId),n())}))}))},t.prototype.forceUnpublish=function(e){var t=this;return new Promise((function(n,i){if(!t.sessionConnected())return i(t.notConnectedError());R.info("Forcing unpublish for stream "+e.streamId),t.openvidu.sendRequest("forceUnpublish",{streamId:e.streamId},(function(t,o){return t?(R.error("Error forcing unpublish for Stream "+e.streamId,t),401===t.code?i(new E.OpenViduError(E.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to force an unpublishing")):i(t)):(R.info("Forcing unpublish correctly for Stream "+e.streamId),n())}))}))},t.prototype.signal=function(e){var t=this;return new Promise((function(n,i){if(!t.sessionConnected())return i(t.notConnectedError());var o={};if(e.to&&e.to.length>0){var r=[];e.to.forEach((function(e){e.connectionId&&r.push(e.connectionId)})),o["to"]=r}else o["to"]=[];o["data"]=e.data?e.data:"";var s=e.type?e.type:"signal";s&&"signal:"!==s.substring(0,7)&&(s="signal:"+s),o["type"]=s,t.openvidu.sendRequest("sendMessage",{message:JSON.stringify(o)},(function(e,t){return e?i(e):n()}))}))},t.prototype.on=function(t,n){var i,o,r,s;return e.prototype.onAux.call(this,t,"Event '"+t+"' triggered by 'Session'",n),"publisherStartSpeaking"===t&&(this.remoteConnections.forEach((function(e){var t;(null===(t=e.stream)||void 0===t?void 0:t.hasAudio)&&e.stream.enableHarkSpeakingEvent()})),(null===(o=null===(i=this.connection)||void 0===i?void 0:i.stream)||void 0===o?void 0:o.hasAudio)&&this.connection.stream.enableHarkSpeakingEvent()),"publisherStopSpeaking"===t&&(this.remoteConnections.forEach((function(e){var t;(null===(t=e.stream)||void 0===t?void 0:t.hasAudio)&&e.stream.enableHarkStoppedSpeakingEvent()})),(null===(s=null===(r=this.connection)||void 0===r?void 0:r.stream)||void 0===s?void 0:s.hasAudio)&&this.connection.stream.enableHarkStoppedSpeakingEvent()),this},t.prototype.once=function(t,n){var i,o,r,s;return e.prototype.onceAux.call(this,t,"Event '"+t+"' triggered once by 'Session'",n),"publisherStartSpeaking"===t&&(this.remoteConnections.forEach((function(e){var t;(null===(t=e.stream)||void 0===t?void 0:t.hasAudio)&&e.stream.enableOnceHarkSpeakingEvent()})),(null===(o=null===(i=this.connection)||void 0===i?void 0:i.stream)||void 0===o?void 0:o.hasAudio)&&this.connection.stream.enableOnceHarkSpeakingEvent()),"publisherStopSpeaking"===t&&(this.remoteConnections.forEach((function(e){var t;(null===(t=e.stream)||void 0===t?void 0:t.hasAudio)&&e.stream.enableOnceHarkStoppedSpeakingEvent()})),(null===(s=null===(r=this.connection)||void 0===r?void 0:r.stream)||void 0===s?void 0:s.hasAudio)&&this.connection.stream.enableOnceHarkStoppedSpeakingEvent()),this},t.prototype.off=function(t,n){var i,o,r,s,a=this;return e.prototype.offAux.call(this,t,n),"publisherStartSpeaking"===t&&(this.anySpeechEventListenerEnabled("publisherStartSpeaking",!1)||(this.remoteConnections.forEach((function(e){var t;(null===(t=e.stream)||void 0===t?void 0:t.streamManager)&&(a.anySpeechEventListenerEnabled("publisherStartSpeaking",!1,e.stream.streamManager)||e.stream.disableHarkSpeakingEvent(!1))})),(null===(o=null===(i=this.connection)||void 0===i?void 0:i.stream)||void 0===o?void 0:o.streamManager)&&(this.anySpeechEventListenerEnabled("publisherStartSpeaking",!1,this.connection.stream.streamManager)||this.connection.stream.disableHarkSpeakingEvent(!1)))),"publisherStopSpeaking"===t&&(this.anySpeechEventListenerEnabled("publisherStopSpeaking",!1)||(this.remoteConnections.forEach((function(e){var t;(null===(t=e.stream)||void 0===t?void 0:t.streamManager)&&(a.anySpeechEventListenerEnabled("publisherStopSpeaking",!1,e.stream.streamManager)||e.stream.disableHarkStoppedSpeakingEvent(!1))})),(null===(s=null===(r=this.connection)||void 0===r?void 0:r.stream)||void 0===s?void 0:s.streamManager)&&(this.anySpeechEventListenerEnabled("publisherStopSpeaking",!1,this.connection.stream.streamManager)||this.connection.stream.disableHarkStoppedSpeakingEvent(!1)))),this},t.prototype.onParticipantJoined=function(e){var t=this;this.getConnection(e.id,"").then((function(e){R.warn("Connection "+e.connectionId+" already exists in connections list")})).catch((function(n){var i=new a.Connection(t,e);t.remoteConnections.set(e.id,i),t.ee.emitEvent("connectionCreated",[new l.ConnectionEvent(!1,t,"connectionCreated",i,"")])}))},t.prototype.onParticipantLeft=function(e){var t=this;this.getRemoteConnection(e.connectionId,"onParticipantLeft").then((function(n){if(n.stream){var i=n.stream,o=new v.StreamEvent(!0,t,"streamDestroyed",i,e.reason);t.ee.emitEvent("streamDestroyed",[o]),o.callDefaultBehavior(),t.remoteStreamsCreated.delete(i.streamId)}t.remoteConnections.delete(n.connectionId),t.ee.emitEvent("connectionDestroyed",[new l.ConnectionEvent(!1,t,"connectionDestroyed",n,e.reason)])})).catch((function(e){R.error(e)}))},t.prototype.onParticipantPublished=function(e){var t,n=this,i=function(e){n.remoteConnections.set(e.connectionId,e),n.remoteStreamsCreated.get(e.stream.streamId)||n.ee.emitEvent("streamCreated",[new v.StreamEvent(!1,n,"streamCreated",e.stream,"")]),n.remoteStreamsCreated.set(e.stream.streamId,!0)};this.getRemoteConnection(e.id,"onParticipantPublished").then((function(n){t=n,e.metadata=n.data,t.remoteOptions=e,t.initRemoteStreams(e.streams),i(t)})).catch((function(o){t=new a.Connection(n,e),i(t)}))},t.prototype.onParticipantUnpublished=function(e){var t=this;e.connectionId===this.connection.connectionId?this.stopPublisherStream(e.reason):this.getRemoteConnection(e.connectionId,"onParticipantUnpublished").then((function(n){var i=new v.StreamEvent(!0,t,"streamDestroyed",n.stream,e.reason);t.ee.emitEvent("streamDestroyed",[i]),i.callDefaultBehavior();var o=n.stream.streamId;t.remoteStreamsCreated.delete(o),n.removeStream(o)})).catch((function(e){R.error(e)}))},t.prototype.onParticipantEvicted=function(e){e.connectionId===this.connection.connectionId&&this.sessionId&&!this.connection.disposed&&this.leave(!0,e.reason)},t.prototype.onNewMessage=function(e){var t=this;R.info("New signal: "+JSON.stringify(e));var n=e.type?e.type.replace(/^(signal:)/,""):void 0;e.from?this.getConnection(e.from,"Connection '"+e.from+"' unknown when 'onNewMessage'. Existing remote connections: "+JSON.stringify(this.remoteConnections.keys())+". Existing local connection: "+this.connection.connectionId).then((function(i){t.ee.emitEvent("signal",[new m.SignalEvent(t,n,e.data,i)]),e.type&&"signal"!==e.type&&t.ee.emitEvent(e.type,[new m.SignalEvent(t,n,e.data,i)])})).catch((function(e){R.error(e)})):(this.ee.emitEvent("signal",[new m.SignalEvent(this,n,e.data,void 0)]),e.type&&"signal"!==e.type&&this.ee.emitEvent(e.type,[new m.SignalEvent(this,n,e.data,void 0)]))},t.prototype.onStreamPropertyChanged=function(e){var t=this,n=function(n){if(n.stream&&n.stream.streamId===e.streamId){var i=n.stream,o=void 0;switch(e.property){case"audioActive":o=i.audioActive,e.newValue="true"===e.newValue,i.audioActive=e.newValue;break;case"videoActive":o=i.videoActive,e.newValue="true"===e.newValue,i.videoActive=e.newValue;break;case"videoDimensions":o=i.videoDimensions,e.newValue=JSON.parse(JSON.parse(e.newValue)),i.videoDimensions=e.newValue;break;case"filter":o=i.filter,e.newValue=Object.keys(e.newValue).length>0?e.newValue:void 0,void 0!==e.newValue?(i.filter=new c.Filter(e.newValue.type,e.newValue.options),i.filter.stream=i,e.newValue.lastExecMethod&&(i.filter.lastExecMethod=e.newValue.lastExecMethod)):delete i.filter,e.newValue=i.filter;break}t.ee.emitEvent("streamPropertyChanged",[new g.StreamPropertyChangedEvent(t,i,e.property,e.newValue,o,e.reason)]),i.streamManager&&i.streamManager.emitEvent("streamPropertyChanged",[new g.StreamPropertyChangedEvent(i.streamManager,i,e.property,e.newValue,o,e.reason)])}else R.error("No stream with streamId '"+e.streamId+"' found for connection '"+e.connectionId+"' on 'streamPropertyChanged' event")};e.connectionId===this.connection.connectionId?n(this.connection):this.getRemoteConnection(e.connectionId,"onStreamPropertyChanged").then((function(e){n(e)})).catch((function(e){R.error(e)}))},t.prototype.onConnectionPropertyChanged=function(e){var t;switch(e.property){case"role":t=this.connection.role.slice(),this.connection.role=e.newValue,this.connection.localOptions.role=e.newValue;break;case"record":t=this.connection.record,e.newValue="true"===e.newValue,this.connection.record=e.newValue,this.connection.localOptions.record=e.newValue;break}this.ee.emitEvent("connectionPropertyChanged",[new b.ConnectionPropertyChangedEvent(this,this.connection,e.property,e.newValue,t)])},t.prototype.onNetworkQualityLevelChangedChanged=function(e){var t=this;e.connectionId===this.connection.connectionId?this.ee.emitEvent("networkQualityLevelChanged",[new y.NetworkQualityLevelChangedEvent(this,e.newValue,e.oldValue,this.connection)]):this.getConnection(e.connectionId,"Connection not found for connectionId "+e.connectionId).then((function(n){t.ee.emitEvent("networkQualityLevelChanged",[new y.NetworkQualityLevelChangedEvent(t,e.newValue,e.oldValue,n)])})).catch((function(e){R.error(e)}))},t.prototype.recvIceCandidate=function(e){var t={candidate:e.candidate,sdpMLineIndex:e.sdpMLineIndex,sdpMid:e.sdpMid},n=new RTCIceCandidate(t);this.getConnection(e.senderConnectionId,"Connection not found for connectionId "+e.senderConnectionId+" owning endpoint "+e.endpointName+". Ice candidate will be ignored: "+n).then((function(t){var i=t.stream;i.getWebRtcPeer().addIceCandidate(n).catch((function(t){R.error("Error adding candidate for "+i.streamId+" stream of endpoint "+e.endpointName+": "+t)}))})).catch((function(e){R.error(e)}))},t.prototype.onSessionClosed=function(e){R.info("Session closed: "+JSON.stringify(e));var t=e.sessionId;void 0!==t?this.ee.emitEvent("session-closed",[{session:t}]):R.warn("Session undefined on session closed",e)},t.prototype.onLostConnection=function(e){R.warn("Lost connection in Session "+this.sessionId),this.sessionId&&this.connection&&!this.connection.disposed&&this.leave(!0,e)},t.prototype.onRecoveredConnection=function(){R.info("Recovered connection in Session "+this.sessionId),this.reconnectBrokenStreams(),this.ee.emitEvent("reconnected",[])},t.prototype.onMediaError=function(e){R.error("Media error: "+JSON.stringify(e));var t=e.error;t?this.ee.emitEvent("error-media",[{error:t}]):R.warn("Received undefined media error:",e)},t.prototype.onRecordingStarted=function(e){this.ee.emitEvent("recordingStarted",[new h.RecordingEvent(this,"recordingStarted",e.id,e.name)])},t.prototype.onRecordingStopped=function(e){this.ee.emitEvent("recordingStopped",[new h.RecordingEvent(this,"recordingStopped",e.id,e.name,e.reason)])},t.prototype.onFilterEventDispatched=function(e){var t=this,n=e.connectionId;this.getConnection(n,"No connection found for connectionId "+n).then((function(n){R.info('Filter event of type "'.concat(e.eventType,'" dispatched'));var i=n.stream;if(!i||!i.filter)return R.error('Filter event of type "'.concat(e.eventType,'" dispatched for stream ').concat(i.streamId," but there is no ").concat(i?"filter":"stream"," defined"));var o=i.filter.handlers.get(e.eventType);if(!o||"function"!==typeof o){var r=Array.from(i.filter.handlers.keys());return R.error('Filter event of type "'.concat(e.eventType,'" not handled or not a function! Active filter events: ').concat(r.join(",")))}o.call(t,new p.FilterEvent(i.filter,e.eventType,e.data))}))},t.prototype.onForciblyReconnectSubscriber=function(e){var t=this;return new Promise((function(n,i){t.getRemoteConnection(e.connectionId,"onForciblyReconnectSubscriber").then((function(o){if(!o.stream||o.stream.streamId!==e.streamId){var r="No stream with streamId '"+e.streamId+"' found for connection '"+e.connectionId+"' on 'streamPropertyChanged' event";return R.error(r),i(r)}var s=o.stream;if(s.setupReconnectionEventEmitter(n,i)){if(null!=s.reconnectionEventEmitter["onForciblyReconnectSubscriberLastEvent"])return s.reconnectionEventEmitter["onForciblyReconnectSubscriberLastEvent"]=e,i("Ongoing forced subscriber reconnection");s.reconnectionEventEmitter["onForciblyReconnectSubscriberLastEvent"]=e;var a=function(){var e=s.reconnectionEventEmitter["onForciblyReconnectSubscriberLastEvent"];delete s.reconnectionEventEmitter["onForciblyReconnectSubscriberLastEvent"],t.onForciblyReconnectSubscriber(e)};return s.reconnectionEventEmitter.once("success",(function(){a()})),void s.reconnectionEventEmitter.once("error",(function(){a()}))}s.completeWebRtcPeerReceive(!0,!0,e.sdpOffer).then((function(){return s.finalResolveForSubscription(!0,n)})).catch((function(t){return s.finalRejectForSubscription(!0,"Error while forcibly reconnecting remote stream ".concat(e.streamId,": ").concat(t.toString()),i)}))})).catch((function(e){return R.error(e),i(e)}))}))},t.prototype.reconnectBrokenStreams=function(){R.info("Re-establishing media connections...");var e=!1;this.connection.stream&&this.connection.stream.streamIceConnectionStateBroken()&&(R.warn("Re-establishing Publisher "+this.connection.stream.streamId),this.connection.stream.initWebRtcPeerSend(!0),e=!0),this.remoteConnections.forEach((function(t){t.stream&&t.stream.streamIceConnectionStateBroken()&&(R.warn("Re-establishing Subscriber "+t.stream.streamId),t.stream.initWebRtcPeerReceive(!0),e=!0)})),e||R.info("There were no media streams in need of a reconnection")},t.prototype.emitEvent=function(e,t){this.ee.emitEvent(e,t)},t.prototype.leave=function(e,t){var n=this;if(e=!!e,R.info("Leaving Session (forced="+e+")"),this.stopVideoDataIntervals(),this.connection){if(this.connection.disposed||e?this.openvidu.closeWs():this.openvidu.sendRequest("leaveRoom",(function(e,t){e&&R.error("leaveRoom error: ".concat(JSON.stringify(e))),n.openvidu.closeWs()})),this.stopPublisherStream(t),!this.connection.disposed){var i=new f.SessionDisconnectedEvent(this,t);this.ee.emitEvent("sessionDisconnected",[i]),i.callDefaultBehavior()}}else R.warn("You were not connected to the session "+this.sessionId);R.flush()},t.prototype.initializeParams=function(e){var t={token:e||"",session:this.sessionId,platform:s.getDescription()?s.getDescription():"unknown",sdkVersion:this.openvidu.libraryVersion,metadata:this.options.metadata?this.options.metadata:"",secret:this.openvidu.getSecret(),recorder:this.openvidu.getRecorder()};return t},t.prototype.sendVideoData=function(e,t,n,i){var a,c,d=this;if(void 0===t&&(t=1),void 0===n&&(n=!1),void 0===i&&(i=1),s.isChromeBrowser()||s.isChromeMobileBrowser()||s.isOperaBrowser()||s.isOperaMobileBrowser()||s.isEdgeBrowser()||s.isEdgeMobileBrowser()||s.isElectron()||s.isSafariBrowser()&&!s.isIonicIos()||s.isAndroidBrowser()||s.isSamsungBrowser()||s.isIonicAndroid()||s.isIOSWithSafari()){var u=function(){return o(d,void 0,void 0,(function(){var t,n,i;return r(this,(function(o){switch(o.label){case 0:return t=e.stream.getRTCPeerConnection(),"connected"!==t.connectionState?[3,2]:[4,t.getStats()];case 1:n=o.sent(),i=[],n.forEach((function(e){"frameWidth"in e&&"frameHeight"in e&&0===i.length&&i.push(e)})),i.length>0&&this.openvidu.sendRequest("videoData",{height:i[0].frameHeight,width:i[0].frameWidth,videoActive:null!=e.stream.videoActive&&e.stream.videoActive,audioActive:null!=e.stream.audioActive&&e.stream.audioActive},(function(e,t){e&&R.error("Error sending 'videoData' event",e)})),o.label=2;case 2:return[2]}}))}))};if(n){var l=1;this.videoDataInterval=setInterval((function(){l<i?(l++,u()):clearInterval(d.videoDataInterval)}),1e3*t)}else this.videoDataTimeout=setTimeout(u,1e3*t)}else s.isFirefoxBrowser()||s.isFirefoxMobileBrowser()||s.isIonicIos()||s.isReactNative()?this.openvidu.sendRequest("videoData",{height:(null===(a=e.stream.videoDimensions)||void 0===a?void 0:a.height)||0,width:(null===(c=e.stream.videoDimensions)||void 0===c?void 0:c.width)||0,videoActive:null!=e.stream.videoActive&&e.stream.videoActive,audioActive:null!=e.stream.audioActive&&e.stream.audioActive},(function(e,t){e&&R.error("Error sending 'videoData' event",e)})):R.error("Browser "+s.getName()+" (version "+s.getVersion()+") for "+s.getFamily()+" is not supported in OpenVidu for Network Quality")},t.prototype.sessionConnected=function(){return null!=this.connection},t.prototype.notConnectedError=function(){return new E.OpenViduError(E.OpenViduErrorName.OPENVIDU_NOT_CONNECTED,"There is no connection to the session. Method 'Session.connect' must be successfully completed first")},t.prototype.anySpeechEventListenerEnabled=function(e,t,n){var i=this.ee.getListeners(e);t&&(i=i.filter((function(e){return e.once})));var o=i.length;if(o>0)return!0;var r=0;if(n){var s=n.ee.getListeners(e);t&&(s=s.filter((function(e){return e.once}))),r=s.length}return r>0},t.prototype.getTokenParams=function(e){var t=e.match(/^(wss?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);if(t){var n={protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7]},i=e.split("?"),o=decodeURI(i[1]).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n=t[0],i=t[1];return e[n]=i,e}),{});return{sessionId:o["sessionId"],secret:o["secret"],recorder:o["recorder"],webrtcStatsInterval:o["webrtcStatsInterval"],sendBrowserLogs:o["sendBrowserLogs"],edition:o["edition"],wsUri:"wss://"+n.host+"/openvidu",httpUri:"https://"+n.host}}throw new Error('Token not valid: "'.concat(e,'"'))},t.prototype.connectAux=function(e){var t=this;return new Promise((function(n,i){t.openvidu.startWs((function(o){if(o)return i(o);var r=t.initializeParams(e);t.openvidu.sendRequest("joinRoom",r,(function(o,r){if(o)return i(o);t.processJoinRoomResponse(r,e),t.connection=new a.Connection(t,r);var s={connections:new Array,streams:new Array},c=r.value;return c.forEach((function(e){var n=new a.Connection(t,e);t.remoteConnections.set(n.connectionId,n),s.connections.push(n),n.stream&&(t.remoteStreamsCreated.set(n.stream.streamId,!0),s.streams.push(n.stream))})),t.ee.emitEvent("connectionCreated",[new l.ConnectionEvent(!1,t,"connectionCreated",t.connection,"")]),s.connections.forEach((function(e){t.ee.emitEvent("connectionCreated",[new l.ConnectionEvent(!1,t,"connectionCreated",e,"")])})),s.streams.forEach((function(e){t.ee.emitEvent("streamCreated",[new v.StreamEvent(!1,t,"streamCreated",e,"")])})),n()}))}))}))},t.prototype.stopPublisherStream=function(e){this.connection.stream&&(this.connection.stream.disposeWebRtcPeer(),this.connection.stream.isLocalStreamPublished&&this.connection.stream.ee.emitEvent("local-stream-destroyed",[e]))},t.prototype.stopVideoDataIntervals=function(){clearInterval(this.videoDataInterval),clearTimeout(this.videoDataTimeout)},t.prototype.stringClientMetadata=function(e){return"string"!==typeof e?JSON.stringify(e):e},t.prototype.getConnection=function(e,t){var n=this;return new Promise((function(i,o){var r=n.remoteConnections.get(e);return r?i(r):n.connection.connectionId===e?i(n.connection):o(new E.OpenViduError(E.OpenViduErrorName.GENERIC_ERROR,t))}))},t.prototype.getRemoteConnection=function(e,t){var n=this;return new Promise((function(i,o){var r=n.remoteConnections.get(e);if(r)return i(r);var s="Remote connection "+e+" unknown when '"+t+"'. Existing remote connections: "+JSON.stringify(n.remoteConnections.keys());return o(new E.OpenViduError(E.OpenViduErrorName.GENERIC_ERROR,s))}))},t.prototype.processToken=function(e){var t=this.getTokenParams(e);this.sessionId=t.sessionId,t.secret&&(this.openvidu.secret=t.secret),t.recorder&&(this.openvidu.recorder=!0),t.webrtcStatsInterval&&(this.openvidu.webrtcStatsInterval=t.webrtcStatsInterval),t.sendBrowserLogs&&(this.openvidu.sendBrowserLogs=t.sendBrowserLogs),this.openvidu.isAtLeastPro="pro"===t.edition||"enterprise"===t.edition,this.openvidu.isEnterprise="enterprise"===t.edition,this.openvidu.wsUri=t.wsUri,this.openvidu.httpUri=t.httpUri},t.prototype.processJoinRoomResponse=function(e,t){if(this.sessionId=e.session,null!=e.customIceServers&&e.customIceServers.length>0){this.openvidu.iceServers=[];for(var n=0,i=e.customIceServers;n<i.length;n++){var o=i[n],r={urls:[o.url]};R.log("STUN/TURN server IP: "+o.url),null!=o.username&&null!=o.credential&&(r.username=o.username,r.credential=o.credential,R.log("TURN credentials ["+o.username+":"+o.credential+"]")),this.openvidu.iceServers.push(r)}}else if(null!=e.coturnIp&&null!=e.coturnPort&&null!=e.turnUsername&&null!=e.turnCredential){var s="turn:"+e.coturnIp+":"+e.coturnPort;this.openvidu.iceServers=[{urls:[s],username:e.turnUsername,credential:e.turnCredential}],R.log("STUN/TURN server IP: "+e.coturnIp),R.log("TURN temp credentials ["+e.turnUsername+":"+e.turnCredential+"]")}this.openvidu.role=e.role,this.openvidu.finalUserId=e.finalUserId,this.openvidu.mediaServer=e.mediaServer,this.openvidu.videoSimulcast=e.videoSimulcast,this.capabilities={subscribe:!0,publish:"SUBSCRIBER"!==this.openvidu.role,forceUnpublish:"MODERATOR"===this.openvidu.role,forceDisconnect:"MODERATOR"===this.openvidu.role},R.info("openvidu-server version: "+e.version),null!=e.life&&(this.openvidu.life=e.life);var a=C(e.version)-C(this.openvidu.libraryVersion);I(e.version)!==I(this.openvidu.libraryVersion)||0!=a&&1!=a?R.error("openvidu-browser (".concat(this.openvidu.libraryVersion,") and openvidu-server (").concat(e.version,") versions are incompatible. ")+"Errors are likely to occur. openvidu-browser SDK is only compatible with the same version or the immediately following minor version of an OpenVidu deployment"):1==a&&R.warn("openvidu-browser version ".concat(this.openvidu.libraryVersion," does not match openvidu-server version ").concat(e.version,". ")+"These versions are still compatible with each other, but openvidu-browser version must be updated as soon as possible to ".concat(I(e.version),".").concat(C(e.version),".x. ")+"This client using openvidu-browser ".concat(this.openvidu.libraryVersion," will become incompatible with the next release of openvidu-server")),S.OpenViduLogger.configureJSNLog(this.openvidu,t),this.token=t},t}(u.EventDispatcher);t.Session=k},5279:function(e,t,n){"use strict";n(1703),n(2801);var i=this&&this.__awaiter||function(e,t,n,i){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i["throw"](e))}catch(t){r(t)}}function c(e){e.done?n(e.value):o(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return c([e,t])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,i&&(o=2&r[0]?i["return"]:r[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Stream=void 0;var r,s=n(1627),a=n(727),c=n(8645),d=n(9885),u=n(1092),l=n(7733),p=n(4600),h=n(4226),f=n(3018),m=n(4477),v=n(4111),g=n(5159),b=n(759),y=n(4615),E=n(9001),w=v.OpenViduLogger.getInstance(),S=function(){function e(e,t){var n=this;this.isSubscribeToRemote=!1,this.isLocalStreamReadyToPublish=!1,this.isLocalStreamPublished=!1,this.publishedOnce=!1,this.harkSpeakingEnabled=!1,this.harkSpeakingEnabledOnce=!1,this.harkStoppedSpeakingEnabled=!1,this.harkStoppedSpeakingEnabledOnce=!1,this.harkVolumeChangeEnabled=!1,this.harkVolumeChangeEnabledOnce=!1,this.ee=new E,r=g.PlatformUtils.getInstance(),this.session=e,t.hasOwnProperty("id")?(this.inboundStreamOpts=t,this.streamId=this.inboundStreamOpts.id,this.creationTime=this.inboundStreamOpts.createdAt,this.hasAudio=this.inboundStreamOpts.hasAudio,this.hasVideo=this.inboundStreamOpts.hasVideo,this.hasAudio&&(this.audioActive=this.inboundStreamOpts.audioActive),this.hasVideo&&(this.videoActive=this.inboundStreamOpts.videoActive,this.typeOfVideo=this.inboundStreamOpts.typeOfVideo?this.inboundStreamOpts.typeOfVideo:void 0,this.frameRate=-1===this.inboundStreamOpts.frameRate?void 0:this.inboundStreamOpts.frameRate,this.videoDimensions=this.inboundStreamOpts.videoDimensions),this.inboundStreamOpts.filter&&Object.keys(this.inboundStreamOpts.filter).length>0&&(this.inboundStreamOpts.filter.lastExecMethod&&0===Object.keys(this.inboundStreamOpts.filter.lastExecMethod).length&&delete this.inboundStreamOpts.filter.lastExecMethod,this.filter=this.inboundStreamOpts.filter)):(this.outboundStreamOpts=t,this.hasAudio=this.isSendAudio(),this.hasVideo=this.isSendVideo(),this.hasAudio&&(this.audioActive=!!this.outboundStreamOpts.publisherProperties.publishAudio),this.hasVideo&&(this.videoActive=!!this.outboundStreamOpts.publisherProperties.publishVideo,this.frameRate=this.outboundStreamOpts.publisherProperties.frameRate,"undefined"!==typeof MediaStreamTrack&&this.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack?this.typeOfVideo=m.TypeOfVideo.CUSTOM:this.typeOfVideo=this.isSendScreen()?m.TypeOfVideo.SCREEN:m.TypeOfVideo.CAMERA),this.outboundStreamOpts.publisherProperties.filter&&(this.filter=this.outboundStreamOpts.publisherProperties.filter)),this.ee.on("mediastream-updated",(function(){var e;n.streamManager.updateMediaStream(n.mediaStream),w.debug("Video srcObject ["+(null===(e=n.mediaStream)||void 0===e?void 0:e.id)+"] updated in stream ["+n.streamId+"]")}))}return e.prototype.reconnect=function(){return this.reconnectStream("API")},e.prototype.applyFilter=function(e,t){var n=this;return new Promise((function(r,a){return i(n,void 0,void 0,(function(){var n,c,d,u,l,p,m=this;return o(this,(function(v){if(this.filter)return[2,a(new f.OpenViduError(f.OpenViduErrorName.GENERIC_ERROR,"There is already a filter applied to Stream "+this.streamId))];if(n=function(n,i){if(n)return w.error("Error applying filter for Stream "+m.streamId,n),401===n.code?a(new f.OpenViduError(f.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to apply a filter")):a(n);w.info("Filter successfully applied on Stream "+m.streamId);var o=m.filter;return m.filter=new s.Filter(e,t),m.filter.stream=m,i&&(m.session.emitEvent("streamPropertyChanged",[new h.StreamPropertyChangedEvent(m.session,m,"filter",m.filter,o,"applyFilter")]),m.streamManager.emitEvent("streamPropertyChanged",[new h.StreamPropertyChangedEvent(m.streamManager,m,"filter",m.filter,o,"applyFilter")])),r(m.filter)},e.startsWith("VB:")){if(!this.hasVideo)return[2,a(new f.OpenViduError(f.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"The Virtual Background filter requires a video track to be applied"))];if(!this.mediaStream||0===this.streamManager.videos.length)return[2,a(new f.OpenViduError(f.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"The StreamManager requires some video element to be attached to it in order to apply a Virtual Background filter"))];if(c=this.session.token?this.session.token:t["token"],!c)return[2,a(new f.OpenViduError(f.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,'Virtual Background requires the client to be connected to a Session or to have a "token" property available in "options" parameter with a valid OpenVidu token'))];if(d=this.session.getTokenParams(c),"pro"!==d.edition&&"enterprise"!==d.edition)return[2,a(new f.OpenViduError(f.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"OpenVidu Virtual Background API is available from OpenVidu Pro edition onwards"))];c=encodeURIComponent(btoa(c)),w.info("Applying Virtual Background to stream "+this.streamId),u=function(){return i(m,void 0,void 0,(function(){var i,r,s,a,u,l,p;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,8,,9]),i=this.streamId+"_"+(0,b.v4)(),r=this.mediaStream.clone(),s=this.streamManager.videos[0].video.cloneNode(!1),s.id=VirtualBackground.VirtualBackground.SOURCE_VIDEO_PREFIX+i,s.srcObject=r,s.muted=!0,this.virtualBackgroundSourceElements={videoClone:s,mediaStreamClone:r},VirtualBackground.VirtualBackground.hideHtmlElement(s,!1),VirtualBackground.VirtualBackground.appendHtmlElementToHiddenContainer(s,i),[4,s.play()];case 1:switch(o.sent(),a=new VirtualBackground.VirtualBackground({id:i,openviduServerUrl:new URL(d.httpUri),openviduToken:c,inputVideo:s,inputResolution:"160x96",outputFramerate:24}),u=void 0,l=e,l){case"VB:blur":return[3,2];case"VB:image":return[3,4]}return[3,6];case 2:return[4,a.backgroundBlur(t)];case 3:return u=o.sent(),[3,7];case 4:return[4,a.backgroundImage(t)];case 5:return u=o.sent(),[3,7];case 6:throw new Error("Unknown Virtual Background filter: "+e);case 7:return this.virtualBackgroundSinkElements={VB:a,video:u},s.style.display="none",this.streamManager.remote?this.streamManager.replaceTrackInMediaStream(this.virtualBackgroundSinkElements.video.srcObject.getVideoTracks()[0],!1):this.streamManager.replaceTrackAux(this.virtualBackgroundSinkElements.video.srcObject.getVideoTracks()[0],!1),n(void 0,!1),[3,9];case 8:return p=o.sent(),p.name===f.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR?n(new f.OpenViduError(f.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,p.message),!1):n(p,!1),[3,9];case 9:return[2]}}))}))},"undefined"===typeof VirtualBackground?(l=document.createElement("script"),l.type="text/javascript",l.src=d.httpUri+"/openvidu/virtual-background/openvidu-virtual-background.js?token="+c,l.onload=function(){return i(m,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,u()];case 1:return i.sent(),r(new s.Filter(e,t)),[3,3];case 2:return n=i.sent(),a(n),[3,3];case 3:return[2]}}))}))},document.body.appendChild(l)):u().then((function(){return r(new s.Filter(e,t))})).catch((function(e){return a(e)}))}else{if(!this.session.sessionConnected())return[2,a(this.session.notConnectedError())];w.info("Applying server filter to stream "+this.streamId),t=null!=t?t:{},p=t,"string"!==typeof p&&(p=JSON.stringify(p)),this.session.openvidu.sendRequest("applyFilter",{streamId:this.streamId,type:e,options:p},(function(e,t){n(e,!0)}))}return[2]}))}))}))},e.prototype.removeFilter=function(){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.removeFilterAux(!1)];case 1:return[2,e.sent()]}}))}))},e.prototype.getRTCPeerConnection=function(){return this.webRtcPeer.pc},e.prototype.getMediaStream=function(){return this.mediaStream},e.prototype.removeFilterAux=function(e){var t=this;return new Promise((function(n,r){return i(t,void 0,void 0,(function(){var t,i,s,a,c=this;return o(this,(function(o){switch(o.label){case 0:if(t=function(e,t){if(e)return delete c.filter,w.error("Error removing filter for Stream "+c.streamId,e),401===e.code?r(new f.OpenViduError(f.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to remove a filter")):r(e);w.info("Filter successfully removed from Stream "+c.streamId);var i=c.filter;return delete c.filter,t&&(c.session.emitEvent("streamPropertyChanged",[new h.StreamPropertyChangedEvent(c.session,c,"filter",c.filter,i,"applyFilter")]),c.streamManager.emitEvent("streamPropertyChanged",[new h.StreamPropertyChangedEvent(c.streamManager,c,"filter",c.filter,i,"applyFilter")])),n()},!this.filter)return[3,12];if(!(null===(a=this.filter)||void 0===a?void 0:a.type.startsWith("VB:")))return[3,10];o.label=1;case 1:return o.trys.push([1,8,,9]),i=this.virtualBackgroundSourceElements.mediaStreamClone,e?[3,6]:this.streamManager.remote?[4,this.streamManager.replaceTrackInMediaStream(i.getVideoTracks()[0],!1)]:[3,3];case 2:return o.sent(),[3,5];case 3:return[4,this.streamManager.replaceTrackAux(i.getVideoTracks()[0],!1)];case 4:o.sent(),o.label=5;case 5:return[3,7];case 6:i.getTracks().forEach((function(e){return e.stop()})),o.label=7;case 7:return this.virtualBackgroundSinkElements.VB.cleanUp(),delete this.virtualBackgroundSinkElements,delete this.virtualBackgroundSourceElements,[2,t(void 0,!1)];case 8:return s=o.sent(),[2,t(s,!1)];case 9:return[3,11];case 10:if(!this.session.sessionConnected())return[2,r(this.session.notConnectedError())];w.info("Removing filter of stream "+this.streamId),this.session.openvidu.sendRequest("removeFilter",{streamId:this.streamId},(function(e,n){return t(e,!0)})),o.label=11;case 11:return[3,13];case 12:return[2,r(new f.OpenViduError(f.OpenViduErrorName.GENERIC_ERROR,"Stream "+this.streamId+" has no filter applied"))];case 13:return[2]}}))}))}))},e.prototype.setMediaStream=function(e){this.mediaStream=e},e.prototype.updateMediaStreamInVideos=function(){this.ee.emitEvent("mediastream-updated",[])},e.prototype.getWebRtcPeer=function(){return this.webRtcPeer},e.prototype.subscribeToMyRemote=function(e){this.isSubscribeToRemote=e},e.prototype.setOutboundStreamOptions=function(e){this.outboundStreamOpts=e},e.prototype.subscribe=function(){var e=this;return new Promise((function(t,n){e.initWebRtcPeerReceive(!1).then((function(){return t()})).catch((function(e){return n(e)}))}))},e.prototype.publish=function(){var e=this;return new Promise((function(t,n){e.isLocalStreamReadyToPublish?e.initWebRtcPeerSend(!1).then((function(){return t()})).catch((function(e){return n(e)})):e.ee.once("stream-ready-to-publish",(function(){e.publish().then((function(){return t()})).catch((function(e){return n(e)}))}))}))},e.prototype.disposeWebRtcPeer=function(){var e;this.webRtcPeer&&(this.webRtcPeer.dispose(),e=this.webRtcPeer.getId()),this.stopWebRtcStats(),w.info((this.outboundStreamOpts?"Outbound ":"Inbound ")+"RTCPeerConnection with id ["+e+"] from 'Stream' with id ["+this.streamId+"] is now closed")},e.prototype.disposeMediaStream=function(){return i(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:if(!this.filter||!this.filter.type.startsWith("VB:"))return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.removeFilterAux(!0)];case 2:return t.sent(),console.debug("Success removing Virtual Background filter for stream ".concat(this.streamId)),[3,4];case 3:return e=t.sent(),console.error("Error removing Virtual Background filter for stream ".concat(this.streamId),e),[3,4];case 4:return this.mediaStream&&(this.mediaStream.getAudioTracks().forEach((function(e){e.stop()})),this.mediaStream.getVideoTracks().forEach((function(e){e.stop()})),delete this.mediaStream),this.localMediaStreamWhenSubscribedToRemote&&(this.localMediaStreamWhenSubscribedToRemote.getAudioTracks().forEach((function(e){e.stop()})),this.localMediaStreamWhenSubscribedToRemote.getVideoTracks().forEach((function(e){e.stop()})),delete this.localMediaStreamWhenSubscribedToRemote),this.speechEvent&&(this.speechEvent.stop&&this.speechEvent.stop(),delete this.speechEvent),w.info((this.outboundStreamOpts?"Local ":"Remote ")+"MediaStream from 'Stream' with id ["+this.streamId+"] is now disposed"),[2]}}))}))},e.prototype.displayMyRemote=function(){return this.isSubscribeToRemote},e.prototype.isSendAudio=function(){return!!this.outboundStreamOpts&&null!==this.outboundStreamOpts.publisherProperties.audioSource&&!1!==this.outboundStreamOpts.publisherProperties.audioSource},e.prototype.isSendVideo=function(){return!!this.outboundStreamOpts&&null!==this.outboundStreamOpts.publisherProperties.videoSource&&!1!==this.outboundStreamOpts.publisherProperties.videoSource},e.prototype.isSendScreen=function(){var e="screen"===this.outboundStreamOpts.publisherProperties.videoSource;return r.isElectron()&&(e="string"===typeof this.outboundStreamOpts.publisherProperties.videoSource&&this.outboundStreamOpts.publisherProperties.videoSource.startsWith("screen:")),!!this.outboundStreamOpts&&e},e.prototype.enableHarkSpeakingEvent=function(){var e=this;this.setHarkListenerIfNotExists(),!this.harkSpeakingEnabled&&this.speechEvent&&(this.harkSpeakingEnabled=!0,this.speechEvent.on("speaking",(function(){e.session.emitEvent("publisherStartSpeaking",[new l.PublisherSpeakingEvent(e.session,"publisherStartSpeaking",e.connection,e.streamId)]),e.streamManager.emitEvent("publisherStartSpeaking",[new l.PublisherSpeakingEvent(e.streamManager,"publisherStartSpeaking",e.connection,e.streamId)]),e.harkSpeakingEnabledOnce=!1})))},e.prototype.enableOnceHarkSpeakingEvent=function(){var e=this;this.setHarkListenerIfNotExists(),!this.harkSpeakingEnabledOnce&&this.speechEvent&&(this.harkSpeakingEnabledOnce=!0,this.speechEvent.once("speaking",(function(){e.harkSpeakingEnabledOnce&&(e.session.emitEvent("publisherStartSpeaking",[new l.PublisherSpeakingEvent(e.session,"publisherStartSpeaking",e.connection,e.streamId)]),e.streamManager.emitEvent("publisherStartSpeaking",[new l.PublisherSpeakingEvent(e.streamManager,"publisherStartSpeaking",e.connection,e.streamId)])),e.disableHarkSpeakingEvent(!0)})))},e.prototype.disableHarkSpeakingEvent=function(e){if(this.speechEvent){if(this.harkSpeakingEnabledOnce=!1,e){if(this.harkSpeakingEnabled)return}else this.harkSpeakingEnabled=!1;this.harkVolumeChangeEnabled||this.harkVolumeChangeEnabledOnce||this.harkStoppedSpeakingEnabled||this.harkStoppedSpeakingEnabledOnce?this.speechEvent.off("speaking"):(this.speechEvent.stop(),delete this.speechEvent)}},e.prototype.enableHarkStoppedSpeakingEvent=function(){var e=this;this.setHarkListenerIfNotExists(),!this.harkStoppedSpeakingEnabled&&this.speechEvent&&(this.harkStoppedSpeakingEnabled=!0,this.speechEvent.on("stopped_speaking",(function(){e.session.emitEvent("publisherStopSpeaking",[new l.PublisherSpeakingEvent(e.session,"publisherStopSpeaking",e.connection,e.streamId)]),e.streamManager.emitEvent("publisherStopSpeaking",[new l.PublisherSpeakingEvent(e.streamManager,"publisherStopSpeaking",e.connection,e.streamId)]),e.harkStoppedSpeakingEnabledOnce=!1})))},e.prototype.enableOnceHarkStoppedSpeakingEvent=function(){var e=this;this.setHarkListenerIfNotExists(),!this.harkStoppedSpeakingEnabledOnce&&this.speechEvent&&(this.harkStoppedSpeakingEnabledOnce=!0,this.speechEvent.once("stopped_speaking",(function(){e.harkStoppedSpeakingEnabledOnce&&(e.session.emitEvent("publisherStopSpeaking",[new l.PublisherSpeakingEvent(e.session,"publisherStopSpeaking",e.connection,e.streamId)]),e.streamManager.emitEvent("publisherStopSpeaking",[new l.PublisherSpeakingEvent(e.streamManager,"publisherStopSpeaking",e.connection,e.streamId)])),e.disableHarkStoppedSpeakingEvent(!0)})))},e.prototype.disableHarkStoppedSpeakingEvent=function(e){if(this.speechEvent){if(this.harkStoppedSpeakingEnabledOnce=!1,e){if(this.harkStoppedSpeakingEnabled)return}else this.harkStoppedSpeakingEnabled=!1;this.harkVolumeChangeEnabled||this.harkVolumeChangeEnabledOnce||this.harkSpeakingEnabled||this.harkSpeakingEnabledOnce?this.speechEvent.off("stopped_speaking"):(this.speechEvent.stop(),delete this.speechEvent)}},e.prototype.enableHarkVolumeChangeEvent=function(e){var t=this;this.setHarkListenerIfNotExists()?this.harkVolumeChangeEnabled&&!e||(this.harkVolumeChangeEnabled=!0,this.speechEvent.on("volume_change",(function(e){var n=t.speechEvent.oldVolumeValue,i={newValue:e,oldValue:n};t.speechEvent.oldVolumeValue=e,t.streamManager.emitEvent("streamAudioVolumeChange",[new p.StreamManagerEvent(t.streamManager,"streamAudioVolumeChange",i)])}))):this.harkVolumeChangeEnabled=!0},e.prototype.enableOnceHarkVolumeChangeEvent=function(e){var t=this;this.setHarkListenerIfNotExists()?this.harkVolumeChangeEnabledOnce&&!e||(this.harkVolumeChangeEnabledOnce=!0,this.speechEvent.once("volume_change",(function(e){var n=t.speechEvent.oldVolumeValue,i={newValue:e,oldValue:n};t.speechEvent.oldVolumeValue=e,t.disableHarkVolumeChangeEvent(!0),t.streamManager.emitEvent("streamAudioVolumeChange",[new p.StreamManagerEvent(t.streamManager,"streamAudioVolumeChange",i)])}))):this.harkVolumeChangeEnabledOnce=!0},e.prototype.disableHarkVolumeChangeEvent=function(e){if(this.speechEvent){if(this.harkVolumeChangeEnabledOnce=!1,e){if(this.harkVolumeChangeEnabled)return}else this.harkVolumeChangeEnabled=!1;this.harkSpeakingEnabled||this.harkSpeakingEnabledOnce||this.harkStoppedSpeakingEnabled||this.harkStoppedSpeakingEnabledOnce?this.speechEvent.off("volume_change"):(this.speechEvent.stop(),delete this.speechEvent)}},e.prototype.isLocal=function(){return!this.inboundStreamOpts&&!!this.outboundStreamOpts},e.prototype.getSelectedIceCandidate=function(){var e=this;return new Promise((function(t,n){e.webRtcStats.getSelectedIceCandidateInfo().then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},e.prototype.getRemoteIceCandidateList=function(){return this.webRtcPeer.remoteCandidatesQueue},e.prototype.getLocalIceCandidateList=function(){return this.webRtcPeer.localCandidatesQueue},e.prototype.streamIceConnectionStateBroken=function(){if(!this.getWebRtcPeer()||!this.getRTCPeerConnection())return!1;if(this.isLocal()&&this.session.openvidu.advancedConfiguration.forceMediaReconnectionAfterNetworkDrop)return w.warn('OpenVidu Browser advanced configuration option "forceMediaReconnectionAfterNetworkDrop" is enabled. Stream '.concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") will force a reconnection")),!0;var e=this.getRTCPeerConnection().iceConnectionState;return"connected"!==e&&"completed"!==e},e.prototype.setHarkListenerIfNotExists=function(){if(this.mediaStream){if(!this.speechEvent){var e=this.harkOptions?this.harkOptions:this.session.openvidu.advancedConfiguration.publisherSpeakingEventsOptions||{};e.interval="number"===typeof e.interval?e.interval:100,e.threshold="number"===typeof e.threshold?e.threshold:-50,this.speechEvent=y(this.mediaStream,e)}return!0}return!1},e.prototype.setupReconnectionEventEmitter=function(e,t){return void 0==this.reconnectionEventEmitter?(this.reconnectionEventEmitter=new E,!1):(console.warn("Trying to reconnect stream ".concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") but an ongoing reconnection process is active. Waiting for response...")),this.reconnectionEventEmitter.once("success",(function(){return e()})),this.reconnectionEventEmitter.once("error",(function(e){return t(e)})),!0)},e.prototype.initWebRtcPeerSend=function(e){var t=this;return new Promise((function(n,i){var o;if(e){if(t.setupReconnectionEventEmitter(n,i))return}else t.initHarkEvents();var r=function(){var i;return e&&(null===(i=t.reconnectionEventEmitter)||void 0===i||i.emitEvent("success"),delete t.reconnectionEventEmitter),n()},s=function(n){var o;return e&&(null===(o=t.reconnectionEventEmitter)||void 0===o||o.emitEvent("error",[n]),delete t.reconnectionEventEmitter),i(n)},a=function(n){w.debug("Sending SDP offer to publish as "+t.streamId,n);var i,o=e?"reconnectStream":"publishVideo";if(e)i={stream:t.streamId,sdpString:n};else{var a=void 0;t.isSendVideo()&&(a="undefined"!==typeof MediaStreamTrack&&t.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack?m.TypeOfVideo.CUSTOM:t.isSendScreen()?m.TypeOfVideo.SCREEN:m.TypeOfVideo.CAMERA),i={doLoopback:t.displayMyRemote()||!1,hasAudio:t.isSendAudio(),hasVideo:t.isSendVideo(),audioActive:t.audioActive,videoActive:t.videoActive,typeOfVideo:a,frameRate:t.frameRate?t.frameRate:-1,videoDimensions:JSON.stringify(t.videoDimensions),filter:t.outboundStreamOpts.publisherProperties.filter,sdpOffer:n}}t.session.openvidu.sendRequest(o,i,(function(n,i){n?401===n.code?s(new f.OpenViduError(f.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to publish")):s("Error on publishVideo: "+JSON.stringify(n)):t.webRtcPeer.processRemoteAnswer(i.sdpAnswer).then((function(){t.streamId=i.id,t.creationTime=i.createdAt,t.isLocalStreamPublished=!0,t.publishedOnce=!0,t.displayMyRemote()&&(t.localMediaStreamWhenSubscribedToRemote=t.mediaStream,t.remotePeerSuccessfullyEstablished(e)),e?t.ee.emitEvent("stream-reconnected-by-publisher",[]):t.ee.emitEvent("stream-created-by-publisher",[]),t.initWebRtcStats(),w.info("'Publisher' ("+t.streamId+") successfully "+(e?"reconnected":"published")+" to session"),r()})).catch((function(e){s(e)}))}))},d={mediaConstraints:{audio:t.hasAudio,video:t.hasVideo},simulcast:null!==(o=t.outboundStreamOpts.publisherProperties.videoSimulcast)&&void 0!==o?o:t.session.openvidu.videoSimulcast,onIceCandidate:t.connection.sendIceCandidate.bind(t.connection),onIceConnectionStateException:function(e,n,i){t.session.emitEvent("exception",[new u.ExceptionEvent(t.session,e,t,n,i)])},iceServers:t.getIceServersConf(),mediaStream:t.mediaStream,mediaServer:t.session.openvidu.mediaServer,typeOfVideo:t.typeOfVideo?m.TypeOfVideo[t.typeOfVideo]:void 0};"mediasoup"!==t.session.openvidu.mediaServer&&(d.simulcast=!1),e&&t.disposeWebRtcPeer(),t.displayMyRemote()?t.webRtcPeer=new c.WebRtcPeerSendrecv(d):t.webRtcPeer=new c.WebRtcPeerSendonly(d),t.webRtcPeer.addIceConnectionStateChangeListener("publisher of "+t.connection.connectionId),t.webRtcPeer.createOffer().then((function(e){t.webRtcPeer.processLocalOffer(e).then((function(){a(e.sdp)})).catch((function(e){s(new Error("(publish) SDP process local offer error: "+JSON.stringify(e)))}))})).catch((function(e){s(new Error("(publish) SDP create offer error: "+JSON.stringify(e)))}))}))},e.prototype.finalResolveForSubscription=function(e,t){var n;return w.info("'Subscriber' ("+this.streamId+") successfully "+(e?"reconnected":"subscribed")),this.remotePeerSuccessfullyEstablished(e),this.initWebRtcStats(),e&&(null===(n=this.reconnectionEventEmitter)||void 0===n||n.emitEvent("success"),delete this.reconnectionEventEmitter),t()},e.prototype.finalRejectForSubscription=function(e,t,n){var i;return w.error("Error for 'Subscriber' ("+this.streamId+") while trying to "+(e?"reconnect":"subscribe")+": "+t.toString()),e&&(null===(i=this.reconnectionEventEmitter)||void 0===i||i.emitEvent("error",[t]),delete this.reconnectionEventEmitter),n(t)},e.prototype.initWebRtcPeerReceive=function(e){var t=this;return new Promise((function(n,i){e&&t.setupReconnectionEventEmitter(n,i)||("mediasoup"===t.session.openvidu.mediaServer?t.initWebRtcPeerReceiveFromServer(e).then((function(){return t.finalResolveForSubscription(e,n)})).catch((function(n){return t.finalRejectForSubscription(e,n,i)})):t.initWebRtcPeerReceiveFromClient(e).then((function(){return t.finalResolveForSubscription(e,n)})).catch((function(n){return t.finalRejectForSubscription(e,n,i)})))}))},e.prototype.initWebRtcPeerReceiveFromClient=function(e){var t=this;return new Promise((function(n,i){t.completeWebRtcPeerReceive(e,!1).then((function(e){t.webRtcPeer.processRemoteAnswer(e.sdpAnswer).then((function(){return n()})).catch((function(e){return i(e)}))})).catch((function(e){return i(e)}))}))},e.prototype.initWebRtcPeerReceiveFromServer=function(e){var t=this;return new Promise((function(n,i){t.session.openvidu.sendRequest("prepareReceiveVideoFrom",{sender:t.streamId,reconnect:e},(function(o,r){if(o)return i(new Error("Error on prepareReceiveVideoFrom: "+JSON.stringify(o)));t.completeWebRtcPeerReceive(e,!1,r.sdpOffer).then((function(){return n()})).catch((function(e){return i(e)}))}))}))},e.prototype.completeWebRtcPeerReceive=function(e,t,n){var i=this;return new Promise((function(o,r){w.debug("'Session.subscribe(Stream)' called");var s=function(s){w.debug("Sending local SDP ".concat(n?"answer":"offer"," to subscribe to ").concat(i.streamId),s);var a=e?"reconnectStream":"receiveVideoFrom",c={};c[e?"stream":"sender"]=i.streamId,n?c[e?"sdpString":"sdpAnswer"]=s:c["sdpOffer"]=s,e&&(c["forciblyReconnect"]=t),i.session.openvidu.sendRequest(a,c,(function(e,t){return e?r(new Error("Error on "+a+" : "+JSON.stringify(e))):o(t)}))},a={mediaConstraints:{audio:i.hasAudio,video:i.hasVideo},simulcast:!1,onIceCandidate:i.connection.sendIceCandidate.bind(i.connection),onIceConnectionStateException:function(e,t,n){i.session.emitEvent("exception",[new u.ExceptionEvent(i.session,e,i,t,n)])},iceServers:i.getIceServersConf(),mediaServer:i.session.openvidu.mediaServer,typeOfVideo:i.typeOfVideo?m.TypeOfVideo[i.typeOfVideo]:void 0};e&&i.disposeWebRtcPeer(),i.webRtcPeer=new c.WebRtcPeerRecvonly(a),i.webRtcPeer.addIceConnectionStateChangeListener(i.streamId),n?i.webRtcPeer.processRemoteOffer(n).then((function(){i.webRtcPeer.createAnswer().then((function(e){i.webRtcPeer.processLocalAnswer(e).then((function(){s(e.sdp)})).catch((function(e){return r(new Error("(subscribe) SDP process local answer error: "+JSON.stringify(e)))}))})).catch((function(e){return r(new Error("(subscribe) SDP create answer error: "+JSON.stringify(e)))}))})).catch((function(e){return r(new Error("(subscribe) SDP process remote offer error: "+JSON.stringify(e)))})):i.webRtcPeer.createOffer().then((function(e){i.webRtcPeer.processLocalOffer(e).then((function(){s(e.sdp)})).catch((function(e){return r(new Error("(subscribe) SDP process local offer error: "+JSON.stringify(e)))}))})).catch((function(e){return r(new Error("(subscribe) SDP create offer error: "+JSON.stringify(e)))}))}))},e.prototype.remotePeerSuccessfullyEstablished=function(e){var t;e&&null!=this.mediaStream&&this.disposeMediaStream(),this.mediaStream=new MediaStream;for(var n=0,i=this.webRtcPeer.pc.getReceivers();n<i.length;n++)t=i[n],t.track&&this.mediaStream.addTrack(t.track);if(w.debug("Peer remote stream",this.mediaStream),this.mediaStream){if(this.streamManager instanceof a.Subscriber){if(this.mediaStream.getAudioTracks()[0]){var o=e?this.audioActive:!!this.streamManager.properties.subscribeToAudio;this.mediaStream.getAudioTracks()[0].enabled=o}if(this.mediaStream.getVideoTracks()[0]){o=e?this.videoActive:!!this.streamManager.properties.subscribeToVideo;this.mediaStream.getVideoTracks()[0].enabled=o}}this.updateMediaStreamInVideos(),this.initHarkEvents()}},e.prototype.initHarkEvents=function(){this.mediaStream.getAudioTracks()[0]&&(this.session.anySpeechEventListenerEnabled("publisherStartSpeaking",!0,this.streamManager)&&this.enableOnceHarkSpeakingEvent(),this.session.anySpeechEventListenerEnabled("publisherStartSpeaking",!1,this.streamManager)&&this.enableHarkSpeakingEvent(),this.session.anySpeechEventListenerEnabled("publisherStopSpeaking",!0,this.streamManager)&&this.enableOnceHarkStoppedSpeakingEvent(),this.session.anySpeechEventListenerEnabled("publisherStopSpeaking",!1,this.streamManager)&&this.enableHarkStoppedSpeakingEvent(),this.harkVolumeChangeEnabledOnce&&this.enableOnceHarkVolumeChangeEvent(!0),this.harkVolumeChangeEnabled&&this.enableHarkVolumeChangeEvent(!0))},e.prototype.onIceConnectionStateExceptionHandler=function(e,t,n){switch(e){case u.ExceptionEventName.ICE_CONNECTION_FAILED:this.onIceConnectionFailed();break;case u.ExceptionEventName.ICE_CONNECTION_DISCONNECTED:this.onIceConnectionDisconnected();break}this.session.emitEvent("exception",[new u.ExceptionEvent(this.session,e,this,t,n)])},e.prototype.onIceConnectionFailed=function(){w.log("[ICE_CONNECTION_FAILED] Handling ICE_CONNECTION_FAILED event. Reconnecting stream ".concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",")")),this.reconnectStreamAndLogResultingIceConnectionState(u.ExceptionEventName.ICE_CONNECTION_FAILED)},e.prototype.onIceConnectionDisconnected=function(){var e=this;w.log("[ICE_CONNECTION_DISCONNECTED] Handling ICE_CONNECTION_DISCONNECTED event. Waiting for ICE to be restored and reconnect stream ".concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") if not possible"));var t=this.session.openvidu.advancedConfiguration.iceConnectionDisconnectedExceptionTimeout||4e3;this.awaitWebRtcPeerConnectionState(t).then((function(n){switch(n){case"failed":w.warn("[ICE_CONNECTION_DISCONNECTED] ICE connection of stream ".concat(e.streamId," (").concat(e.isLocal()?"Publisher":"Subscriber",") is now failed after ICE_CONNECTION_DISCONNECTED"));break;case"connected":case"completed":w.log("[ICE_CONNECTION_DISCONNECTED] ICE connection of stream ".concat(e.streamId," (").concat(e.isLocal()?"Publisher":"Subscriber",") automatically restored after ICE_CONNECTION_DISCONNECTED. Current ICE connection state: ").concat(n));break;case"closed":case"checking":case"new":case"disconnected":w.warn("[ICE_CONNECTION_DISCONNECTED] ICE connection of stream ".concat(e.streamId," (").concat(e.isLocal()?"Publisher":"Subscriber",") couldn't be restored after ICE_CONNECTION_DISCONNECTED event. Current ICE connection state after ").concat(t," ms: ").concat(n)),e.reconnectStreamAndLogResultingIceConnectionState(u.ExceptionEventName.ICE_CONNECTION_DISCONNECTED);break}}))},e.prototype.reconnectStreamAndLogResultingIceConnectionState=function(e){return i(this,void 0,void 0,(function(){var t,n;return o(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.reconnectStreamAndReturnIceConnectionState(e)];case 1:switch(t=i.sent(),t){case"connected":case"completed":w.log("[".concat(e,"] Stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") successfully reconnected after ").concat(e,". Current ICE connection state: ").concat(t));break;default:w.error("[".concat(e,"] Stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") failed to reconnect after ").concat(e,". Current ICE connection state: ").concat(t));break}return[3,3];case 2:return n=i.sent(),w.error("[".concat(e,"] Error reconnecting stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") after ").concat(e,": ").concat(n)),[3,3];case 3:return[2]}}))}))},e.prototype.reconnectStreamAndReturnIceConnectionState=function(e){return i(this,void 0,void 0,(function(){var t,n;return o(this,(function(i){switch(i.label){case 0:w.log("[".concat(e,"] Reconnecting stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") after event ").concat(e)),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.reconnectStream(e)];case 2:return i.sent(),t=this.session.openvidu.advancedConfiguration.iceConnectionDisconnectedExceptionTimeout||4e3,[2,this.awaitWebRtcPeerConnectionState(t)];case 3:return n=i.sent(),w.warn("[".concat(e,"] Error reconnecting stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber","). Reason: ").concat(n)),[2,this.awaitWebRtcPeerConnectionState(1)];case 4:return[2]}}))}))},e.prototype.reconnectStream=function(e){return i(this,void 0,void 0,(function(){var t,n;return o(this,(function(i){switch(i.label){case 0:return[4,this.isWebsocketConnected(e,3e3)];case 1:if(t=i.sent(),t)return w.log("[".concat(e,"] Trying to reconnect stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") and the websocket is opened")),this.isLocal()?[2,this.initWebRtcPeerSend(!0)]:[2,this.initWebRtcPeerReceive(!0)];throw n="[".concat(e,"] Trying to reconnect stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") but the websocket wasn't opened"),w.error(n),Error(n)}}))}))},e.prototype.isWebsocketConnected=function(e,t){var n=this;return new Promise((function(i,o){var r=n.session.openvidu.getWsReadyState();if(1!==r)return console.warn("[".concat(e,"] Websocket readyState is ").concat(r)),i(!1);var s=setTimeout((function(){return console.warn("[".concat(e,"] Websocket timeout of ").concat(t,"ms")),i(!1)}),t);n.session.openvidu.sendRequest("echo",{},(function(t,n){return clearTimeout(s),t?(console.warn("[".concat(e,"] Websocket 'echo' returned error: ").concat(t)),i(!1)):i(!0)}))}))},e.prototype.awaitWebRtcPeerConnectionState=function(e){return i(this,void 0,void 0,(function(){var t,n,i,r;return o(this,(function(o){switch(o.label){case 0:t=this.getRTCPeerConnection().iceConnectionState,n=150,i=Math.ceil(e/n),r=0,o.label=1;case 1:return r<i?(t=this.getRTCPeerConnection().iceConnectionState,"connected"===t||"completed"===t?[3,4]:[4,new Promise((function(e){return setTimeout(e,n)}))]):[3,4];case 2:o.sent(),o.label=3;case 3:return r++,[3,1];case 4:return[2,t]}}))}))},e.prototype.initWebRtcStats=function(){this.webRtcStats=new d.WebRtcStats(this),this.webRtcStats.initWebRtcStats()},e.prototype.stopWebRtcStats=function(){this.webRtcStats&&this.webRtcStats.isEnabled()&&this.webRtcStats.stopWebRtcStats()},e.prototype.getIceServersConf=function(){var e;return e=this.session.openvidu.advancedConfiguration.iceServers?"freeice"===this.session.openvidu.advancedConfiguration.iceServers?void 0:this.session.openvidu.advancedConfiguration.iceServers:this.session.openvidu.iceServers?this.session.openvidu.iceServers:void 0,e},e.prototype.gatherStatsForPeer=function(){var e=this;return new Promise((function(t,n){e.isLocal()?e.getRTCPeerConnection().getSenders().forEach((function(t){return t.getStats().then((function(t){t.forEach((function(t){if(e.isReportWanted(t)){var n={};n["type"]=t.type,n["timestamp"]=t.timestamp,n["id"]=t.id,"outbound-rtp"===t.type&&(n["ssrc"]=t.ssrc,n["firCount"]=t.firCount,n["pliCount"]=t.pliCount,n["nackCount"]=t.nackCount,n["qpSum"]=t.qpSum,t.kind?n["mediaType"]=t.kind:t.mediaType?n["mediaType"]=t.mediaType:n["mediaType"]=-1!==t.id.indexOf("VideoStream")?"video":"audio","video"===n["mediaType"]&&(n["framesEncoded"]=t.framesEncoded),n["packetsSent"]=t.packetsSent,n["bytesSent"]=t.bytesSent),"candidate-pair"===t.type&&void 0!==t.totalRoundTripTime&&(n["availableOutgoingBitrate"]=t.availableOutgoingBitrate,n["rtt"]=t.currentRoundTripTime,n["averageRtt"]=t.totalRoundTripTime/t.responsesReceived),"remote-inbound-rtp"===t.type||t.type,w.log(n)}}))}))})):e.getRTCPeerConnection().getReceivers().forEach((function(t){return t.getStats().then((function(t){t.forEach((function(t){if(e.isReportWanted(t)){var n={};n["type"]=t.type,n["timestamp"]=t.timestamp,n["id"]=t.id,"inbound-rtp"===t.type&&(n["ssrc"]=t.ssrc,n["firCount"]=t.firCount,n["pliCount"]=t.pliCount,n["nackCount"]=t.nackCount,n["qpSum"]=t.qpSum,t.kind?n["mediaType"]=t.kind:t.mediaType?n["mediaType"]=t.mediaType:n["mediaType"]=-1!==t.id.indexOf("VideoStream")?"video":"audio","video"===n["mediaType"]&&(n["framesDecoded"]=t.framesDecoded),n["packetsReceived"]=t.packetsReceived,n["packetsLost"]=t.packetsLost,n["jitter"]=t.jitter,n["bytesReceived"]=t.bytesReceived),"candidate-pair"===t.type&&void 0!==t.totalRoundTripTime&&(n["availableIncomingBitrate"]=t.availableIncomingBitrate,n["rtt"]=t.currentRoundTripTime,n["averageRtt"]=t.totalRoundTripTime/t.responsesReceived),"remote-inbound-rtp"===t.type||t.type,w.log(n)}}))}))}))}))},e.prototype.isReportWanted=function(e){return"inbound-rtp"===e.type&&!this.isLocal()||"outbound-rtp"===e.type&&this.isLocal()||"candidate-pair"===e.type&&e.nominated&&e.bytesSent>0},e}();t.Stream=S},6978:function(e,t,n){"use strict";n(1703);var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.StreamManager=void 0;var o,r=n(3481),s=n(4600),a=n(6850),c=n(1092),d=n(4713),u=n(4111),l=n(5159),p=u.OpenViduLogger.getInstance(),h=function(e){function t(t,n){var i=e.call(this)||this;if(i.videos=[],i.lazyLaunchVideoElementCreatedEvent=!1,o=l.PlatformUtils.getInstance(),i.stream=t,i.stream.streamManager=i,i.remote=!i.stream.isLocal(),n){var r=void 0;"string"===typeof n?r=document.getElementById(n):n instanceof HTMLElement&&(r=n),r&&(i.firstVideoElement={targetElement:r,video:document.createElement("video"),id:"",canplayListenerAdded:!1},(o.isSafariBrowser()||o.isIPhoneOrIPad()&&(o.isChromeMobileBrowser()||o.isEdgeMobileBrowser()||o.isOperaMobileBrowser()||o.isFirefoxMobileBrowser()))&&i.firstVideoElement.video.setAttribute("playsinline","true"),i.targetElement=r,i.element=r)}return i.canPlayListener=function(){i.deactivateStreamPlayingEventExceptionTimeout(),i.ee.emitEvent("streamPlaying",[new s.StreamManagerEvent(i,"streamPlaying",void 0)])},i}return i(t,e),t.prototype.on=function(t,n){return e.prototype.onAux.call(this,t,"Event '"+t+"' triggered by '"+(this.remote?"Subscriber":"Publisher")+"'",n),"videoElementCreated"===t&&this.stream&&this.lazyLaunchVideoElementCreatedEvent&&(this.ee.emitEvent("videoElementCreated",[new a.VideoElementEvent(this.videos[0].video,this,"videoElementCreated")]),this.lazyLaunchVideoElementCreatedEvent=!1),"streamPlaying"===t&&this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&!1===this.videos[0].video.paused&&!1===this.videos[0].video.ended&&4===this.videos[0].video.readyState&&this.ee.emitEvent("streamPlaying",[new s.StreamManagerEvent(this,"streamPlaying",void 0)]),this.stream.hasAudio&&("publisherStartSpeaking"===t&&this.stream.enableHarkSpeakingEvent(),"publisherStopSpeaking"===t&&this.stream.enableHarkStoppedSpeakingEvent(),"streamAudioVolumeChange"===t&&this.stream.enableHarkVolumeChangeEvent(!1)),this},t.prototype.once=function(t,n){return e.prototype.onceAux.call(this,t,"Event '"+t+"' triggered once by '"+(this.remote?"Subscriber":"Publisher")+"'",n),"videoElementCreated"===t&&this.stream&&this.lazyLaunchVideoElementCreatedEvent&&this.ee.emitEvent("videoElementCreated",[new a.VideoElementEvent(this.videos[0].video,this,"videoElementCreated")]),"streamPlaying"===t&&this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&!1===this.videos[0].video.paused&&!1===this.videos[0].video.ended&&4===this.videos[0].video.readyState&&this.ee.emitEvent("streamPlaying",[new s.StreamManagerEvent(this,"streamPlaying",void 0)]),this.stream.hasAudio&&("publisherStartSpeaking"===t&&this.stream.enableOnceHarkSpeakingEvent(),"publisherStopSpeaking"===t&&this.stream.enableOnceHarkStoppedSpeakingEvent(),"streamAudioVolumeChange"===t&&this.stream.enableOnceHarkVolumeChangeEvent(!1)),this},t.prototype.off=function(t,n){if(e.prototype.offAux.call(this,t,n),"publisherStartSpeaking"===t){var i=this.ee.getListeners(t).length+this.stream.session.ee.getListeners(t).length;0===i&&this.stream.disableHarkSpeakingEvent(!1)}if("publisherStopSpeaking"===t){var o=this.ee.getListeners(t).length+this.stream.session.ee.getListeners(t).length;0===o&&this.stream.disableHarkStoppedSpeakingEvent(!1)}if("streamAudioVolumeChange"===t){var r=this.ee.getListeners(t).length;0===r&&this.stream.disableHarkVolumeChangeEvent(!1)}return this},t.prototype.addVideoElement=function(e){this.initializeVideoProperties(e),!this.remote&&this.stream.displayMyRemote()&&e.srcObject!==this.stream.getMediaStream()&&(e.srcObject=this.stream.getMediaStream());for(var t=0,n=this.videos;t<n.length;t++){var i=n[t];if(i.video===e)return 0}for(var o=1,r=0,s=this.stream.session.streamManagers;r<s.length;r++){var a=s[r];if(a.disassociateVideo(e)){o=-1;break}}return this.stream.session.streamManagers.forEach((function(t){t.disassociateVideo(e)})),this.pushNewStreamManagerVideo({video:e,id:e.id,canplayListenerAdded:!1}),p.info("New video element associated to ",this),o},t.prototype.createVideoElement=function(e,t){var n;if("string"===typeof e){if(n=document.getElementById(e),!n)throw new Error("The provided 'targetElement' couldn't be resolved to any HTML element: "+e)}else{if(!(e instanceof HTMLElement))throw new Error("The provided 'targetElement' couldn't be resolved to any HTML element: "+e);n=e}var i=this.createVideo();this.initializeVideoProperties(i);var o=t||d.VideoInsertMode.APPEND;switch(o){case d.VideoInsertMode.AFTER:n.parentNode.insertBefore(i,n.nextSibling);break;case d.VideoInsertMode.APPEND:n.appendChild(i);break;case d.VideoInsertMode.BEFORE:n.parentNode.insertBefore(i,n);break;case d.VideoInsertMode.PREPEND:n.insertBefore(i,n.childNodes[0]);break;case d.VideoInsertMode.REPLACE:n.parentNode.replaceChild(i,n);break;default:o=d.VideoInsertMode.APPEND,n.appendChild(i);break}var r={targetElement:n,video:i,insertMode:o,id:i.id,canplayListenerAdded:!1};return this.pushNewStreamManagerVideo(r),this.ee.emitEvent("videoElementCreated",[new a.VideoElementEvent(r.video,this,"videoElementCreated")]),this.lazyLaunchVideoElementCreatedEvent=!!this.firstVideoElement,i},t.prototype.updatePublisherSpeakingEventsOptions=function(e){var t=this.stream.harkOptions?this.stream.harkOptions:this.stream.session.openvidu.advancedConfiguration.publisherSpeakingEventsOptions||{},n="number"===typeof e.interval?e.interval:"number"===typeof t.interval?t.interval:100,i="number"===typeof e.threshold?e.threshold:"number"===typeof t.threshold?t.threshold:-50;this.stream.harkOptions={interval:n,threshold:i},this.stream.speechEvent&&(this.stream.speechEvent.setInterval(n),this.stream.speechEvent.setThreshold(i))},t.prototype.initializeVideoProperties=function(e){!this.remote&&this.stream.displayMyRemote()||e.srcObject!==this.stream.getMediaStream()&&(e.srcObject=this.stream.getMediaStream()),e.autoplay=!0,e.controls=!1,(o.isSafariBrowser()||o.isIPhoneOrIPad()&&(o.isChromeMobileBrowser()||o.isEdgeMobileBrowser()||o.isOperaMobileBrowser()||o.isFirefoxMobileBrowser()))&&e.setAttribute("playsinline","true"),e.id||(e.id=(this.remote?"remote-":"local-")+"video-"+this.stream.streamId,!this.id&&this.targetElement&&(this.id=e.id)),this.remote&&this.isMirroredVideo(e)?this.removeMirrorVideo(e):this.remote||this.stream.displayMyRemote()||(e.muted=!0,this.isMirroredVideo(e)&&!this.stream.outboundStreamOpts.publisherProperties.mirror?this.removeMirrorVideo(e):this.stream.outboundStreamOpts.publisherProperties.mirror&&!this.stream.isSendScreen()&&this.mirrorVideo(e))},t.prototype.removeAllVideos=function(){for(var e=this,t=this.stream.session.streamManagers.length-1;t>=0;--t)this.stream.session.streamManagers[t]===this&&this.stream.session.streamManagers.splice(t,1);this.videos.forEach((function(t){t.video&&t.video.removeEventListener&&t.video.removeEventListener("canplay",e.canPlayListener),t.canplayListenerAdded=!1,t.targetElement&&(t.video.parentNode.removeChild(t.video),e.ee.emitEvent("videoElementDestroyed",[new a.VideoElementEvent(t.video,e,"videoElementDestroyed")])),e.removeSrcObject(t),e.videos.filter((function(e){return!e.targetElement}))}))},t.prototype.disassociateVideo=function(e){for(var t=!1,n=0;n<this.videos.length;n++)if(this.videos[n].video===e){this.videos[n].video.removeEventListener("canplay",this.canPlayListener),this.videos.splice(n,1),t=!0,p.info("Video element disassociated from ",this);break}return t},t.prototype.addPlayEventToFirstVideo=function(){this.videos[0]&&this.videos[0].video&&!this.videos[0].canplayListenerAdded&&(this.activateStreamPlayingEventExceptionTimeout(),this.videos[0].video.addEventListener("canplay",this.canPlayListener),this.videos[0].canplayListenerAdded=!0)},t.prototype.updateMediaStream=function(e){this.videos.forEach((function(t){if(t.video.srcObject=e,o.isIonicIos()){var n=t.video.parentElement,i=t.video;n.replaceChild(i,t.video),t.video=i}}))},t.prototype.emitEvent=function(e,t){this.ee.emitEvent(e,t)},t.prototype.createVideo=function(){return document.createElement("video")},t.prototype.removeSrcObject=function(e){e.video.srcObject=null,this.deactivateStreamPlayingEventExceptionTimeout()},t.prototype.pushNewStreamManagerVideo=function(e){this.videos.push(e),this.addPlayEventToFirstVideo(),-1===this.stream.session.streamManagers.indexOf(this)&&this.stream.session.streamManagers.push(this)},t.prototype.mirrorVideo=function(e){o.isIonicIos()||(e.style.transform="rotateY(180deg)",e.style.webkitTransform="rotateY(180deg)")},t.prototype.removeMirrorVideo=function(e){e.style.transform="unset",e.style.webkitTransform="unset"},t.prototype.isMirroredVideo=function(e){return"rotateY(180deg)"===e.style.transform||"rotateY(180deg)"===e.style.webkitTransform},t.prototype.activateStreamPlayingEventExceptionTimeout=function(){var e=this;if(this.remote&&null==this.streamPlayingEventExceptionTimeout){var t=this.stream.session.openvidu.advancedConfiguration.noStreamPlayingEventExceptionTimeout||4e3;this.streamPlayingEventExceptionTimeout=setTimeout((function(){var n="StreamManager of Stream "+e.stream.streamId+" ("+(e.remote?"Subscriber":"Publisher")+') did not trigger "streamPlaying" event in '+t+" ms";p.warn(n),e.stream.session.emitEvent("exception",[new c.ExceptionEvent(e.stream.session,c.ExceptionEventName.NO_STREAM_PLAYING_EVENT,e,n)]),delete e.streamPlayingEventExceptionTimeout}),t)}},t.prototype.deactivateStreamPlayingEventExceptionTimeout=function(){clearTimeout(this.streamPlayingEventExceptionTimeout),delete this.streamPlayingEventExceptionTimeout},t}(r.EventDispatcher);t.StreamManager=h},727:function(e,t,n){"use strict";n(1703);var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__awaiter||function(e,t,n,i){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i["throw"](e))}catch(t){r(t)}}function c(e){e.done?n(e.value):o(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return c([e,t])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,i&&(o=2&r[0]?i["return"]:r[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Subscriber=void 0;var s=n(6978),a=n(4111),c=a.OpenViduLogger.getInstance(),d=function(e){function t(t,n,i){var o=e.call(this,t,n)||this;return o.element=o.targetElement,o.stream=t,o.properties=i,o}return i(t,e),t.prototype.subscribeToAudio=function(e){return this.stream.getMediaStream().getAudioTracks().forEach((function(t){t.enabled=e})),this.stream.audioActive=e,c.info("'Subscriber' has "+(e?"subscribed to":"unsubscribed from")+" its audio stream"),this},t.prototype.subscribeToVideo=function(e){return this.stream.getMediaStream().getVideoTracks().forEach((function(t){t.enabled=e})),this.stream.videoActive=e,c.info("'Subscriber' has "+(e?"subscribed to":"unsubscribed from")+" its video stream"),this},t.prototype.replaceTrackInMediaStream=function(e,t){return o(this,void 0,void 0,(function(){var n,i;return r(this,(function(o){return n=this.stream.getMediaStream(),"video"===e.kind?(i=n.getVideoTracks()[0],t&&(this.stream.lastVideoTrackConstraints=e.getConstraints())):i=n.getAudioTracks()[0],n.removeTrack(i),i.stop(),n.addTrack(e),[2]}))}))},t}(s.StreamManager);t.Subscriber=d},9801:function(e,t,n){"use strict";t.Dn=void 0;var i=n(3322),o=n(4765);Object.defineProperty(t,"Dn",{enumerable:!0,get:function(){return o.OpenVidu}});var r=n(2171);var s=n(2398);var a=n(727);var c=n(6978);var d=n(5279);var u=n(3527);var l=n(7057);var p=n(1627);var h=n(4257);var f=n(3018);var m=n(4477);var v=n(4713);var g=n(7763);var b=n(9758);var y=n(7733);var E=n(6570);var w=n(5142);var S=n(4855);var O=n(1835);var I=n(4600);var C=n(6850);var R=n(4226);var k=n(7849);var _=n(2876);var x=n(2895);var N=n(1092);var P=n(3481);i.JL.setOptions({enabled:!1})},3427:function(e,t,n){"use strict";function i(){this._types=Object.create(null),this._extensions=Object.create(null);for(let e=0;e<arguments.length;e++)this.define(arguments[e]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}n(1703),i.prototype.define=function(e,t){for(let n in e){let i=e[n].map((function(e){return e.toLowerCase()}));n=n.toLowerCase();for(let e=0;e<i.length;e++){const o=i[e];if("*"!==o[0]){if(!t&&o in this._types)throw new Error('Attempt to change mapping for "'+o+'" extension from "'+this._types[o]+'" to "'+n+'". Pass `force=true` to allow this, otherwise remove "'+o+'" from the list of extensions for "'+n+'".');this._types[o]=n}}if(t||!this._extensions[n]){const e=i[0];this._extensions[n]="*"!==e[0]?e:e.substr(1)}}},i.prototype.getType=function(e){e=String(e);let t=e.replace(/^.*[/\\]/,"").toLowerCase(),n=t.replace(/^.*\./,"").toLowerCase(),i=t.length<e.length,o=n.length<t.length-1;return(o||!i)&&this._types[n]||null},i.prototype.getExtension=function(e){return e=/^\s*([^;\s]*)/.test(e)&&RegExp.$1,e&&this._extensions[e.toLowerCase()]||null},e.exports=i},407:function(e,t,n){"use strict";let i=n(3427);e.exports=new i(n(225))},225:function(e){e.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}},4212:function(e,t,n){n(1703);const i=n(8709),{MAX_LENGTH:o,MAX_SAFE_INTEGER:r}=n(1954),{re:s,t:a}=n(9447),c=n(6600),{compareIdentifiers:d}=n(2390);class u{constructor(e,t){if(t=c(t),e instanceof u){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!==typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>o)throw new TypeError(`version is longer than ${o} characters`);i("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?s[a.LOOSE]:s[a.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(i("SemVer.compare",this.version,this.options,e),!(e instanceof u)){if("string"===typeof e&&e===this.version)return 0;e=new u(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof u||(e=new u(e,this.options)),d(this.major,e.major)||d(this.minor,e.minor)||d(this.patch,e.patch)}comparePre(e){if(e instanceof u||(e=new u(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],o=e.prerelease[t];if(i("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return d(n,o)}while(++t)}compareBuild(e){e instanceof u||(e=new u(e,this.options));let t=0;do{const n=this.build[t],o=e.build[t];if(i("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return d(n,o)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;while(--e>=0)"number"===typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=u},9209:function(e,t,n){const i=n(4212),o=(e,t)=>new i(e,t).major;e.exports=o},5466:function(e,t,n){const i=n(4212),o=(e,t)=>new i(e,t).minor;e.exports=o},1954:function(e){const t="2.0.0",n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=16;e.exports={SEMVER_SPEC_VERSION:t,MAX_LENGTH:n,MAX_SAFE_INTEGER:i,MAX_SAFE_COMPONENT_LENGTH:o}},8709:function(e){const t="object"===typeof process&&{NODE_ENV:"production",BASE_URL:"/"}.NODE_DEBUG&&/\bsemver\b/i.test({NODE_ENV:"production",BASE_URL:"/"}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},2390:function(e){const t=/^[0-9]+$/,n=(e,n)=>{const i=t.test(e),o=t.test(n);return i&&o&&(e=+e,n=+n),e===n?0:i&&!o?-1:o&&!i?1:e<n?-1:1},i=(e,t)=>n(t,e);e.exports={compareIdentifiers:n,rcompareIdentifiers:i}},6600:function(e){const t=["includePrerelease","loose","rtl"],n=e=>e?"object"!==typeof e?{loose:!0}:t.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{};e.exports=n},9447:function(e,t,n){const{MAX_SAFE_COMPONENT_LENGTH:i}=n(1954),o=n(8709);t=e.exports={};const r=t.re=[],s=t.src=[],a=t.t={};let c=0;const d=(e,t,n)=>{const i=c++;o(i,t),a[e]=i,s[i]=t,r[i]=new RegExp(t,n?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","[0-9]+"),d("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),d("MAINVERSION",`(${s[a.NUMERICIDENTIFIER]})\\.(${s[a.NUMERICIDENTIFIER]})\\.(${s[a.NUMERICIDENTIFIER]})`),d("MAINVERSIONLOOSE",`(${s[a.NUMERICIDENTIFIERLOOSE]})\\.(${s[a.NUMERICIDENTIFIERLOOSE]})\\.(${s[a.NUMERICIDENTIFIERLOOSE]})`),d("PRERELEASEIDENTIFIER",`(?:${s[a.NUMERICIDENTIFIER]}|${s[a.NONNUMERICIDENTIFIER]})`),d("PRERELEASEIDENTIFIERLOOSE",`(?:${s[a.NUMERICIDENTIFIERLOOSE]}|${s[a.NONNUMERICIDENTIFIER]})`),d("PRERELEASE",`(?:-(${s[a.PRERELEASEIDENTIFIER]}(?:\\.${s[a.PRERELEASEIDENTIFIER]})*))`),d("PRERELEASELOOSE",`(?:-?(${s[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[a.PRERELEASEIDENTIFIERLOOSE]})*))`),d("BUILDIDENTIFIER","[0-9A-Za-z-]+"),d("BUILD",`(?:\\+(${s[a.BUILDIDENTIFIER]}(?:\\.${s[a.BUILDIDENTIFIER]})*))`),d("FULLPLAIN",`v?${s[a.MAINVERSION]}${s[a.PRERELEASE]}?${s[a.BUILD]}?`),d("FULL",`^${s[a.FULLPLAIN]}$`),d("LOOSEPLAIN",`[v=\\s]*${s[a.MAINVERSIONLOOSE]}${s[a.PRERELEASELOOSE]}?${s[a.BUILD]}?`),d("LOOSE",`^${s[a.LOOSEPLAIN]}$`),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE",`${s[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),d("XRANGEIDENTIFIER",`${s[a.NUMERICIDENTIFIER]}|x|X|\\*`),d("XRANGEPLAIN",`[v=\\s]*(${s[a.XRANGEIDENTIFIER]})(?:\\.(${s[a.XRANGEIDENTIFIER]})(?:\\.(${s[a.XRANGEIDENTIFIER]})(?:${s[a.PRERELEASE]})?${s[a.BUILD]}?)?)?`),d("XRANGEPLAINLOOSE",`[v=\\s]*(${s[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[a.XRANGEIDENTIFIERLOOSE]})(?:${s[a.PRERELEASELOOSE]})?${s[a.BUILD]}?)?)?`),d("XRANGE",`^${s[a.GTLT]}\\s*${s[a.XRANGEPLAIN]}$`),d("XRANGELOOSE",`^${s[a.GTLT]}\\s*${s[a.XRANGEPLAINLOOSE]}$`),d("COERCE",`(^|[^\\d])(\\d{1,${i}})(?:\\.(\\d{1,${i}}))?(?:\\.(\\d{1,${i}}))?(?:$|[^\\d])`),d("COERCERTL",s[a.COERCE],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM",`(\\s*)${s[a.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",d("TILDE",`^${s[a.LONETILDE]}${s[a.XRANGEPLAIN]}$`),d("TILDELOOSE",`^${s[a.LONETILDE]}${s[a.XRANGEPLAINLOOSE]}$`),d("LONECARET","(?:\\^)"),d("CARETTRIM",`(\\s*)${s[a.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",d("CARET",`^${s[a.LONECARET]}${s[a.XRANGEPLAIN]}$`),d("CARETLOOSE",`^${s[a.LONECARET]}${s[a.XRANGEPLAINLOOSE]}$`),d("COMPARATORLOOSE",`^${s[a.GTLT]}\\s*(${s[a.LOOSEPLAIN]})$|^$`),d("COMPARATOR",`^${s[a.GTLT]}\\s*(${s[a.FULLPLAIN]})$|^$`),d("COMPARATORTRIM",`(\\s*)${s[a.GTLT]}\\s*(${s[a.LOOSEPLAIN]}|${s[a.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE",`^\\s*(${s[a.XRANGEPLAIN]})\\s+-\\s+(${s[a.XRANGEPLAIN]})\\s*$`),d("HYPHENRANGELOOSE",`^\\s*(${s[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[a.XRANGEPLAINLOOSE]})\\s*$`),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0.0.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},6120:function(e,t,n){var i;
/*!
 * Platform.js v1.3.6
 * Copyright 2014-2020 Benjamin Tan
 * Copyright 2011-2013 John-David Dalton
 * Available under MIT license
 */e=n.nmd(e),function(){"use strict";var o={function:!0,object:!0},r=o[typeof window]&&window||this,s=o[typeof t]&&t,a=o["object"]&&e&&!e.nodeType&&e,c=s&&a&&"object"==typeof n.g&&n.g;!c||c.global!==c&&c.window!==c&&c.self!==c||(r=c);var d=Math.pow(2,53)-1,u=/\bOpera/,l=Object.prototype,p=l.hasOwnProperty,h=l.toString;function f(e){return e=String(e),e.charAt(0).toUpperCase()+e.slice(1)}function m(e,t,n){var i={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(i=i[/[\d.]+$/.exec(e)])&&(e="Windows "+i),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),e=g(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]),e}function v(e,t){var n=-1,i=e?e.length:0;if("number"==typeof i&&i>-1&&i<=d)while(++n<i)t(e[n],n,e);else b(e,t)}function g(e){return e=O(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:f(e)}function b(e,t){for(var n in e)p.call(e,n)&&t(e[n],n,e)}function y(e){return null==e?f(e):h.call(e).slice(8,-1)}function E(e,t){var n=null!=e?typeof e[t]:"number";return!/^(?:boolean|number|string|undefined)$/.test(n)&&("object"!=n||!!e[t])}function w(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function S(e,t){var n=null;return v(e,(function(i,o){n=t(n,i,o,e)})),n}function O(e){return String(e).replace(/^ +| +$/g,"")}function I(e){var t=r,n=e&&"object"==typeof e&&"String"!=y(e);n&&(t=e,e=null);var i=t.navigator||{},o=i.userAgent||"";e||(e=o);var s,a,c=n?!!i.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(h.toString()),d="Object",l=n?d:"ScriptBridgingProxyObject",p=n?d:"Environment",f=n&&t.java?"JavaPackage":y(t.java),v=n?d:"RuntimeObject",C=/\bJava/.test(f)&&t.java,R=C&&y(t.environment)==p,k=C?"a":"α",_=C?"b":"β",x=t.document||{},N=t.operamini||t.opera,P=u.test(P=n&&N?N["[[Class]]"]:y(N))?P:N=null,T=e,M=[],V=null,L=e==o,D=L&&N&&"function"==typeof N.version&&N.version(),A=W([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),j=H(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),B=q([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),U=$({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),F=G(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function W(t){return S(t,(function(t,n){return t||RegExp("\\b"+(n.pattern||w(n))+"\\b","i").exec(e)&&(n.label||n)}))}function $(t){return S(t,(function(t,n,i){return t||(n[B]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(B)]||RegExp("\\b"+w(i)+"(?:\\b|\\w*\\d)","i").exec(e))&&i}))}function H(t){return S(t,(function(t,n){return t||RegExp("\\b"+(n.pattern||w(n))+"\\b","i").exec(e)&&(n.label||n)}))}function G(t){return S(t,(function(t,n){var i=n.pattern||w(n);return!t&&(t=RegExp("\\b"+i+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=m(t,i,n.label||n)),t}))}function q(t){return S(t,(function(t,n){var i=n.pattern||w(n);return!t&&(t=RegExp("\\b"+i+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+i+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+i+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(i,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=g(t[0].replace(RegExp(i,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t}))}function z(t){return S(t,(function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null}))}function J(){return this.description||""}if(A&&(A=[A]),/\bAndroid\b/.test(F)&&!B&&(s=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(e))&&(B=O(s[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),U&&!B?B=q([U]):U&&B&&(B=B.replace(RegExp("^("+w(U)+")[-_.\\s]","i"),U+" ").replace(RegExp("^("+w(U)+")[-_.]?(\\w)","i"),U+" $2")),(s=/\bGoogle TV\b/.exec(B))&&(B=s[0]),/\bSimulator\b/i.test(e)&&(B=(B?B+" ":"")+"Simulator"),"Opera Mini"==j&&/\bOPiOS\b/.test(e)&&M.push("running in Turbo/Uncompressed mode"),"IE"==j&&/\blike iPhone OS\b/.test(e)?(s=I(e.replace(/like iPhone OS/,"")),U=s.manufacturer,B=s.product):/^iP/.test(B)?(j||(j="Safari"),F="iOS"+((s=/ OS ([\d_]+)/i.exec(e))?" "+s[1].replace(/_/g,"."):"")):"Konqueror"==j&&/^Linux\b/i.test(F)?F="Kubuntu":U&&"Google"!=U&&(/Chrome/.test(j)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(B))||/\bAndroid\b/.test(F)&&/^Chrome/.test(j)&&/\bVersion\//i.test(e)?(j="Android Browser",F=/\bAndroid\b/.test(F)?F:"Android"):"Silk"==j?(/\bMobi/i.test(e)||(F="Android",M.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&M.unshift("accelerated")):"UC Browser"==j&&/\bUCWEB\b/.test(e)?M.push("speed mode"):"PaleMoon"==j&&(s=/\bFirefox\/([\d.]+)\b/.exec(e))?M.push("identifying as Firefox "+s[1]):"Firefox"==j&&(s=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(F||(F="Firefox OS"),B||(B=s[1])):!j||(s=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(j))?(j&&!B&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(s+"/")+8))&&(j=null),(s=B||U||F)&&(B||U||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(F))&&(j=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(F)?F:s)+" Browser")):"Electron"==j&&(s=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&M.push("Chromium "+s),D||(D=z(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",w(j),"(?:Firefox|Minefield|NetFront)"])),(s=("iCab"==A&&parseFloat(D)>3?"WebKit":/\bOpera\b/.test(j)&&(/\bOPR\b/.test(e)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(A)&&"WebKit"||!A&&/\bMSIE\b/i.test(e)&&("Mac OS"==F?"Tasman":"Trident")||"WebKit"==A&&/\bPlayStation\b(?! Vita\b)/i.test(j)&&"NetFront")&&(A=[s]),"IE"==j&&(s=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(j+=" Mobile",F="Windows Phone "+(/\+$/.test(s)?s:s+".x"),M.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(j="IE Mobile",F="Windows Phone 8.x",M.unshift("desktop mode"),D||(D=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=j&&"Trident"==A&&(s=/\brv:([\d.]+)/.exec(e))&&(j&&M.push("identifying as "+j+(D?" "+D:"")),j="IE",D=s[1]),L){if(E(t,"global"))if(C&&(s=C.lang.System,T=s.getProperty("os.arch"),F=F||s.getProperty("os.name")+" "+s.getProperty("os.version")),R){try{D=t.require("ringo/engine").version.join("."),j="RingoJS"}catch(Y){(s=t.system)&&s.global.system==t.system&&(j="Narwhal",F||(F=s[0].os||null))}j||(j="Rhino")}else"object"==typeof t.process&&!t.process.browser&&(s=t.process)&&("object"==typeof s.versions&&("string"==typeof s.versions.electron?(M.push("Node "+s.versions.node),j="Electron",D=s.versions.electron):"string"==typeof s.versions.nw&&(M.push("Chromium "+D,"Node "+s.versions.node),j="NW.js",D=s.versions.nw)),j||(j="Node.js",T=s.arch,F=s.platform,D=/[\d.]+/.exec(s.version),D=D?D[0]:null));else y(s=t.runtime)==l?(j="Adobe AIR",F=s.flash.system.Capabilities.os):y(s=t.phantom)==v?(j="PhantomJS",D=(s=s.version||null)&&s.major+"."+s.minor+"."+s.patch):"number"==typeof x.documentMode&&(s=/\bTrident\/(\d+)/i.exec(e))?(D=[D,x.documentMode],(s=+s[1]+4)!=D[1]&&(M.push("IE "+D[1]+" mode"),A&&(A[1]=""),D[1]=s),D="IE"==j?String(D[1].toFixed(1)):D[0]):"number"==typeof x.documentMode&&/^(?:Chrome|Firefox)\b/.test(j)&&(M.push("masking as "+j+" "+D),j="IE",D="11.0",A=["Trident"],F="Windows");F=F&&g(F)}if(D&&(s=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(D)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(L&&i.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(V=/b/i.test(s)?"beta":"alpha",D=D.replace(RegExp(s+"\\+?$"),"")+("beta"==V?_:k)+(/\d+\+?/.exec(s)||"")),"Fennec"==j||"Firefox"==j&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(F))j="Firefox Mobile";else if("Maxthon"==j&&D)D=D.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(B))"Xbox 360"==B&&(F=null),"Xbox 360"==B&&/\bIEMobile\b/.test(e)&&M.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(j)&&(!j||B||/Browser|Mobi/.test(j))||"Windows CE"!=F&&!/Mobi/i.test(e))if("IE"==j&&L)try{null===t.external&&M.unshift("platform preview")}catch(Y){M.unshift("embedded")}else(/\bBlackBerry\b/.test(B)||/\bBB10\b/.test(e))&&(s=(RegExp(B.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||D)?(s=[s,/BB10/.test(e)],F=(s[1]?(B=null,U="BlackBerry"):"Device Software")+" "+s[0],D=null):this!=b&&"Wii"!=B&&(L&&N||/Opera/.test(j)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==j&&/\bOS X (?:\d+\.){2,}/.test(F)||"IE"==j&&(F&&!/^Win/.test(F)&&D>5.5||/\bWindows XP\b/.test(F)&&D>8||8==D&&!/\bTrident\b/.test(e)))&&!u.test(s=I.call(b,e.replace(u,"")+";"))&&s.name&&(s="ing as "+s.name+((s=s.version)?" "+s:""),u.test(j)?(/\bIE\b/.test(s)&&"Mac OS"==F&&(F=null),s="identify"+s):(s="mask"+s,j=P?g(P.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(s)&&(F=null),L||(D=null)),A=["Presto"],M.push(s));else j+=" Mobile";(s=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(s=[parseFloat(s.replace(/\.(\d)$/,".0$1")),s],"Safari"==j&&"+"==s[1].slice(-1)?(j="WebKit Nightly",V="alpha",D=s[1].slice(0,-1)):D!=s[1]&&D!=(s[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(D=null),s[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(e)||0)[1],537.36==s[0]&&537.36==s[2]&&parseFloat(s[1])>=28&&"WebKit"==A&&(A=["Blink"]),L&&(c||s[1])?(A&&(A[1]="like Chrome"),s=s[1]||(s=s[0],s<530?1:s<532?2:s<532.05?3:s<533?4:s<534.03?5:s<534.07?6:s<534.1?7:s<534.13?8:s<534.16?9:s<534.24?10:s<534.3?11:s<535.01?12:s<535.02?"13+":s<535.07?15:s<535.11?16:s<535.19?17:s<536.05?18:s<536.1?19:s<537.01?20:s<537.11?"21+":s<537.13?23:s<537.18?24:s<537.24?25:s<537.36?26:"Blink"!=A?"27":"28")):(A&&(A[1]="like Safari"),s=s[0],s=s<400?1:s<500?2:s<526?3:s<533?4:s<534?"4+":s<535?5:s<537?6:s<538?7:s<601?8:s<602?9:s<604?10:s<606?11:s<608?12:"12"),A&&(A[1]+=" "+(s+="number"==typeof s?".x":/[.+]/.test(s)?"":"+")),"Safari"==j&&(!D||parseInt(D)>45)?D=s:"Chrome"==j&&/\bHeadlessChrome/i.test(e)&&M.unshift("headless")),"Opera"==j&&(s=/\bzbov|zvav$/.exec(F))?(j+=" ",M.unshift("desktop mode"),"zvav"==s?(j+="Mini",D=null):j+="Mobile",F=F.replace(RegExp(" *"+s+"$"),"")):"Safari"==j&&/\bChrome\b/.exec(A&&A[1])?(M.unshift("desktop mode"),j="Chrome Mobile",D=null,/\bOS X\b/.test(F)?(U="Apple",F="iOS 4.3+"):F=null):/\bSRWare Iron\b/.test(j)&&!D&&(D=z("Chrome")),D&&0==D.indexOf(s=/[\d.]+$/.exec(F))&&e.indexOf("/"+s+"-")>-1&&(F=O(F.replace(s,""))),F&&-1!=F.indexOf(j)&&!RegExp(j+" OS").test(F)&&(F=F.replace(RegExp(" *"+w(j)+" *"),"")),A&&!/\b(?:Avant|Nook)\b/.test(j)&&(/Browser|Lunascape|Maxthon/.test(j)||"Safari"!=j&&/^iOS/.test(F)&&/\bSafari\b/.test(A[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(j)&&A[1])&&(s=A[A.length-1])&&M.push(s),M.length&&(M=["("+M.join("; ")+")"]),U&&B&&B.indexOf(U)<0&&M.push("on "+U),B&&M.push((/^on /.test(M[M.length-1])?"":"on ")+B),F&&(s=/ ([\d.+]+)$/.exec(F),a=s&&"/"==F.charAt(F.length-s[0].length-1),F={architecture:32,family:s&&!a?F.replace(s[0],""):F,version:s?s[1]:null,toString:function(){var e=this.version;return this.family+(e&&!a?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(s=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(T))&&!/\bi686\b/i.test(T)?(F&&(F.architecture=64,F.family=F.family.replace(RegExp(" *"+s),"")),j&&(/\bWOW64\b/i.test(e)||L&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(e))&&M.unshift("32-bit")):F&&/^OS X/.test(F.family)&&"Chrome"==j&&parseFloat(D)>=39&&(F.architecture=64),e||(e=null);var X={};return X.description=e,X.layout=A&&A[0],X.manufacturer=U,X.name=j,X.prerelease=V,X.product=B,X.ua=e,X.version=j&&D,X.os=F||{architecture:null,family:null,version:null,toString:function(){return"null"}},X.parse=I,X.toString=J,X.version&&M.unshift(D),X.name&&M.unshift(j),F&&j&&(F!=String(F).split(" ")[0]||F!=j.split(" ")[0]&&!B)&&M.push(B?"("+F+")":"on "+F),M.length&&(X.description=M.join(" ")),X}var C=I();r.platform=C,i=function(){return C}.call(t,n,t,e),void 0===i||(e.exports=i)}.call(this)},759:function(e,t,n){"use strict";n.r(t),n.d(t,{NIL:function(){return J},parse:function(){return E},stringify:function(){return f},v1:function(){return b},v3:function(){return B},v4:function(){return F},v5:function(){return z},validate:function(){return c},version:function(){return Y}});n(1703),n(8675),n(3462),n(7380),n(1118);var i,o=new Uint8Array(16);function r(){if(!i&&(i="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(o)}var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function a(e){return"string"===typeof e&&s.test(e)}for(var c=a,d=[],u=0;u<256;++u)d.push((u+256).toString(16).substr(1));function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(d[e[t+0]]+d[e[t+1]]+d[e[t+2]]+d[e[t+3]]+"-"+d[e[t+4]]+d[e[t+5]]+"-"+d[e[t+6]]+d[e[t+7]]+"-"+d[e[t+8]]+d[e[t+9]]+"-"+d[e[t+10]]+d[e[t+11]]+d[e[t+12]]+d[e[t+13]]+d[e[t+14]]+d[e[t+15]]).toLowerCase();if(!c(n))throw TypeError("Stringified UUID is invalid");return n}var p,h,f=l,m=0,v=0;function g(e,t,n){var i=t&&n||0,o=t||new Array(16);e=e||{};var s=e.node||p,a=void 0!==e.clockseq?e.clockseq:h;if(null==s||null==a){var c=e.random||(e.rng||r)();null==s&&(s=p=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==a&&(a=h=16383&(c[6]<<8|c[7]))}var d=void 0!==e.msecs?e.msecs:Date.now(),u=void 0!==e.nsecs?e.nsecs:v+1,l=d-m+(u-v)/1e4;if(l<0&&void 0===e.clockseq&&(a=a+1&16383),(l<0||d>m)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");m=d,v=u,h=a,d+=122192928e5;var g=(1e4*(268435455&d)+u)%4294967296;o[i++]=g>>>24&255,o[i++]=g>>>16&255,o[i++]=g>>>8&255,o[i++]=255&g;var b=d/4294967296*1e4&268435455;o[i++]=b>>>8&255,o[i++]=255&b,o[i++]=b>>>24&15|16,o[i++]=b>>>16&255,o[i++]=a>>>8|128,o[i++]=255&a;for(var y=0;y<6;++y)o[i+y]=s[y];return t||f(o)}var b=g;function y(e){if(!c(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}var E=y;function w(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}var S="6ba7b810-9dad-11d1-80b4-00c04fd430c8",O="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function I(e,t,n){function i(e,i,o,r){if("string"===typeof e&&(e=w(e)),"string"===typeof i&&(i=E(i)),16!==i.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+e.length);if(s.set(i),s.set(e,i.length),s=n(s),s[6]=15&s[6]|t,s[8]=63&s[8]|128,o){r=r||0;for(var a=0;a<16;++a)o[r+a]=s[a];return o}return f(s)}try{i.name=e}catch(o){}return i.DNS=S,i.URL=O,i}function C(e){if("string"===typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return R(_(x(e),8*e.length))}function R(e){for(var t=[],n=32*e.length,i="0123456789abcdef",o=0;o<n;o+=8){var r=e[o>>5]>>>o%32&255,s=parseInt(i.charAt(r>>>4&15)+i.charAt(15&r),16);t.push(s)}return t}function k(e){return 14+(e+64>>>9<<4)+1}function _(e,t){e[t>>5]|=128<<t%32,e[k(t)-1]=t;for(var n=1732584193,i=-271733879,o=-1732584194,r=271733878,s=0;s<e.length;s+=16){var a=n,c=i,d=o,u=r;n=M(n,i,o,r,e[s],7,-680876936),r=M(r,n,i,o,e[s+1],12,-389564586),o=M(o,r,n,i,e[s+2],17,606105819),i=M(i,o,r,n,e[s+3],22,-1044525330),n=M(n,i,o,r,e[s+4],7,-176418897),r=M(r,n,i,o,e[s+5],12,1200080426),o=M(o,r,n,i,e[s+6],17,-1473231341),i=M(i,o,r,n,e[s+7],22,-45705983),n=M(n,i,o,r,e[s+8],7,1770035416),r=M(r,n,i,o,e[s+9],12,-1958414417),o=M(o,r,n,i,e[s+10],17,-42063),i=M(i,o,r,n,e[s+11],22,-1990404162),n=M(n,i,o,r,e[s+12],7,1804603682),r=M(r,n,i,o,e[s+13],12,-40341101),o=M(o,r,n,i,e[s+14],17,-1502002290),i=M(i,o,r,n,e[s+15],22,1236535329),n=V(n,i,o,r,e[s+1],5,-165796510),r=V(r,n,i,o,e[s+6],9,-1069501632),o=V(o,r,n,i,e[s+11],14,643717713),i=V(i,o,r,n,e[s],20,-373897302),n=V(n,i,o,r,e[s+5],5,-701558691),r=V(r,n,i,o,e[s+10],9,38016083),o=V(o,r,n,i,e[s+15],14,-660478335),i=V(i,o,r,n,e[s+4],20,-405537848),n=V(n,i,o,r,e[s+9],5,568446438),r=V(r,n,i,o,e[s+14],9,-1019803690),o=V(o,r,n,i,e[s+3],14,-187363961),i=V(i,o,r,n,e[s+8],20,1163531501),n=V(n,i,o,r,e[s+13],5,-1444681467),r=V(r,n,i,o,e[s+2],9,-51403784),o=V(o,r,n,i,e[s+7],14,1735328473),i=V(i,o,r,n,e[s+12],20,-1926607734),n=L(n,i,o,r,e[s+5],4,-378558),r=L(r,n,i,o,e[s+8],11,-2022574463),o=L(o,r,n,i,e[s+11],16,1839030562),i=L(i,o,r,n,e[s+14],23,-35309556),n=L(n,i,o,r,e[s+1],4,-1530992060),r=L(r,n,i,o,e[s+4],11,1272893353),o=L(o,r,n,i,e[s+7],16,-155497632),i=L(i,o,r,n,e[s+10],23,-1094730640),n=L(n,i,o,r,e[s+13],4,681279174),r=L(r,n,i,o,e[s],11,-358537222),o=L(o,r,n,i,e[s+3],16,-722521979),i=L(i,o,r,n,e[s+6],23,76029189),n=L(n,i,o,r,e[s+9],4,-640364487),r=L(r,n,i,o,e[s+12],11,-421815835),o=L(o,r,n,i,e[s+15],16,530742520),i=L(i,o,r,n,e[s+2],23,-995338651),n=D(n,i,o,r,e[s],6,-198630844),r=D(r,n,i,o,e[s+7],10,1126891415),o=D(o,r,n,i,e[s+14],15,-1416354905),i=D(i,o,r,n,e[s+5],21,-57434055),n=D(n,i,o,r,e[s+12],6,1700485571),r=D(r,n,i,o,e[s+3],10,-1894986606),o=D(o,r,n,i,e[s+10],15,-1051523),i=D(i,o,r,n,e[s+1],21,-2054922799),n=D(n,i,o,r,e[s+8],6,1873313359),r=D(r,n,i,o,e[s+15],10,-30611744),o=D(o,r,n,i,e[s+6],15,-1560198380),i=D(i,o,r,n,e[s+13],21,1309151649),n=D(n,i,o,r,e[s+4],6,-145523070),r=D(r,n,i,o,e[s+11],10,-1120210379),o=D(o,r,n,i,e[s+2],15,718787259),i=D(i,o,r,n,e[s+9],21,-343485551),n=N(n,a),i=N(i,c),o=N(o,d),r=N(r,u)}return[n,i,o,r]}function x(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(k(t)),i=0;i<t;i+=8)n[i>>5]|=(255&e[i/8])<<i%32;return n}function N(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}function P(e,t){return e<<t|e>>>32-t}function T(e,t,n,i,o,r){return N(P(N(N(t,e),N(i,r)),o),n)}function M(e,t,n,i,o,r,s){return T(t&n|~t&i,e,t,o,r,s)}function V(e,t,n,i,o,r,s){return T(t&i|n&~i,e,t,o,r,s)}function L(e,t,n,i,o,r,s){return T(t^n^i,e,t,o,r,s)}function D(e,t,n,i,o,r,s){return T(n^(t|~i),e,t,o,r,s)}var A=C,j=I("v3",48,A),B=j;function U(e,t,n){e=e||{};var i=e.random||(e.rng||r)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=i[o];return t}return f(i)}var F=U;function W(e,t,n,i){switch(e){case 0:return t&n^~t&i;case 1:return t^n^i;case 2:return t&n^t&i^n&i;case 3:return t^n^i}}function $(e,t){return e<<t|e>>>32-t}function H(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"===typeof e){var i=unescape(encodeURIComponent(e));e=[];for(var o=0;o<i.length;++o)e.push(i.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var r=e.length/4+2,s=Math.ceil(r/16),a=new Array(s),c=0;c<s;++c){for(var d=new Uint32Array(16),u=0;u<16;++u)d[u]=e[64*c+4*u]<<24|e[64*c+4*u+1]<<16|e[64*c+4*u+2]<<8|e[64*c+4*u+3];a[c]=d}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(var l=0;l<s;++l){for(var p=new Uint32Array(80),h=0;h<16;++h)p[h]=a[l][h];for(var f=16;f<80;++f)p[f]=$(p[f-3]^p[f-8]^p[f-14]^p[f-16],1);for(var m=n[0],v=n[1],g=n[2],b=n[3],y=n[4],E=0;E<80;++E){var w=Math.floor(E/20),S=$(m,5)+W(w,v,g,b)+y+t[w]+p[E]>>>0;y=b,b=g,g=$(v,30)>>>0,v=m,m=S}n[0]=n[0]+m>>>0,n[1]=n[1]+v>>>0,n[2]=n[2]+g>>>0,n[3]=n[3]+b>>>0,n[4]=n[4]+y>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}var G=H,q=I("v5",80,G),z=q,J="00000000-0000-0000-0000-000000000000";function X(e){if(!c(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var Y=X},2568:function(e){function t(){}e.exports=t,t.mixin=function(e){var t=e.prototype||e;t.isWildEmitter=!0,t.on=function(e,t,n){this.callbacks=this.callbacks||{};var i=3===arguments.length,o=i?arguments[1]:void 0,r=i?arguments[2]:arguments[1];return r._groupName=o,(this.callbacks[e]=this.callbacks[e]||[]).push(r),this},t.once=function(e,t,n){var i=this,o=3===arguments.length,r=o?arguments[1]:void 0,s=o?arguments[2]:arguments[1];function a(){i.off(e,a),s.apply(this,arguments)}return this.on(e,r,a),this},t.releaseGroup=function(e){var t,n,i,o;for(t in this.callbacks=this.callbacks||{},this.callbacks)for(o=this.callbacks[t],n=0,i=o.length;n<i;n++)o[n]._groupName===e&&(o.splice(n,1),n--,i--);return this},t.off=function(e,t){this.callbacks=this.callbacks||{};var n,i=this.callbacks[e];return i?1===arguments.length?(delete this.callbacks[e],this):(n=i.indexOf(t),-1!==n&&(i.splice(n,1),0===i.length&&delete this.callbacks[e]),this):this},t.emit=function(e){this.callbacks=this.callbacks||{};var t,n,i,o=[].slice.call(arguments,1),r=this.callbacks[e],s=this.getWildcardCallbacks(e);if(r)for(i=r.slice(),t=0,n=i.length;t<n;++t){if(!i[t])break;i[t].apply(this,o)}if(s)for(n=s.length,i=s.slice(),t=0,n=i.length;t<n;++t){if(!i[t])break;i[t].apply(this,[e].concat(o))}return this},t.getWildcardCallbacks=function(e){this.callbacks=this.callbacks||{};var t,n,i=[];for(t in this.callbacks)n=t.split("*"),("*"===t||2===n.length&&e.slice(0,n[0].length)===n[0])&&(i=i.concat(this.callbacks[t]));return i}},t.mixin(t)},9001:function(e,t,n){var i;n(1703),function(t){"use strict";function o(){}var r=o.prototype,s=t.EventEmitter;function a(e,t){var n=e.length;while(n--)if(e[n].listener===t)return n;return-1}function c(e){return function(){return this[e].apply(this,arguments)}}function d(e){return"function"===typeof e||e instanceof RegExp||!(!e||"object"!==typeof e)&&d(e.listener)}r.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp)for(n in t={},i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n]);else t=i[e]||(i[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},r.addListener=function(e,t){if(!d(t))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(e),o="object"===typeof t;for(n in i)i.hasOwnProperty(n)&&-1===a(i[n],t)&&i[n].push(o?t:{listener:t,once:!1});return this},r.on=c("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=c("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,t){var n,i,o=this.getListenersAsObject(e);for(i in o)o.hasOwnProperty(i)&&(n=a(o[i],t),-1!==n&&o[i].splice(n,1));return this},r.off=c("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var i,o,r=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!==typeof t||t instanceof RegExp){i=n.length;while(i--)r.call(this,t,n[i])}else for(i in t)t.hasOwnProperty(i)&&(o=t[i])&&("function"===typeof o?r.call(this,i,o):s.call(this,i,o));return this},r.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},r.removeAllListeners=c("removeEvent"),r.emitEvent=function(e,t){var n,i,o,r,s,a=this.getListenersAsObject(e);for(r in a)if(a.hasOwnProperty(r))for(n=a[r].slice(0),o=0;o<n.length;o++)i=n[o],!0===i.once&&this.removeListener(e,i.listener),s=i.listener.apply(this,t||[]),s===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},r.trigger=c("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},r._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return t.EventEmitter=s,o},i=function(){return o}.call(t,n,t,e),void 0===i||(e.exports=i)}("undefined"!==typeof window?window:this||{})},459:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return vr}});var i=n(3396);function o(e,t,n,o,r,s){const a=(0,i.up)("waiting-company"),c=(0,i.up)("waiting-guest");return(0,i.wg)(),(0,i.iD)(i.HY,null,[o.state.isGuest?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(a,{key:0})),o.state.isGuest?((0,i.wg)(),(0,i.j4)(c,{key:1})):(0,i.kq)("",!0)],64)}var r=n(7139),s=n(9242),a=n.p+"img/wedding_main_1.43b147f2.jpg",c=n.p+"img/wedding_main_2.5c846d07.jpg",d=n.p+"img/wedding_main_3.c73fa83b.jpg";const u=e=>((0,i.dD)("data-v-93192dd4"),e=e(),(0,i.Cn)(),e),l={style:{"background-color":"#f0ebe7"}},p={id:"main-container",class:"container",style:{height:"70rem"}},h={key:0,style:{"padding-top":"5rem"}},f=u((()=>(0,i._)("h3",{style:{"padding-top":"5rem",display:"inline"},class:"waitingguest-font"},"어서오세요, ",-1))),m={style:{display:"inline"},class:"waitingguest-font"},v=u((()=>(0,i._)("h3",{style:{display:"inline"},class:"waitingguest-font"}," 님 ",-1))),g={style:{"margin-top":"3rem"}},b=u((()=>(0,i._)("h3",{class:"waitingguest-font",style:{display:"inline"}},"신랑 ",-1))),y={class:"waitingguest-font",style:{display:"inline",color:"#00C3FF"}},E=u((()=>(0,i._)("h3",{class:"waitingguest-font",style:{display:"inline"}}," 와 신부 ",-1))),w={class:"waitingguest-font",style:{display:"inline",color:"#FFB4FF"}},S=u((()=>(0,i._)("h3",{class:"waitingguest-font",style:{display:"inline"}}," 님의 결혼식입니다",-1))),O=u((()=>(0,i._)("div",{style:{"margin-top":"3rem"}},[(0,i._)("h3",{class:"waitingguest-font"},"두 분의 결혼식을 진심으로 축복해주세요")],-1))),I={class:"text-center",style:{"margin-top":"3rem"}},C={class:"d-flex"},R={style:{width:"40rem",margin:"auto","margin-top":"5rem"},id:"carouselExampleFade",class:"carousel slide carousel-fade","data-bs-ride":"carousel"},k={key:0,class:"carousel-inner"},_=(0,i.uE)('<div class="carousel-item active" data-v-93192dd4><img src="'+a+'" class="d-block w-100" alt="..." data-v-93192dd4></div><div class="carousel-item" data-v-93192dd4><img src="'+c+'" class="d-block w-100" alt="..." data-v-93192dd4></div><div class="carousel-item" data-v-93192dd4><img src="'+d+'" class="d-block w-100" alt="..." data-v-93192dd4></div>',3),x=[_],N={key:1,class:"carousel-inner"},P={class:"carousel-item active"},T=["src","alt"],M=["src"],V=(0,i.uE)('<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev" data-v-93192dd4><span class="carousel-control-prev-icon" aria-hidden="true" data-v-93192dd4></span><span class="visually-hidden" data-v-93192dd4>Previous</span></button><button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next" data-v-93192dd4><span class="carousel-control-next-icon" aria-hidden="true" data-v-93192dd4></span><span class="visually-hidden" data-v-93192dd4>Next</span></button>',2),L={class:"memo",style:{width:"40rem",margin:"auto"}},D=u((()=>(0,i._)("h3",{class:"message-font",style:{"margin-bottom":"2rem","margin-top":"5rem"}},"축하의 말",-1))),A={style:{"margin-bottom":"2rem"}},j=u((()=>(0,i._)("br",null,null,-1))),B=u((()=>(0,i._)("svg",{class:"icon icon-loop"},[(0,i._)("use",{"xlink:href":"#icon-loop"},[(0,i._)("symbol",{id:"icon-loop",viewBox:"0 0 32 32"},[(0,i._)("path",{d:"M20 16v4h4.738l-5.371 5.371c-3.389 3.396-9.309 3.396-12.701 0l-2.83 2.824c2.451 2.454 5.715 3.805 9.184 3.805 3.471 0 6.727-1.352 9.175-3.805l5.805-5.8v5.605h4v-12h-12zM12 12h-4.738l5.371-5.371c3.389-3.396 9.309-3.396 12.701 0l2.83-2.824c-2.451-2.453-5.715-3.805-9.185-3.805s-6.727 1.352-9.175 3.805l-5.804 5.8v-5.605h-4v12h12v-4z"})])])],-1))),U=[B];function F(e,t,n,o,a,c){const d=(0,i.up)("room-chat"),u=(0,i.up)("man-video"),_=(0,i.up)("hall-video"),B=(0,i.up)("guest-to-guest");return(0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("div",p,[a.where?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",h,[(0,i._)("div",null,[f,(0,i._)("h2",m,(0,r.zw)(e.guestInfo.guestName)+"("+(0,r.zw)(e.guestInfo.guestGroup)+")",1),v]),(0,i._)("div",g,[b,(0,i._)("h2",y,(0,r.zw)(e.wedding.weddingManNm),1),E,(0,i._)("h2",w,(0,r.zw)(e.wedding.weddingWomanNm),1),S]),O,(0,i._)("p",I,[(0,i._)("button",{style:{"margin-right":"2rem"},type:"button",class:"btn btn-outline-secondary",onClick:t[0]||(t[0]=e=>c.clickButton("man"))},"신랑 대기방 입장"),(0,i._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[1]||(t[1]=e=>c.clickButton("woman"))},"신부 대기방 입장"),(0,i._)("button",{style:{"margin-left":"2rem"},type:"button",class:"btn btn-outline-secondary",onClick:t[2]||(t[2]=e=>c.clickButton1("hall"))},"결혼식장 입장"),(0,i._)("button",{style:{"margin-left":"2rem"},type:"button",class:"btn btn-outline-secondary",onClick:t[3]||(t[3]=e=>c.clickButton1("guest"))},"하객 놀이방")]),(0,i._)("div",C,[(0,i._)("div",R,[o.state.activeWeddingImage?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",k,x)),o.state.activeWeddingImage?((0,i.wg)(),(0,i.iD)("div",N,[(0,i._)("div",P,[(0,i._)("img",{src:o.state.activeWeddingImage,class:"d-block w-100",alt:o.state.activeWeddingImage},null,8,T)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.state.weddingImages,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"carousel-item",key:e},[(0,i._)("img",{src:e,class:"d-block w-100",alt:"..."},null,8,M)])))),128))])):(0,i.kq)("",!0),V]),(0,i._)("div",L,[D,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.state.guestBook,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"message-font",key:e},[(0,i._)("p",A,[(0,i.Uk)("작성자(소속): "+(0,r.zw)(e.guestName)+"("+(0,r.zw)(e.guestGroup)+")",1),j,(0,i.Uk)("방명록: "+(0,r.zw)(e.guestMessage),1)])])))),128)),(0,i._)("div",null,[(0,i._)("button",{onClick:t[4]||(t[4]=(...e)=>o.reloadGuestBook&&o.reloadGuestBook(...e))},U)])])])])),(0,i.wy)((0,i._)("div",null,[(0,i.Wm)(d,{ref:"chat",subscribers:a.subscribers,onMessage:c.sendMessage,onComeManVideo:c.comeManVideo,onGoManVideo:c.goManVideo},null,8,["subscribers","onMessage","onComeManVideo","onGoManVideo"])],512),[[s.F8,this.disabled]]),(0,i._)("div",null,["man"===a.where||"woman"===a.where?((0,i.wg)(),(0,i.j4)(u,{key:0,where:a.where,onLeaveVideo:c.leaveVideo,onOutFirstMan:c.outFirstMan},null,8,["where","onLeaveVideo","onOutFirstMan"])):(0,i.kq)("",!0),"hall"===a.where?((0,i.wg)(),(0,i.j4)(_,{key:1,where:a.where,onLeaveVideo:c.leaveVideo},null,8,["where","onLeaveVideo"])):(0,i.kq)("",!0)]),(0,i._)("div",null,["guest"===a.where?((0,i.wg)(),(0,i.j4)(B,{key:0,onClickExit:c.leaveVideo},null,8,["onClickExit"])):(0,i.kq)("",!0)])])])}var W=n(6265),$=n.n(W),H=n(4870),G=n(65),q=n(9801);const z={style:{"background-color":"#f0ebe7"}},J={class:"manvideo-company"},X=(0,i._)("h1",{class:"manvideoguest-font",style:{"padding-top":"3rem"}},"오늘의 주인공을 축복해주세요",-1),Y={key:0,id:"session"},Q={class:"d-flex"},K={id:"main-video",style:{"margin-top":"3rem"}},Z={id:"video-container",style:{"margin-top":"3rem"}};function ee(e,t,n,o,r,s){const a=(0,i.up)("user-video"),c=(0,i.up)("on-off");return(0,i.wg)(),(0,i.iD)("div",z,[(0,i._)("div",J,[X,r.session?((0,i.wg)(),(0,i.iD)("div",Y,[(0,i._)("div",Q,[(0,i._)("div",K,[(0,i.Wm)(a,{style:{"margin-right":"5px"},"stream-manager":r.mainStreamManager},null,8,["stream-manager"]),(0,i.Wm)(c,{ref:"on-off",onAudioOnOff:s.audioOnOff,onVideoOnOff:s.videoOnOff},null,8,["onAudioOnOff","onVideoOnOff"])]),(0,i._)("div",Z,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.subscribers,(e=>((0,i.wg)(),(0,i.j4)(a,{style:{"margin-left":"5px"},key:e.stream.connection.connectionId,"stream-manager":e,onClick:t=>s.updateMainVideoStreamManager(e)},null,8,["stream-manager","onClick"])))),128))])]),(0,i._)("button",{class:"btn btn-large btn-danger btnOut",onClick:t[0]||(t[0]=e=>s.outFirstMan(n.where))},"나가기")])):(0,i.kq)("",!0)])])}const te={key:0};function ne(e,t,n,o,r,s){const a=(0,i.up)("ov-video");return n.streamManager?((0,i.wg)(),(0,i.iD)("div",te,[(0,i.Wm)(a,{"stream-manager":n.streamManager},null,8,["stream-manager"])])):(0,i.kq)("",!0)}const ie={autoplay:""};function oe(e,t,n,o,r,s){return(0,i.wg)(),(0,i.iD)("video",ie)}var re={name:"OvVideo",props:{streamManager:Object},mounted(){this.streamManager.addVideoElement(this.$el)}},se=n(89);const ae=(0,se.Z)(re,[["render",oe]]);var ce=ae,de={name:"UserVideo",components:{OvVideo:ce},props:{streamManager:Object},computed:{clientData(){const{clientData:e}=this.getConnectionData();return e}},methods:{getConnectionData(){const{connection:e}=this.streamManager.stream;return JSON.parse(e.data)}}};const ue=(0,se.Z)(de,[["render",ne]]);var le=ue;const pe=e=>((0,i.dD)("data-v-b56f50c4"),e=e(),(0,i.Cn)(),e),he={key:0},fe=(0,i.Uk)("캠 끄기 "),me=pe((()=>(0,i._)("svg",{class:"icon icon-videocam"},[(0,i._)("use",{"xlink:href":"#icon-videocam"},[(0,i._)("symbol",{id:"icon-videocam",viewBox:"0 0 24 24"},[(0,i._)("path",{d:"M17.016 10.5l3.984-3.984v10.969l-3.984-3.984v3.516q0 0.422-0.305 0.703t-0.727 0.281h-12q-0.422 0-0.703-0.281t-0.281-0.703v-10.031q0-0.422 0.281-0.703t0.703-0.281h12q0.422 0 0.727 0.281t0.305 0.703v3.516z"})])])],-1))),ve=[fe,me],ge={key:1},be=(0,i.Uk)("캠 켜기 "),ye=pe((()=>(0,i._)("svg",{class:"icon icon-videocam_off"},[(0,i._)("use",{"xlink:href":"#icon-videocam_off"},[(0,i._)("symbol",{id:"icon-videocam_off",viewBox:"0 0 24 24"},[(0,i._)("path",{d:"M3.281 2.016l17.719 17.719-1.266 1.266-3.188-3.188q-0.281 0.188-0.563 0.188h-12q-0.422 0-0.703-0.281t-0.281-0.703v-10.031q0-0.422 0.281-0.703t0.703-0.281h0.75l-2.719-2.719zM21 6.516v10.688l-11.203-11.203h6.188q0.422 0 0.727 0.281t0.305 0.703v3.516z"})])])],-1))),Ee=[be,ye],we={key:0},Se=(0,i.Uk)("마이크 끄기 "),Oe=pe((()=>(0,i._)("svg",{class:"icon icon-microphone"},[(0,i._)("use",{"xlink:href":"#icon-microphone"},[(0,i._)("symbol",{id:"icon-microphone",viewBox:"0 0 18 28"},[(0,i._)("path",{d:"M18 11v2c0 4.625-3.5 8.437-8 8.937v2.063h4c0.547 0 1 0.453 1 1s-0.453 1-1 1h-10c-0.547 0-1-0.453-1-1s0.453-1 1-1h4v-2.063c-4.5-0.5-8-4.312-8-8.937v-2c0-0.547 0.453-1 1-1s1 0.453 1 1v2c0 3.859 3.141 7 7 7s7-3.141 7-7v-2c0-0.547 0.453-1 1-1s1 0.453 1 1zM14 5v8c0 2.75-2.25 5-5 5s-5-2.25-5-5v-8c0-2.75 2.25-5 5-5s5 2.25 5 5z"})])])],-1))),Ie=[Se,Oe],Ce={key:1},Re=(0,i.Uk)("마이크 켜기 "),ke=pe((()=>(0,i._)("svg",{class:"icon icon-microphone"},[(0,i._)("use",{"xlink:href":"#icon-microphone-slash"},[(0,i._)("symbol",{id:"icon-microphone-slash",viewBox:"0 0 22 28"},[(0,i._)("path",{d:"M4.234 14.766l-1.578 1.578c-0.422-1.031-0.656-2.156-0.656-3.344v-2c0-0.547 0.453-1 1-1s1 0.453 1 1v2c0 0.609 0.094 1.203 0.234 1.766zM21.641 5.359l-5.641 5.641v2c0 2.75-2.25 5-5 5-0.594 0-1.172-0.109-1.703-0.297l-1.5 1.5c0.953 0.5 2.047 0.797 3.203 0.797 3.859 0 7-3.141 7-7v-2c0-0.547 0.453-1 1-1s1 0.453 1 1v2c0 4.625-3.5 8.437-8 8.937v2.063h4c0.547 0 1 0.453 1 1s-0.453 1-1 1h-10c-0.547 0-1-0.453-1-1s0.453-1 1-1h4v-2.063c-1.328-0.141-2.578-0.594-3.672-1.266l-3.969 3.969c-0.203 0.203-0.516 0.203-0.719 0l-1.281-1.281c-0.203-0.203-0.203-0.516 0-0.719l19.281-19.281c0.203-0.203 0.516-0.203 0.719 0l1.281 1.281c0.203 0.203 0.203 0.516 0 0.719zM15.703 3.297l-9.703 9.703v-8c0-2.75 2.25-5 5-5 2.156 0 4 1.391 4.703 3.297z"})])])],-1))),_e=[Re,ke];function xe(e,t,n,o,r,s){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("button",{class:"btn btn-outline-secondary question-font btnGet",onClick:t[0]||(t[0]=(...e)=>o.videoOnOff&&o.videoOnOff(...e))},[o.state.video?((0,i.wg)(),(0,i.iD)("span",he,ve)):(0,i.kq)("",!0),o.state.video?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",ge,Ee))]),(0,i._)("button",{class:"btn btn-outline-secondary question-font btnGet",onClick:t[1]||(t[1]=(...e)=>o.audioOnOff&&o.audioOnOff(...e))},[o.state.audio?((0,i.wg)(),(0,i.iD)("span",we,Ie)):(0,i.kq)("",!0),o.state.audio?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",Ce,_e))])],64)}var Ne={name:"on-off",setup(e,{emit:t}){const n=(0,H.qj)({video:!0,audio:!0}),i=()=>{n.video?n.video=!1:n.video=!0,t("videoOnOff",{video:n.video})},o=()=>{n.audio?n.audio=!1:n.audio=!0,console.log(n.audio),t("audioOnOff",{audio:n.audio})};return{state:n,videoOnOff:i,audioOnOff:o}}};const Pe=(0,se.Z)(Ne,[["render",xe],["__scopeId","data-v-b56f50c4"]]);var Te=Pe;$().defaults.headers.post["Content-Type"]="application/json";const Me="https://"+location.hostname+":"+{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_OPENVIDU_PORT,Ve="MY_SECRET";var Le={name:"man-guest",props:{where:String},components:{UserVideo:le,OnOff:Te},data(){return{OV:void 0,session:void 0,mainStreamManager:void 0,publisher:void 0,subscribers:[],mySessionId:"",myUserName:""}},methods:{outFirstMan(e){this.$emit("out-first-man",e)},joinSession(e){this.mySessionId=e,this.myUserName=e+this.guest.guestGroup+this.guest.guestName,this.OV=new q.Dn,this.session=this.OV.initSession(),this.session.on("streamCreated",(({stream:e})=>{const t=this.session.subscribe(e);this.subscribers.push(t)})),this.session.on("streamDestroyed",(({stream:e})=>{const t=this.subscribers.indexOf(e.streamManager,0);t>=0&&this.subscribers.splice(t,1)})),this.session.on("exception",(({exception:e})=>{console.warn(e)})),this.session.on("signal:public-chat",(e=>{this.$refs.chat.addMessage(e.data,JSON.parse(e.data).sender===this.myUserName,!1)})),this.session.on("signal:private-chat",(e=>{this.$refs.chat.addMessage(e.data,!1,!0)})),this.getToken(e+this.mySessionId).then((e=>{this.session.connect(e,{clientData:this.myUserName}).then((()=>{let e=this.OV.initPublisher(void 0,{audioSource:void 0,videoSource:void 0,publishAudio:!0,publishVideo:!0,resolution:"640x480",frameRate:30,insertMode:"APPEND",mirror:!1});this.mainStreamManager=e,this.publisher=e,this.session.publish(this.publisher)})).catch((e=>{console.log("There was an error connecting to the session:",e.code,e.message)}))})),window.addEventListener("beforeunload",this.leaveSession)},leaveSession(){this.session&&this.session.disconnect(),this.session=void 0,this.mainStreamManager=void 0,this.publisher=void 0,this.subscribers=[],this.OV=void 0,this.$emit("leave-video"),window.removeEventListener("beforeunload",this.leaveSession)},updateMainVideoStreamManager(e){this.mainStreamManager!==e&&(this.mainStreamManager=e)},getToken(e){return this.createSession(e).then((e=>this.createToken(e)))},createSession(e){return new Promise(((t,n)=>{$().post(`${Me}/openvidu/api/sessions`,JSON.stringify({customSessionId:e}),{auth:{username:"OPENVIDUAPP",password:Ve}}).then((e=>e.data)).then((e=>t(e.id))).catch((i=>{409===i.response.status?t(e):(console.warn(`No connection to OpenVidu Server. This may be a certificate error at ${Me}`),window.confirm(`No connection to OpenVidu Server. This may be a certificate error at ${Me}\n\nClick OK to navigate and accept it. If no certificate warning is shown, then check that your OpenVidu Server is up and running at "${Me}"`)&&location.assign(`${Me}/accept-certificate`),n(i.response))}))}))},createToken(e){return new Promise(((t,n)=>{$().post(`${Me}/openvidu/api/sessions/${e}/connection`,{},{auth:{username:"OPENVIDUAPP",password:Ve}}).then((e=>e.data)).then((e=>t(e.token))).catch((e=>n(e.response)))}))},sendMessage({content:e,to:t}){let n=new Date,i=n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),o={content:e,sender:this.myUserName,time:i};"all"===t&&this.session.signal({data:JSON.stringify(o),to:[],type:"public-chat"}).then((()=>{})).catch((e=>{console.log(e)})),"all"!==t&&this.session.signal({data:JSON.stringify(o),to:[t],type:"private-chat"}).then((()=>{this.$refs.chat.addMessage(JSON.stringify(o),!0,!0)})).catch((e=>{console.log(e)}))},audioOnOff({audio:e}){this.publisher.publishAudio(e)},videoOnOff({video:e}){this.publisher.publishVideo(e)}},computed:(0,G.Se)({wedding:"root/getNowWeddingInfo",guest:"root/getNowGuestInfo"}),mounted(){this.joinSession(this.wedding.weddingNum+this.where)},beforeUnmount(){this.leaveSession()}};const De=(0,se.Z)(Le,[["render",ee]]);var Ae=De;const je={class:"hallvideoguest"},Be={key:0,id:"session"},Ue={class:"hallvideoguest-font",style:{"padding-top":"5rem"},id:"session-title"},Fe={class:"container",style:{"margin-top":"2rem"}},We={id:"video-container",class:"user-list d-flex align-items-start flex-wrap:nowrap",style:{width:"1272px"}},$e={class:"other-list",style:{"margin-left":"2rem"}},He={id:"session-header",style:{"margin-top":"2rem"}},Ge={class:"d-flex"},qe={id:"main-video",class:"d-flex justify-content-center",style:{width:"1000px",height:"600px","margin-left":"auto","margin-right":"auto"}};function ze(e,t,n,o,a,c){const d=(0,i.up)("user-video"),u=(0,i.up)("video-on-off"),l=(0,i.up)("room-chat");return(0,i.wg)(),(0,i.iD)("div",je,[a.session?((0,i.wg)(),(0,i.iD)("div",Be,[(0,i._)("h3",Ue,"신랑 "+(0,r.zw)(e.wedding.weddingManNm)+", 신부 "+(0,r.zw)(e.wedding.weddingWomanNm)+"의 결혼식입니다.",1),(0,i._)("div",Fe,[(0,i._)("div",We,[(0,i.Wm)(d,{class:"small-video","stream-manager":a.mainStreamManager},null,8,["stream-manager"]),(0,i._)("div",$e,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.subscribers,(e=>((0,i.wg)(),(0,i.j4)(d,{style:{"margin-right":"2rem"},class:"small-other-video",key:e.stream.connection.connectionId,"stream-manager":e,onClick:t=>c.updateMainVideoStreamManager(e)},null,8,["stream-manager","onClick"])))),128))])])]),(0,i._)("div",He,[(0,i.Wm)(u,{ref:"video-on-off",onVideoOnOff:c.videoOnOff},null,8,["onVideoOnOff"]),(0,i._)("input",{class:"btn btn-large btn-danger btnExit",type:"button",id:"buttonLeaveSession",onClick:t[0]||(t[0]=(...e)=>c.leaveSession&&c.leaveSession(...e)),value:"나가기"})]),(0,i._)("div",Ge,[(0,i._)("div",qe,[(0,i.Wm)(d,{class:"wedding-video","stream-manager":a.maincompany},null,8,["stream-manager"])]),(0,i.wy)((0,i.Wm)(l,{class:"chatDesign",ref:"chat",onMessage:c.sendMessage,subscribers:a.subscribers},null,8,["onMessage","subscribers"]),[[s.F8,this.disabled]])])])):(0,i.kq)("",!0)])}n(6699);const Je=e=>((0,i.dD)("data-v-f3c1fe68"),e=e(),(0,i.Cn)(),e),Xe={key:0},Ye=(0,i.Uk)("캠 끄기 "),Qe=Je((()=>(0,i._)("svg",{class:"icon icon-videocam"},[(0,i._)("use",{"xlink:href":"#icon-videocam"},[(0,i._)("symbol",{id:"icon-videocam",viewBox:"0 0 24 24"},[(0,i._)("path",{d:"M17.016 10.5l3.984-3.984v10.969l-3.984-3.984v3.516q0 0.422-0.305 0.703t-0.727 0.281h-12q-0.422 0-0.703-0.281t-0.281-0.703v-10.031q0-0.422 0.281-0.703t0.703-0.281h12q0.422 0 0.727 0.281t0.305 0.703v3.516z"})])])],-1))),Ke=[Ye,Qe],Ze={key:1},et=(0,i.Uk)("캠 켜기 "),tt=Je((()=>(0,i._)("svg",{class:"icon icon-videocam_off"},[(0,i._)("use",{"xlink:href":"#icon-videocam_off"},[(0,i._)("symbol",{id:"icon-videocam_off",viewBox:"0 0 24 24"},[(0,i._)("path",{d:"M3.281 2.016l17.719 17.719-1.266 1.266-3.188-3.188q-0.281 0.188-0.563 0.188h-12q-0.422 0-0.703-0.281t-0.281-0.703v-10.031q0-0.422 0.281-0.703t0.703-0.281h0.75l-2.719-2.719zM21 6.516v10.688l-11.203-11.203h6.188q0.422 0 0.727 0.281t0.305 0.703v3.516z"})])])],-1))),nt=[et,tt];function it(e,t,n,o,r,s){return(0,i.wg)(),(0,i.iD)("button",{class:"btn btn-outline-secondary question-font btnGet",onClick:t[0]||(t[0]=(...e)=>o.videoOnOff&&o.videoOnOff(...e))},[o.state.video?((0,i.wg)(),(0,i.iD)("span",Xe,Ke)):(0,i.kq)("",!0),o.state.video?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",Ze,nt))])}var ot={name:"video-on-off",setup(e,{emit:t}){const n=(0,H.qj)({video:!0}),i=()=>{n.video?n.video=!1:n.video=!0,t("videoOnOff",{video:n.video})};return{state:n,videoOnOff:i}}};const rt=(0,se.Z)(ot,[["render",it],["__scopeId","data-v-f3c1fe68"]]);var st=rt;const at=e=>((0,i.dD)("data-v-03368ff8"),e=e(),(0,i.Cn)(),e),ct={key:0},dt=(0,i.Uk)("마이크 끄기 "),ut=at((()=>(0,i._)("svg",{class:"icon icon-microphone"},[(0,i._)("use",{"xlink:href":"#icon-microphone"},[(0,i._)("symbol",{id:"icon-microphone",viewBox:"0 0 18 28"},[(0,i._)("path",{d:"M18 11v2c0 4.625-3.5 8.437-8 8.937v2.063h4c0.547 0 1 0.453 1 1s-0.453 1-1 1h-10c-0.547 0-1-0.453-1-1s0.453-1 1-1h4v-2.063c-4.5-0.5-8-4.312-8-8.937v-2c0-0.547 0.453-1 1-1s1 0.453 1 1v2c0 3.859 3.141 7 7 7s7-3.141 7-7v-2c0-0.547 0.453-1 1-1s1 0.453 1 1zM14 5v8c0 2.75-2.25 5-5 5s-5-2.25-5-5v-8c0-2.75 2.25-5 5-5s5 2.25 5 5z"})])])],-1))),lt=[dt,ut],pt={key:1},ht=(0,i.Uk)("마이크 켜기 "),ft=at((()=>(0,i._)("svg",{class:"icon icon-microphone"},[(0,i._)("use",{"xlink:href":"#icon-microphone-slash"},[(0,i._)("symbol",{id:"icon-microphone-slash",viewBox:"0 0 22 28"},[(0,i._)("path",{d:"M4.234 14.766l-1.578 1.578c-0.422-1.031-0.656-2.156-0.656-3.344v-2c0-0.547 0.453-1 1-1s1 0.453 1 1v2c0 0.609 0.094 1.203 0.234 1.766zM21.641 5.359l-5.641 5.641v2c0 2.75-2.25 5-5 5-0.594 0-1.172-0.109-1.703-0.297l-1.5 1.5c0.953 0.5 2.047 0.797 3.203 0.797 3.859 0 7-3.141 7-7v-2c0-0.547 0.453-1 1-1s1 0.453 1 1v2c0 4.625-3.5 8.437-8 8.937v2.063h4c0.547 0 1 0.453 1 1s-0.453 1-1 1h-10c-0.547 0-1-0.453-1-1s0.453-1 1-1h4v-2.063c-1.328-0.141-2.578-0.594-3.672-1.266l-3.969 3.969c-0.203 0.203-0.516 0.203-0.719 0l-1.281-1.281c-0.203-0.203-0.203-0.516 0-0.719l19.281-19.281c0.203-0.203 0.516-0.203 0.719 0l1.281 1.281c0.203 0.203 0.203 0.516 0 0.719zM15.703 3.297l-9.703 9.703v-8c0-2.75 2.25-5 5-5 2.156 0 4 1.391 4.703 3.297z"})])])],-1))),mt=[ht,ft];function vt(e,t,n,o,r,s){return(0,i.wg)(),(0,i.iD)("button",{class:"btn btn-outline-secondary question-font btnGet",onClick:t[0]||(t[0]=(...e)=>o.audioOnOff&&o.audioOnOff(...e))},[o.state.audio?((0,i.wg)(),(0,i.iD)("span",ct,lt)):(0,i.kq)("",!0),o.state.audio?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",pt,mt))])}var gt={name:"audio-on-off",setup(e,{emit:t}){const n=(0,H.qj)({audio:!0}),i=()=>{n.audio?n.audio=!1:n.audio=!0,t("audioOnOff",{audio:n.audio})};return{state:n,audioOnOff:i}}};const bt=(0,se.Z)(gt,[["render",vt],["__scopeId","data-v-03368ff8"]]);var yt=bt;const Et={ref:"content"},wt={id:"chat-bar-hall",style:{"margin-bottom":"0px"},class:"chatbarSize"},St={key:0,class:"border-r-2 border-sub-200 pr-2"},Ot={class:"flex flex-row-reverse text-end"},It={class:"text-sub-200 text-md ml-2 font-bold"},Ct={class:"d-flex align-items-end justify-content-end",style:{"margin-top":"0.5rem"}},Rt={class:"text-tc-400 text-xs",style:{"font-size":"small","padding-right":"1rem"}},kt={class:"my-text d-flex justify-content-end text-tc-300 text-sm break-all text-right",style:{margin:"0px","max-width":"9rem"}},_t={key:1,class:"border-l-2 border-main-100 pl-2"},xt={class:"flex flex-row text-start"},Nt={class:"text-main-100 text-md mr-2 font-bold"},Pt={class:"d-flex align-items-end justify-content-start",style:{"margin-top":"0.5rem"}},Tt={class:"your-text d-flex justify-content-start text-tc-300 text-sm break-all text-left",style:{margin:"0px","max-width":"9rem"}},Mt={class:"text-tc-400 text-xs",style:{"font-size":"small","padding-left":"1rem"}},Vt={class:"flex flex-col items-start w-full mt-8"},Lt={class:"d-flex",style:{height:"3rem"}};function Dt(e,t,n,o,a,c){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Et,[(0,i._)("ul",wt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.state.chats,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{class:"flex flex-col mb-2",style:{"padding-right":"1rem"},key:t},[e.isMyMessage?((0,i.wg)(),(0,i.iD)("div",St,[(0,i._)("div",Ot,[(0,i._)("span",It,(0,r.zw)(e.userId),1)]),(0,i._)("div",Ct,[(0,i._)("span",Rt,(0,r.zw)(e.time),1),(0,i._)("p",kt,(0,r.zw)(" "+e.content+" "),1)])])):((0,i.wg)(),(0,i.iD)("div",_t,[(0,i._)("div",xt,[(0,i._)("span",Nt,(0,r.zw)(e.userId),1)]),(0,i._)("div",Pt,[(0,i._)("p",Tt,(0,r.zw)(" "+e.content+" "),1),(0,i._)("span",Mt,(0,r.zw)(e.time),1)])]))])))),128))]),(0,i._)("div",Vt,[(0,i._)("div",Lt,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.state.message=e),onKeydown:t[1]||(t[1]=(0,s.D2)(((...e)=>o.sendMessage&&o.sendMessage(...e)),["enter"])),class:"w-5/6 border-2 border-main-100 text-xs focus:border-main-100 focus:border-2 resize-none",cols:"",rows:"2",placeholder:"보낼 메세지를 입력하세요"},null,544),[[s.nr,o.state.message]]),(0,i._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[2]||(t[2]=e=>o.sendMessage())},"전송")])])],512)])}var At={props:{subscribers:Object},setup(e,{emit:t}){const n=(0,G.oR)(),o=(0,H.qj)({selectedUser:"all",message:"",subscribers:e.subscribers,chats:[],guestInfo:(0,i.Fl)((()=>n.getters["root/getNowGuestInfo"])),badwords:["시발","좆같네","미친","새끼","바보야"]}),r=()=>{let e=o.message.trim(),n=o.message.split(" ");n.forEach((function(t){o.badwords.includes(t)&&(alert("바른말 고운말을 사용하자"),e="",o.message="")})),""!==e&&(t("message",{content:e,to:o.selectedUser}),event.preventDefault(),o.message="")},s=async(e,n,i)=>{let r=JSON.parse(e);i&&(r.content+=" (private)");let s=document.getElementById("chat-bar-hall"),a=s.scrollHeight-s.scrollTop<=s.clientHeight+2;await o.chats.push({userId:r.sender.split("hall")[1],time:r.time,content:r.content,isMyMessage:n}),a&&s.scrollTo({top:s.scrollHeight,behavior:"smooth"});const c=r.content.split("꽖쀓")[0],d=r.content.split("꽖쀓")[1],u=r.content.split("꽖쀓")[2];"come"===c&&u?u===o.guestInfo.guestGroup+" "+o.guestInfo.guestName&&t("come-man-video",d):"go"===c&&u&&u===o.guestInfo.guestGroup+" "+o.guestInfo.guestName&&t("go-man-video")};return{state:o,sendMessage:r,addMessage:s}}};const jt=(0,se.Z)(At,[["render",Dt],["__scopeId","data-v-c72ebbda"]]);var Bt=jt;$().defaults.headers.post["Content-Type"]="application/json";const Ut="https://"+location.hostname+":"+{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_OPENVIDU_PORT,Ft="MY_SECRET";var Wt={name:"hall-guest",props:{where:String},components:{UserVideo:le,VideoOnOff:st,AudioOnOff:yt,RoomChat:Bt},data(){return{OV:void 0,session:void 0,mainStreamManager:void 0,publisher:void 0,subscribers:[],maincompany:void 0,is_maincompany:!1,disabled:!0,mySessionId:"",myUserName:""}},methods:{joinSession(e){this.mySessionId=e,this.myUserName=e+this.guest.guestGroup+" "+this.guest.guestName,this.OV=new q.Dn,this.session=this.OV.initSession(),this.session.on("streamCreated",(({stream:e})=>{const t=this.session.subscribe(e);this.subscribers.push(t),this.is_maincompany||this.subscribers.forEach((e=>{if(e.stream.connection.data.includes("Company")){this.maincompany=e,this.is_maincompany=!0;const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}}))})),this.session.on("streamDestroyed",(({stream:e})=>{const t=this.subscribers.indexOf(e.streamManager,0);t>=0&&this.subscribers.splice(t,1)})),this.session.on("exception",(({exception:e})=>{console.warn(e)})),this.session.on("signal:public-chat",(e=>{this.$refs.chat.addMessage(e.data,JSON.parse(e.data).sender===this.myUserName,!1)})),this.session.on("signal:private-chat",(e=>{this.$refs.chat.addMessage(e.data,!1,!0)})),this.getToken(e+this.mySessionId).then((e=>{this.session.connect(e,{clientData:this.myUserName}).then((()=>{let e=this.OV.initPublisher(void 0,{audioSource:void 0,videoSource:void 0,publishAudio:!1,publishVideo:!0,resolution:"640x480",frameRate:30,insertMode:"APPEND",mirror:!1});this.mainStreamManager=e,this.publisher=e,this.session.publish(this.publisher)})).catch((e=>{console.log("There was an error connecting to the session:",e.code,e.message)}))})),window.addEventListener("beforeunload",this.leaveSession)},leaveSession(){this.session&&this.session.disconnect(),this.session=void 0,this.mainStreamManager=void 0,this.publisher=void 0,this.subscribers=[],this.OV=void 0,this.$emit("leave-video"),window.removeEventListener("beforeunload",this.leaveSession)},updateMainVideoStreamManager(e){this.mainStreamManager!==e&&(this.mainStreamManager=e)},getToken(e){return this.createSession(e).then((e=>this.createToken(e)))},createSession(e){return new Promise(((t,n)=>{$().post(`${Ut}/openvidu/api/sessions`,JSON.stringify({customSessionId:e}),{auth:{username:"OPENVIDUAPP",password:Ft}}).then((e=>e.data)).then((e=>t(e.id))).catch((i=>{409===i.response.status?t(e):(console.warn(`No connection to OpenVidu Server. This may be a certificate error at ${Ut}`),window.confirm(`No connection to OpenVidu Server. This may be a certificate error at ${Ut}\n\nClick OK to navigate and accept it. If no certificate warning is shown, then check that your OpenVidu Server is up and running at "${Ut}"`)&&location.assign(`${Ut}/accept-certificate`),n(i.response))}))}))},createToken(e){return new Promise(((t,n)=>{$().post(`${Ut}/openvidu/api/sessions/${e}/connection`,{},{auth:{username:"OPENVIDUAPP",password:Ft}}).then((e=>e.data)).then((e=>t(e.token))).catch((e=>n(e.response)))}))},sendMessage({content:e,to:t}){let n=new Date,i=n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),o={content:e,sender:this.myUserName,time:i};"all"===t&&this.session.signal({data:JSON.stringify(o),to:[],type:"public-chat"}).then((()=>{})).catch((e=>{console.log(e)})),"all"!==t&&this.session.signal({data:JSON.stringify(o),to:[t],type:"private-chat"}).then((()=>{this.$refs.chat.addMessage(JSON.stringify(o),!0,!0)})).catch((e=>{console.log(e)}))},audioOnOff({audio:e}){this.publisher.publishAudio(e)},videoOnOff({video:e}){this.publisher.publishVideo(e)}},computed:(0,G.Se)({wedding:"root/getNowWeddingInfo",guest:"root/getNowGuestInfo"}),mounted(){this.joinSession(this.wedding.weddingNum+this.where)},beforeUnmount(){this.leaveSession()}};const $t=(0,se.Z)(Wt,[["render",ze],["__scopeId","data-v-71045c04"]]);var Ht=$t;const Gt=e=>((0,i.dD)("data-v-5e0a2d32"),e=e(),(0,i.Cn)(),e),qt={class:"absolute flex top-0 h-screen z-20 right-0 flex-row border-l border-main-100"},zt={ref:"content",class:"transition-all pt-16 pb-12 px-8 w-80 duration-700 bg-main-300 overflow-hidden flex flex-col items-center justify-between"},Jt={id:"chat-bar"},Xt={key:0,class:"border-r-2 border-sub-200 pr-2"},Yt={class:"flex flex-row-reverse items-center"},Qt=Gt((()=>(0,i._)("span",{class:"text-sub-200 text-md ml-2 font-bold"},"Me",-1))),Kt={class:"text-tc-400 text-xs"},Zt={class:"text-tc-300 text-sm break-all text-right"},en={key:1,class:"border-l-2 border-main-100 pl-2"},tn={class:"flex flex-row items-center"},nn={class:"text-main-100 text-md mr-2 font-bold"},on={class:"text-tc-400 text-xs"},rn={class:"text-tc-300 text-sm break-all text-left"},sn={class:"flex flex-col items-start w-full mt-8"},an={class:"relative inline-flex border-3 rounded-lg border-main-100 w-1/2 mb-4 h-7 p-0"},cn=Gt((()=>(0,i._)("option",{selected:"selected",value:"all"},"all",-1))),dn=["value"],un={class:"w-full p-0 flex flex-row justify-between items-center"};function ln(e,t,n,o,a,c){return(0,i.wg)(),(0,i.iD)("div",qt,[(0,i._)("div",zt,[(0,i._)("ul",Jt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.state.chats,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{class:"flex flex-col mb-2",key:t},[e.isMyMessage?((0,i.wg)(),(0,i.iD)("div",Xt,[(0,i._)("div",Yt,[Qt,(0,i._)("span",Kt,(0,r.zw)(e.time),1)]),(0,i._)("div",null,[(0,i._)("p",Zt,(0,r.zw)(e.content),1)])])):((0,i.wg)(),(0,i.iD)("div",en,[(0,i._)("div",tn,[(0,i._)("span",nn,(0,r.zw)(e.userId),1),(0,i._)("span",on,(0,r.zw)(e.time),1)]),(0,i._)("div",null,[(0,i._)("p",rn,(0,r.zw)(e.content),1)])]))])))),128))]),(0,i._)("div",sn,[(0,i._)("div",an,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.state.selectedUser=e),class:"cursor-pointer font-bold px-4 py-0 text-sm form-select border-0 rounded-md text-gray-600 w-full h-5-5 border-transparent focus:border-transparent focus:ring-0 appearance-none"},[cn,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.state.subscribers,((e,t)=>((0,i.wg)(),(0,i.iD)("option",{value:e.stream.connection,key:t},(0,r.zw)(JSON.parse(e.stream.connection.data).clientData),9,dn)))),128))],512),[[s.bM,o.state.selectedUser]])]),(0,i._)("div",un,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.state.message=e),onKeydown:t[2]||(t[2]=(0,s.D2)(((...e)=>o.sendMessage&&o.sendMessage(...e)),["enter"])),class:"w-5/6 border-2 border-main-100 text-xs focus:border-main-100 focus:border-2 resize-none",cols:"",rows:"2"},null,544),[[s.nr,o.state.message]]),(0,i._)("button",{onClick:t[3]||(t[3]=e=>o.sendMessage())},"메세지보내기rrrrr")])])],512)])}var pn={props:{subscribers:Object},setup(e,{emit:t}){const n=(0,G.oR)(),o=(0,H.qj)({selectedUser:"all",message:"",subscribers:e.subscribers,chats:[],guestInfo:(0,i.Fl)((()=>n.getters["root/getNowGuestInfo"])),badwords:["시발","좆같네","미친","새끼"]}),r=()=>{let e=o.message.trim(),n=o.message.split(" ");n.forEach((function(t){o.badwords.includes(t)&&(alert("바른말 고운말을 사용하자"),e="",o.message="")})),""!==e&&(t("message",{content:e,to:o.selectedUser}),event.preventDefault(),o.message="")},s=async(e,n,i)=>{let r=JSON.parse(e);n&&(r.sender+=" (You)"),i&&(r.content+=" (private)"),await o.chats.push({userId:r.sender,time:r.time,content:r.content,isMyMessage:n});const s=r.content.split("꽖쀓")[0],a=r.content.split("꽖쀓")[1],c=r.content.split("꽖쀓")[2];"come"===s&&c?c===o.guestInfo.guestGroup+" "+o.guestInfo.guestName&&t("come-man-video",a):"go"===s&&c&&c===o.guestInfo.guestGroup+" "+o.guestInfo.guestName&&t("go-man-video")};return{state:o,sendMessage:r,addMessage:s}}};const hn=(0,se.Z)(pn,[["render",ln],["__scopeId","data-v-5e0a2d32"]]);var fn=hn;const mn={style:{"background-color":"#f0ebe7",height:"50rem"}},vn={key:0,style:{"padding-top":"5rem"}},gn=(0,i._)("h3",{style:{"padding-top":"5rem",display:"inline"},class:"waitingguest-font"},"어서오세요, ",-1),bn={style:{display:"inline"},class:"waitingguest-font"},yn=(0,i._)("h3",{style:{display:"inline"},class:"waitingguest-font"}," 님 ",-1),En=(0,i._)("div",{style:{"margin-top":"3rem"}},[(0,i._)("h3",{class:"waitingguest-font",style:{display:"inline"}},"하객끼리의 소통을 위한 공간입니다")],-1),wn=(0,i._)("div",{style:{"margin-top":"3rem"}},[(0,i._)("h3",{class:"waitingguest-font"},"참가하고 싶은 방을 눌러주세요")],-1),Sn={class:"text-center",style:{"margin-top":"3rem"}},On={class:"text-center",style:{"margin-top":"1rem"}},In={style:{"margin-top":"3rem"}},Cn=(0,i.uE)('<div style="width:40rem;margin:auto;margin-top:3rem;" id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel"><div class="carousel-inner"><div class="carousel-item active"><img src="'+a+'" class="d-block w-100" alt="..."></div><div class="carousel-item"><img src="'+c+'" class="d-block w-100" alt="..."></div><div class="carousel-item"><img src="'+d+'" class="d-block w-100" alt="..."></div></div><button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev"><span class="carousel-control-prev-icon" aria-hidden="true"></span><span class="visually-hidden">Previous</span></button><button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next"><span class="carousel-control-next-icon" aria-hidden="true"></span><span class="visually-hidden">Next</span></button></div>',1);function Rn(e,t,n,o,s,a){const c=(0,i.up)("guest-to-guest-video");return(0,i.wg)(),(0,i.iD)("div",mn,[o.state.room?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",vn,[(0,i._)("div",null,[gn,(0,i._)("h2",bn,(0,r.zw)(o.state.guestInfo.guestName)+"("+(0,r.zw)(o.state.guestInfo.guestGroup)+")",1),yn]),En,wn,(0,i._)("div",Sn,[(0,i._)("button",{style:{"margin-left":"1rem"},type:"button",class:"btn btn-outline-secondary",onClick:t[0]||(t[0]=e=>o.clickButton("1"))},"신부 친구 1방"),(0,i._)("button",{style:{"margin-left":"1rem"},type:"button",class:"btn btn-outline-secondary",onClick:t[1]||(t[1]=e=>o.clickButton("2"))},"신부 친구 2방"),(0,i._)("button",{style:{"margin-left":"1rem"},type:"button",class:"btn btn-outline-secondary",onClick:t[2]||(t[2]=e=>o.clickButton("3"))},"신부 친구 3방")]),(0,i._)("div",On,[(0,i._)("button",{style:{"margin-left":"1rem"},type:"button",class:"btn btn-outline-secondary",onClick:t[3]||(t[3]=e=>o.clickButton("4"))},"신랑 친구 1방"),(0,i._)("button",{style:{"margin-left":"1rem"},type:"button",class:"btn btn-outline-secondary",onClick:t[4]||(t[4]=e=>o.clickButton("5"))},"신랑 친구 2방"),(0,i._)("button",{style:{"margin-left":"1rem"},type:"button",class:"btn btn-outline-secondary",onClick:t[5]||(t[5]=e=>o.clickButton("6"))},"신랑 친구 3방")]),(0,i._)("div",In,[(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:t[6]||(t[6]=(...e)=>o.clickExit&&o.clickExit(...e))},"돌아가기")]),Cn])),o.state.room?((0,i.wg)(),(0,i.j4)(c,{key:1,room:o.state.room,onLeaveGuestRoom:o.leaveGuestRoom},null,8,["room","onLeaveGuestRoom"])):(0,i.kq)("",!0)])}const kn={class:"hallvideoguest"},_n={key:0,id:"session"},xn={id:"session-header"},Nn={style:{"padding-top":"5rem","margin-bottom":"2rem"},id:"session-title"},Pn={class:"container"},Tn={class:"left"},Mn={class:"container",style:{"margin-top":"2rem"}},Vn={id:"video-container",class:"row row-cols-3"},Ln={class:"right"};function Dn(e,t,n,o,a,c){const d=(0,i.up)("on-off"),u=(0,i.up)("guest-to-guest-user-video"),l=(0,i.up)("room-chat");return(0,i.wg)(),(0,i.iD)("div",kn,[a.session?((0,i.wg)(),(0,i.iD)("div",_n,[(0,i._)("div",xn,[(0,i._)("h1",Nn,(0,r.zw)(a.roomName),1),(0,i.Wm)(d,{ref:"on-off",onAudioOnOff:c.audioOnOff,onVideoOnOff:c.videoOnOff},null,8,["onAudioOnOff","onVideoOnOff"]),(0,i._)("input",{class:"btn btn-large btn-danger btnExit",type:"button",id:"buttonLeaveSession",onClick:t[0]||(t[0]=(...e)=>c.leaveSession&&c.leaveSession(...e)),value:"나가기"})])])):(0,i.kq)("",!0),(0,i._)("div",Pn,[(0,i._)("div",Tn,[(0,i._)("div",Mn,[(0,i._)("div",Vn,[(0,i.Wm)(u,{class:"small-video","stream-manager":a.mainStreamManager,style:{"margin-bottom":"0rem"}},null,8,["stream-manager"]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.subscribers,(e=>((0,i.wg)(),(0,i.j4)(u,{style:{"margin-bottom":"0rem"},class:"small-video",key:e.stream.connection.connectionId,"stream-manager":e,onClick:t=>c.updateMainVideoStreamManager(e)},null,8,["stream-manager","onClick"])))),128))])])]),(0,i._)("div",Ln,[(0,i.wy)((0,i.Wm)(l,{style:{"margin-top":"2rem"},class:"chatDesign",ref:"chat",onMessage:c.sendMessage,subscribers:a.subscribers},null,8,["onMessage","subscribers"]),[[s.F8,this.disabled]])])])])}const An={key:0},jn={style:{"marign-bottom":"1rem"}};function Bn(e,t,n,o,s,a){const c=(0,i.up)("ov-video");return n.streamManager?((0,i.wg)(),(0,i.iD)("div",An,[(0,i._)("div",null,[(0,i.Wm)(c,{"stream-manager":n.streamManager},null,8,["stream-manager"]),(0,i._)("p",jn,(0,r.zw)(a.clientData),1)])])):(0,i.kq)("",!0)}var Un={name:"GuestToGuestUserVideo",components:{OvVideo:ce},props:{streamManager:Object},computed:{clientData(){const{clientData:e}=this.getConnectionData();return e}},methods:{getConnectionData(){const{connection:e}=this.streamManager.stream;return JSON.parse(e.data)}}};const Fn=(0,se.Z)(Un,[["render",Bn]]);var Wn=Fn;const $n=e=>((0,i.dD)("data-v-44aead2c"),e=e(),(0,i.Cn)(),e),Hn={ref:"content"},Gn={id:"chat-bar-hall",style:{"margin-bottom":"0px"},class:"chatbarSize"},qn={key:0,class:"border-r-2 border-sub-200 pr-2"},zn={class:"flex flex-row-reverse text-end"},Jn={class:"text-sub-200 text-md-right ml-2 font-bold"},Xn={class:"d-flex align-items-end justify-content-end",style:{"margin-top":"0.5rem"}},Yn={class:"text-tc-400 text-xs",style:{"font-size":"small","padding-right":"1rem"}},Qn={class:"my-text d-flex justify-content-end text-tc-300 text-sm break-all text-right",style:{margin:"0px","max-width":"16rem"}},Kn={key:1,class:"border-l-2 border-main-100 pl-2"},Zn={class:"flex flex-row text-start"},ei={class:"text-main-100 text-md mr-2 font-bold"},ti={class:"d-flex align-items-end justify-content-start",style:{"margin-top":"0.5rem"}},ni={class:"your-text d-flex justify-content-start text-tc-300 text-sm break-all text-left",style:{margin:"0px","max-width":"16rem"}},ii={class:"text-tc-400 text-xs",style:{"font-size":"small","padding-left":"1rem"}},oi={class:"flex flex-col items-start w-full mt-8"},ri={class:"relative inline-flex border-3 rounded-lg border-main-100 w-1/2 mb-4 h-7 p-0"},si=$n((()=>(0,i._)("option",{selected:"selected",value:"all"},"all",-1))),ai=["value"],ci={class:"d-flex",style:{height:"3rem width:30rem"}};function di(e,t,n,o,a,c){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Hn,[(0,i._)("ul",Gn,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.state.chats,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{class:"flex flex-col mb-2",style:{"padding-right":"1rem"},key:t},[e.isMyMessage?((0,i.wg)(),(0,i.iD)("div",qn,[(0,i._)("div",zn,[(0,i._)("span",Jn,(0,r.zw)(e.userId),1)]),(0,i._)("div",Xn,[(0,i._)("span",Yn,(0,r.zw)(e.time),1),(0,i._)("p",Qn,(0,r.zw)(" "+e.content+" "),1)])])):((0,i.wg)(),(0,i.iD)("div",Kn,[(0,i._)("div",Zn,[(0,i._)("span",ei,(0,r.zw)(e.userId),1)]),(0,i._)("div",ti,[(0,i._)("p",ni,(0,r.zw)(" "+e.content+" "),1),(0,i._)("span",ii,(0,r.zw)(e.time),1)])]))])))),128))]),(0,i._)("div",oi,[(0,i._)("div",ri,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.state.selectedUser=e),class:"cursor-pointer font-bold px-4 py-0 text-sm form-select border-0 rounded-md text-gray-600 w-full h-5-5 border-transparent focus:border-transparent focus:ring-0 appearance-none"},[si,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.state.subscribers,((e,t)=>((0,i.wg)(),(0,i.iD)("option",{value:e.stream.connection,key:t},(0,r.zw)(JSON.parse(e.stream.connection.data).clientData),9,ai)))),128))],512),[[s.bM,o.state.selectedUser]])]),(0,i._)("div",ci,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.state.message=e),onKeydown:t[2]||(t[2]=(0,s.D2)(((...e)=>o.sendMessage&&o.sendMessage(...e)),["enter"])),class:"w-5/6 border-2 border-main-100 text-xs focus:border-main-100 focus:border-2 resize-none",cols:"",rows:"2",style:{width:"25rem"},placeholder:"보낼 메세지를 입력하세요"},null,544),[[s.nr,o.state.message]]),(0,i._)("button",{type:"button",class:"btn btn-outline-secondary",style:{width:"5rem"},onClick:t[3]||(t[3]=e=>o.sendMessage())},"전송")])])],512)])}var ui={props:{subscribers:Object},setup(e,{emit:t}){const n=(0,G.oR)(),o=(0,H.qj)({selectedUser:"all",message:"",subscribers:e.subscribers,chats:[],guestInfo:(0,i.Fl)((()=>n.getters["root/getNowGuestInfo"])),badwords:["시발","좆같네","미친","새끼"]}),r=()=>{let e=o.message.trim(),n=o.message.split(" ");n.forEach((function(t){o.badwords.includes(t)&&(alert("바른말 고운말을 사용하자"),e="",o.message="")})),""!==e&&(t("message",{content:e,to:o.selectedUser}),event.preventDefault(),o.message="")},s=async(e,n,i)=>{let r=JSON.parse(e);i&&(r.content="(개인 메세지) "+r.content);let s=document.getElementById("chat-bar-hall"),a=s.scrollHeight-s.scrollTop<=s.clientHeight+2;await o.chats.push({userId:r.sender,time:r.time,content:r.content,isMyMessage:n}),a&&s.scrollTo({top:s.scrollHeight,behavior:"smooth"});const c=r.content.split("꽖쀓")[0],d=r.content.split("꽖쀓")[1],u=r.content.split("꽖쀓")[2];"come"===c&&u?u===o.guestInfo.guestGroup+" "+o.guestInfo.guestName&&t("come-man-video",d):"go"===c&&u&&u===o.guestInfo.guestGroup+" "+o.guestInfo.guestName&&t("go-man-video")};return{state:o,sendMessage:r,addMessage:s}}};const li=(0,se.Z)(ui,[["render",di],["__scopeId","data-v-44aead2c"]]);var pi=li;$().defaults.headers.post["Content-Type"]="application/json";const hi="https://"+location.hostname+":"+{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_OPENVIDU_PORT,fi="MY_SECRET";var mi={props:{room:String},components:{GuestToGuestUserVideo:Wn,OnOff:Te,RoomChat:pi},data(){return{OV:void 0,session:void 0,mainStreamManager:void 0,publisher:void 0,subscribers:[],disabled:!0,mySessionId:"",myUserName:"",roomName:""}},methods:{joinSession(e){this.mySessionId=e,this.myUserName=this.guest.guestGroup+" "+this.guest.guestName,this.OV=new q.Dn,this.session=this.OV.initSession(),this.session.on("streamCreated",(({stream:e})=>{const t=this.session.subscribe(e);this.subscribers.push(t)})),this.session.on("streamDestroyed",(({stream:e})=>{const t=this.subscribers.indexOf(e.streamManager,0);t>=0&&this.subscribers.splice(t,1)})),this.session.on("exception",(({exception:e})=>{console.warn(e)})),this.session.on("signal:public-chat",(e=>{this.$refs.chat.addMessage(e.data,JSON.parse(e.data).sender===this.myUserName,!1)})),this.session.on("signal:private-chat",(e=>{this.$refs.chat.addMessage(e.data,!1,!0)})),this.getToken(e+this.mySessionId).then((e=>{this.session.connect(e,{clientData:this.myUserName}).then((()=>{let e=this.OV.initPublisher(void 0,{audioSource:void 0,videoSource:void 0,publishAudio:!0,publishVideo:!0,resolution:"640x480",frameRate:30,insertMode:"APPEND",mirror:!1});this.mainStreamManager=e,this.publisher=e,this.session.publish(this.publisher)})).catch((e=>{console.log("There was an error connecting to the session:",e.code,e.message)}))})),window.addEventListener("beforeunload",this.leaveSession)},leaveSession(){this.session&&this.session.disconnect(),this.session=void 0,this.mainStreamManager=void 0,this.publisher=void 0,this.subscribers=[],this.OV=void 0,this.$emit("leave-guest-room"),window.removeEventListener("beforeunload",this.leaveSession)},updateMainVideoStreamManager(e){this.mainStreamManager!==e&&(this.mainStreamManager=e)},getToken(e){return this.createSession(e).then((e=>this.createToken(e)))},createSession(e){return new Promise(((t,n)=>{$().post(`${hi}/openvidu/api/sessions`,JSON.stringify({customSessionId:e}),{auth:{username:"OPENVIDUAPP",password:fi}}).then((e=>e.data)).then((e=>t(e.id))).catch((i=>{409===i.response.status?t(e):(console.warn(`No connection to OpenVidu Server. This may be a certificate error at ${hi}`),window.confirm(`No connection to OpenVidu Server. This may be a certificate error at ${hi}\n\nClick OK to navigate and accept it. If no certificate warning is shown, then check that your OpenVidu Server is up and running at "${hi}"`)&&location.assign(`${hi}/accept-certificate`),n(i.response))}))}))},createToken(e){return new Promise(((t,n)=>{$().post(`${hi}/openvidu/api/sessions/${e}/connection`,{},{auth:{username:"OPENVIDUAPP",password:fi}}).then((e=>e.data)).then((e=>t(e.token))).catch((e=>n(e.response)))}))},sendMessage({content:e,to:t}){let n=new Date,i=n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),o={content:e,sender:this.myUserName,time:i};"all"===t&&this.session.signal({data:JSON.stringify(o),to:[],type:"public-chat"}).then((()=>{})).catch((e=>{console.log(e)})),"all"!==t&&this.session.signal({data:JSON.stringify(o),to:[t],type:"private-chat"}).then((()=>{this.$refs.chat.addMessage(JSON.stringify(o),!0,!0)})).catch((e=>{console.log(e)}))},audioOnOff({audio:e}){this.publisher.publishAudio(e)},videoOnOff({video:e}){this.publisher.publishVideo(e)},setRoomName(){switch(this.room){case"1":this.roomName="신부 친구 1방";break;case"2":this.roomName="신부 친구 2방";break;case"3":this.roomName="신부 친구 3방";break;case"4":this.roomName="신랑 친구 1방";break;case"5":this.roomName="신랑 친구 2방";break;case"6":this.roomName="신랑 친구 3방";break}}},computed:(0,G.Se)({wedding:"root/getNowWeddingInfo",guest:"root/getNowGuestInfo"}),mounted(){this.joinSession(`${this.wedding.weddingNum}guestRoom${this.room}`),this.setRoomName()},beforeUnmount(){this.leaveSession()}};const vi=(0,se.Z)(mi,[["render",Dn],["__scopeId","data-v-775df6bf"]]);var gi=vi,bi={components:{GuestToGuestVideo:gi},setup(e,{emit:t}){const n=(0,G.oR)(),o=(0,H.qj)({room:!1,guestInfo:(0,i.Fl)((()=>n.getters["root/getNowGuestInfo"]))}),r=function(e){o.room=e},s=function(){o.room=!1},a=function(){t("click-exit")};return{state:o,clickButton:r,leaveGuestRoom:s,clickExit:a}}};const yi=(0,se.Z)(bi,[["render",Rn]]);var Ei=yi;$().defaults.headers.post["Content-Type"]="application/json";const wi="https://"+location.hostname+":"+{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_OPENVIDU_PORT,Si="MY_SECRET";var Oi={name:"waiting-room",components:{ManVideo:Ae,HallVideo:Ht,RoomChat:fn,GuestToGuest:Ei},data(){return{OV:void 0,session:void 0,mainStreamManager:void 0,publisher:void 0,subscribers:[],disabled:!1,mySessionId:"",myUserName:"",where:!1}},methods:{clickButton1(e){this.where=e},clickButton(e){this.sendMessage({content:"in꽖쀓"+e+"꽖쀓"+this.guestInfo.guestGroup+" "+this.guestInfo.guestName,to:"all"})},leaveVideo(){this.where=!1},comeManVideo(e){this.where=e},outFirstMan(e){this.sendMessage({content:"out꽖쀓"+e+"꽖쀓"+this.guestInfo.guestGroup+" "+this.guestInfo.guestName,to:"all"})},goManVideo(){this.where=!1},joinSession(e){this.mySessionId=e,this.myUserName=e+this.guestInfo.guestGroup+this.guestInfo.guestName,this.OV=new q.Dn,this.session=this.OV.initSession(),this.session.on("streamCreated",(({stream:e})=>{const t=this.session.subscribe(e);this.subscribers.push(t)})),this.session.on("streamDestroyed",(({stream:e})=>{const t=this.subscribers.indexOf(e.streamManager,0);t>=0&&this.subscribers.splice(t,1)})),this.session.on("exception",(({exception:e})=>{console.warn(e)})),this.session.on("signal:public-chat",(e=>{this.$refs.chat.addMessage(e.data,JSON.parse(e.data).sender===this.myUserName,!1)})),this.session.on("signal:private-chat",(e=>{this.$refs.chat.addMessage(e.data,!1,!0)})),this.getToken(e+this.mySessionId).then((e=>{this.session.connect(e,{clientData:this.myUserName}).then((()=>{let e=this.OV.initPublisher(void 0,{audioSource:void 0,videoSource:void 0,publishAudio:!0,publishVideo:!0,resolution:"640x480",frameRate:30,insertMode:"APPEND",mirror:!1});this.mainStreamManager=e,this.publisher=e,this.session.publish(this.publisher)})).catch((e=>{console.log("There was an error connecting to the session:",e.code,e.message)}))})),window.addEventListener("beforeunload",this.leaveSession)},leaveSession(){this.session&&this.session.disconnect(),this.session=void 0,this.mainStreamManager=void 0,this.publisher=void 0,this.subscribers=[],this.OV=void 0,window.removeEventListener("beforeunload",this.leaveSession)},updateMainVideoStreamManager(e){this.mainStreamManager!==e&&(this.mainStreamManager=e)},getToken(e){return this.createSession(e).then((e=>this.createToken(e)))},createSession(e){return new Promise(((t,n)=>{$().post(`${wi}/openvidu/api/sessions`,JSON.stringify({customSessionId:e}),{auth:{username:"OPENVIDUAPP",password:Si}}).then((e=>e.data)).then((e=>t(e.id))).catch((i=>{409===i.response.status?t(e):(console.warn(`No connection to OpenVidu Server. This may be a certificate error at ${wi}`),window.confirm(`No connection to OpenVidu Server. This may be a certificate error at ${wi}\n\nClick OK to navigate and accept it. If no certificate warning is shown, then check that your OpenVidu Server is up and running at "${wi}"`)&&location.assign(`${wi}/accept-certificate`),n(i.response))}))}))},createToken(e){return new Promise(((t,n)=>{$().post(`${wi}/openvidu/api/sessions/${e}/connection`,{},{auth:{username:"OPENVIDUAPP",password:Si}}).then((e=>e.data)).then((e=>t(e.token))).catch((e=>n(e.response)))}))},sendMessage({content:e,to:t}){let n=new Date,i=n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),o={content:e,sender:this.myUserName,time:i};"all"===t&&this.session.signal({data:JSON.stringify(o),to:[],type:"public-chat"}).then((()=>{})).catch((e=>{console.log(e)})),"all"!==t&&this.session.signal({data:JSON.stringify(o),to:[t],type:"private-chat"}).then((()=>{this.$refs.chat.addMessage(JSON.stringify(o),!0,!0)})).catch((e=>{console.log(e)}))},audioOnOff({audio:e}){this.publisher.publishAudio(e)},videoOnOff({video:e}){this.publisher.publishVideo(e)}},computed:(0,G.Se)({wedding:"root/getNowWeddingInfo",guestInfo:"root/getNowGuestInfo"}),mounted(){this.joinSession(this.wedding.weddingNum+"waiting")},beforeUnmount(){this.leaveSession()},setup(){const e=(0,G.oR)(),t=(0,H.qj)({guestBook:"",weddingImages:[],activeWeddingImage:"",wedding_manNm:(0,i.Fl)((()=>e.getters["root/getNowWeddingInfo"].weddingManNm)),weddingNum:(0,i.Fl)((()=>e.getters["root/getNowWeddingInfo"].weddingNum)),wedding_womanNm:(0,i.Fl)((()=>e.getters["root/getNowWeddingInfo"].weddingWomanNm))}),n=function(){e.dispatch("root/requestGuestBook",t.weddingNum).then((e=>{t.guestBook=e.data})).catch((e=>{console.log(e)}))},o=function(){e.dispatch("root/requestWeddingImageList",{wedding_manNm:t.wedding_manNm,wedding_num:t.weddingNum,wedding_womanNm:t.wedding_womanNm}).then((e=>{if(e.data)for(let n in e.data)"1"===n?t.activeWeddingImage=`https://i7e206.p.ssafy.io/api/v1/image/${e.data[n]}`:t.weddingImages.push(`https://i7e206.p.ssafy.io/api/v1/image/${e.data[n]}`)})).catch((e=>{console.log(e)}))};return(0,i.bv)((()=>{n(),o()})),{state:t,reloadGuestBook:n}}};const Ii=(0,se.Z)(Oi,[["render",F],["__scopeId","data-v-93192dd4"]]);var Ci=Ii,Ri=n(3979);const ki=e=>((0,i.dD)("data-v-a8f3f950"),e=e(),(0,i.Cn)(),e),_i={style:{"background-color":"#f0ebe7"}},xi={id:"main-container",class:"container",style:{height:"55rem"}},Ni={key:0,class:"card",style:{width:"30rem",height:"45rem","margin-top":"5rem"}},Pi=ki((()=>(0,i._)("img",{src:Ri,class:"card-img-top",alt:"..."},null,-1))),Ti={class:"card-body"},Mi=ki((()=>(0,i._)("p",{class:"card-text waiting-font"},"두 사람이 만나 하나의 매듭이 되고",-1))),Vi=ki((()=>(0,i._)("p",{class:"card-text waiting-font"},"하나의 길이 되어",-1))),Li=ki((()=>(0,i._)("p",{class:"card-text waiting-font"},"하나의 보금자리를 이루려 합니다",-1))),Di=ki((()=>(0,i._)("p",{class:"card-text waiting-font"},"변함없는 믿음과 사랑으로 축복해 주십시오",-1))),Ai={class:"card-text waiting-font"},ji={class:"card-text waiting-font"},Bi=ki((()=>(0,i._)("br",null,null,-1)));function Ui(e,t,n,o,a,c){const d=(0,i.up)("room-chat"),u=(0,i.up)("man-video"),l=(0,i.up)("hall-video");return(0,i.wg)(),(0,i.iD)("div",_i,[(0,i._)("div",xi,[a.where?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Ni,[Pi,(0,i._)("div",Ti,[Mi,Vi,Li,Di,(0,i._)("p",Ai,"신랑 : "+(0,r.zw)(e.wedding.weddingManNm),1),(0,i._)("p",ji,"신부 : "+(0,r.zw)(e.wedding.weddingWomanNm),1),Bi,(0,i._)("button",{style:{"margin-right":"2rem"},type:"button",class:"btn btn-outline-secondary",onClick:t[0]||(t[0]=e=>c.clickButton("man"))},"신랑 대기방"),(0,i._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[1]||(t[1]=e=>c.clickButton("woman"))},"신부 대기방"),(0,i._)("button",{style:{"margin-left":"2rem"},type:"button",class:"btn btn-outline-secondary",onClick:t[2]||(t[2]=e=>c.clickButton("hall"))},"결혼식장")])])),(0,i.wy)((0,i._)("div",null,[(0,i.Wm)(d,{ref:"chat",onMessage:c.sendMessage,subscribers:a.subscribers,onInsertQ:c.insertQ,onOutQ:c.outQ},null,8,["onMessage","subscribers","onInsertQ","onOutQ"])],512),[[s.F8,this.disabled]]),"man"===a.where||"woman"===a.where?((0,i.wg)(),(0,i.j4)(u,{key:1,where:a.where,onLeaveVideo:c.leaveVideo,Q:a.Q,onComeFirstMan:c.comeFirstMan,onGoFirstMan:c.goFirstMan},null,8,["where","onLeaveVideo","Q","onComeFirstMan","onGoFirstMan"])):(0,i.kq)("",!0),"hall"===a.where?((0,i.wg)(),(0,i.j4)(l,{key:2,where:a.where,onLeaveVideo:c.leaveVideo},null,8,["where","onLeaveVideo"])):(0,i.kq)("",!0)])])}const Fi=e=>((0,i.dD)("data-v-4e2aac5e"),e=e(),(0,i.Cn)(),e),Wi={class:"guest-size",style:{"background-color":"#f0ebe7"}},$i={class:"manVideo"},Hi=Fi((()=>(0,i._)("h1",{class:"manvideo-font",style:{"margin-top":"3rem"}},"오늘의 주인공을 축복해주세요",-1))),Gi={key:0,id:"session",style:{width:"100%"}},qi={class:"man-video"},zi={id:"main-video",style:{"margin-right":"1.5rem"}},Ji={id:"video-container"},Xi={class:"waiting",style:{width:"22rem","margin-left":"1.5rem","border-radius":"10px"}},Yi={style:{border:"1px solid","background-color":"#f0ebe7","margin-top":"0px","overflow-y":"scroll",width:"20rem",height:"500px"}},Qi=Fi((()=>(0,i._)("h5",{class:"manvideo-font",style:{"border-radius":"3px",width:"100%",height:"2rem","background-color":"#F6F6F6"}},"대기자 명단",-1))),Ki={class:"manvideo-font"},Zi={class:"manvideo-button",style:{"margin-top":"1.5rem","margin-bottom":"1rem"}},eo={style:{"margin-top":"1rem"}};function to(e,t,n,o,s,a){const c=(0,i.up)("user-video"),d=(0,i.up)("on-off");return(0,i.wg)(),(0,i.iD)("div",Wi,[(0,i._)("div",$i,[Hi,s.session?((0,i.wg)(),(0,i.iD)("div",Gi,[(0,i._)("div",qi,[(0,i._)("div",zi,[(0,i.Wm)(c,{"stream-manager":s.mainStreamManager},null,8,["stream-manager"]),(0,i.Wm)(d,{ref:"on-off",onAudioOnOff:a.audioOnOff,onVideoOnOff:a.videoOnOff},null,8,["onAudioOnOff","onVideoOnOff"])]),(0,i._)("div",Ji,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.subscribers,(e=>((0,i.wg)(),(0,i.j4)(c,{key:e.stream.connection.connectionId,"stream-manager":e,onClick:t=>a.updateMainVideoStreamManager(e)},null,8,["stream-manager","onClick"])))),128))]),(0,i._)("div",Xi,[(0,i._)("div",Yi,[Qi,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.Q[n.where],(e=>((0,i.wg)(),(0,i.iD)("ul",{key:e},[(0,i._)("li",Ki,(0,r.zw)(e),1)])))),128))]),(0,i._)("div",Zi,[(0,i._)("button",{style:{"margin-right":"5px"},class:"btn btn-outline-secondary question-font btnGet",onClick:t[0]||(t[0]=e=>a.comeFirstMan(this.where))},"받기"),(0,i._)("button",{style:{"margin-left":"5px"},class:"btn btn-outline-secondary question-font btnGet",onClick:t[1]||(t[1]=e=>a.goFirstMan(this.where))},"내보내기")])])]),(0,i._)("div",eo,[(0,i._)("input",{class:"btn btn-large btn-danger btnOut",type:"button",id:"buttonLeaveSession",onClick:t[2]||(t[2]=(...e)=>a.leaveSession&&a.leaveSession(...e)),value:"나가기"})])])):(0,i.kq)("",!0)])])}$().defaults.headers.post["Content-Type"]="application/json";const no="https://"+location.hostname+":"+{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_OPENVIDU_PORT,io="MY_SECRET";var oo={name:"man-company",props:{where:String,Q:Object},components:{UserVideo:le,OnOff:Te},data(){return{OV:void 0,session:void 0,mainStreamManager:void 0,publisher:void 0,subscribers:[],mySessionId:"",myUserName:""}},methods:{joinSession(e){this.mySessionId=e,this.myUserName=e+" Company",this.OV=new q.Dn,this.session=this.OV.initSession(),this.session.on("streamCreated",(({stream:e})=>{const t=this.session.subscribe(e);this.subscribers.push(t)})),this.session.on("streamDestroyed",(({stream:e})=>{const t=this.subscribers.indexOf(e.streamManager,0);t>=0&&this.subscribers.splice(t,1)})),this.session.on("exception",(({exception:e})=>{console.warn(e)})),this.session.on("signal:public-chat",(e=>{this.$refs.chat.addMessage(e.data,JSON.parse(e.data).sender===this.myUserName,!1)})),this.session.on("signal:private-chat",(e=>{this.$refs.chat.addMessage(e.data,!1,!0)})),this.getToken(e+this.mySessionId).then((e=>{this.session.connect(e,{clientData:this.myUserName}).then((()=>{let e=this.OV.initPublisher(void 0,{audioSource:void 0,videoSource:void 0,publishAudio:!0,publishVideo:!0,resolution:"640x480",frameRate:30,insertMode:"APPEND",mirror:!1});this.mainStreamManager=e,this.publisher=e,this.session.publish(this.publisher)})).catch((e=>{console.log("There was an error connecting to the session:",e.code,e.message)}))})),window.addEventListener("beforeunload",this.leaveSession)},leaveSession(){this.session&&this.session.disconnect(),this.session=void 0,this.mainStreamManager=void 0,this.publisher=void 0,this.subscribers=[],this.OV=void 0,this.$emit("leave-video"),window.removeEventListener("beforeunload",this.leaveSession)},updateMainVideoStreamManager(e){this.mainStreamManager!==e&&(this.mainStreamManager=e)},getToken(e){return this.createSession(e).then((e=>this.createToken(e)))},createSession(e){return new Promise(((t,n)=>{$().post(`${no}/openvidu/api/sessions`,JSON.stringify({customSessionId:e}),{auth:{username:"OPENVIDUAPP",password:io}}).then((e=>e.data)).then((e=>t(e.id))).catch((i=>{409===i.response.status?t(e):(console.warn(`No connection to OpenVidu Server. This may be a certificate error at ${no}`),window.confirm(`No connection to OpenVidu Server. This may be a certificate error at ${no}\n\nClick OK to navigate and accept it. If no certificate warning is shown, then check that your OpenVidu Server is up and running at "${no}"`)&&location.assign(`${no}/accept-certificate`),n(i.response))}))}))},createToken(e){return new Promise(((t,n)=>{$().post(`${no}/openvidu/api/sessions/${e}/connection`,{},{auth:{username:"OPENVIDUAPP",password:io}}).then((e=>e.data)).then((e=>t(e.token))).catch((e=>n(e.response)))}))},sendMessage({content:e,to:t}){let n=new Date,i=n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),o={content:e,sender:this.myUserName,time:i};"all"===t&&this.session.signal({data:JSON.stringify(o),to:[],type:"public-chat"}).then((()=>{})).catch((e=>{console.log(e)})),"all"!==t&&this.session.signal({data:JSON.stringify(o),to:[t],type:"private-chat"}).then((()=>{this.$refs.chat.addMessage(JSON.stringify(o),!0,!0)})).catch((e=>{console.log(e)}))},comeFirstMan(e){this.$emit("come-first-man",e)},goFirstMan(e){this.$emit("go-first-man",e)},audioOnOff({audio:e}){this.publisher.publishAudio(e)},videoOnOff({video:e}){this.publisher.publishVideo(e)}},computed:(0,G.Se)({wedding:"root/getNowWeddingInfo"}),mounted(){this.joinSession(this.wedding.weddingNum+this.where)},beforeUnmount(){this.leaveSession()}};const ro=(0,se.Z)(oo,[["render",to],["__scopeId","data-v-4e2aac5e"]]);var so=ro;const ao={class:"bbbb"},co={key:0,id:"session"},uo={class:"left"},lo={class:"container"},po={id:"video-container",class:"row row-cols-5"},ho={class:"right"},fo={id:"session-header",class:"bottom"};function mo(e,t,n,o,r,a){const c=(0,i.up)("user-video"),d=(0,i.up)("room-chat"),u=(0,i.up)("on-off");return(0,i.wg)(),(0,i.iD)("div",ao,[r.session?((0,i.wg)(),(0,i.iD)("div",co,[(0,i._)("div",uo,[(0,i._)("div",lo,[(0,i._)("div",po,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.subscribers,(e=>((0,i.wg)(),(0,i.j4)(c,{key:e.stream.connection.connectionId,"stream-manager":e,onClick:t=>a.updateMainVideoStreamManager(e)},null,8,["stream-manager","onClick"])))),128)),(0,i.Wm)(c,{"stream-manager":r.mainStreamManager},null,8,["stream-manager"])])])]),(0,i._)("div",ho,[(0,i.wy)((0,i.Wm)(d,{ref:"chat",onMessage:a.sendMessage,subscribers:r.subscribers},null,8,["onMessage","subscribers"]),[[s.F8,this.disabled]])])])):(0,i.kq)("",!0),(0,i._)("div",fo,[(0,i.Wm)(u,{ref:"on-off",onAudioOnOff:a.audioOnOff,onVideoOnOff:a.videoOnOff},null,8,["onAudioOnOff","onVideoOnOff"]),(0,i._)("input",{class:"btn btn-large btn-danger",type:"button",id:"buttonLeaveSession",onClick:t[0]||(t[0]=(...e)=>a.leaveSession&&a.leaveSession(...e)),value:"나가기"})])])}const vo=e=>((0,i.dD)("data-v-8a53f9f4"),e=e(),(0,i.Cn)(),e),go={class:"absolute flex top-0 h-screen z-20 right-0 flex-row border-l border-main-100"},bo={ref:"content",class:"transition-all pt-16 pb-12 px-8 w-80 duration-700 bg-main-300 overflow-hidden flex flex-col items-center justify-between"},yo={id:"chat-bar-hall",class:"chatbarSize"},Eo={key:0,class:"border-r-2 border-sub-200 pr-2"},wo={class:"flex flex-row-reverse items-center"},So=vo((()=>(0,i._)("span",{class:"text-sub-200 text-md ml-2 font-bold"},"Me",-1))),Oo={class:"text-tc-400 text-xs"},Io={class:"text-tc-300 text-sm break-all text-right"},Co={key:1,class:"border-l-2 border-main-100 pl-2"},Ro={class:"flex flex-row text-start"},ko={class:"text-main-100 text-md mr-2 font-bold"},_o={class:"d-flex align-items-end justify-content-start",style:{"margin-top":"0.5rem"}},xo={class:"your-text d-flex justify-content-start text-tc-300 text-sm break-all text-left",style:{margin:"0px","max-width":"16rem"}},No={class:"text-tc-400 text-xs",style:{"font-size":"small","padding-left":"1rem"}};function Po(e,t,n,o,s,a){return(0,i.wg)(),(0,i.iD)("div",go,[(0,i._)("div",bo,[(0,i._)("ul",yo,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.state.chats,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{class:"flex flex-col mb-2",key:t},[e.isMyMessage?((0,i.wg)(),(0,i.iD)("div",Eo,[(0,i._)("div",wo,[So,(0,i._)("span",Oo,(0,r.zw)(e.time),1)]),(0,i._)("div",null,[(0,i._)("p",Io,(0,r.zw)(e.content),1)])])):((0,i.wg)(),(0,i.iD)("div",Co,[(0,i._)("div",Ro,[(0,i._)("span",ko,(0,r.zw)(e.userId),1)]),(0,i._)("div",_o,[(0,i._)("p",xo,(0,r.zw)(" "+e.content+" "),1),(0,i._)("span",No,(0,r.zw)(e.time),1)])]))])))),128))])],512)])}var To={props:{subscribers:Object},setup(e,{emit:t}){const n=(0,G.oR)(),o=(0,H.qj)({selectedUser:"all",message:"",subscribers:e.subscribers,chats:[],guestInfo:(0,i.Fl)((()=>n.getters["root/getNowGuestInfo"])),badwords:["시발","좆같네","미친","새끼"]}),r=()=>{let e=o.message.trim(),n=o.message.split(" ");n.forEach((function(t){o.badwords.includes(t)&&(alert("바른말 고운말을 사용하자"),e="",o.message="")})),""!==e&&(t("message",{content:e,to:o.selectedUser}),event.preventDefault(),o.message="")},s=async(e,n,i)=>{let r=JSON.parse(e);n&&(r.sender+=" (You)"),i&&(r.content+=" (private)");let s=document.getElementById("chat-bar-hall"),a=s.scrollHeight-s.scrollTop<=s.clientHeight+2;await o.chats.push({userId:r.sender.split("hall")[1],time:r.time,content:r.content,isMyMessage:n}),a&&s.scrollTo({top:s.scrollHeight,behavior:"smooth"});const c=r.content.split("꽖쀓")[0],d=r.content.split("꽖쀓")[1],u=r.content.split("꽖쀓")[2];"come"===c&&u?u===o.guestInfo.guestGroup+" "+o.guestInfo.guestName&&t("come-man-video",d):"go"===c&&u&&u===o.guestInfo.guestGroup+" "+o.guestInfo.guestName&&t("go-man-video")};return{state:o,sendMessage:r,addMessage:s}}};const Mo=(0,se.Z)(To,[["render",Po],["__scopeId","data-v-8a53f9f4"]]);var Vo=Mo;$().defaults.headers.post["Content-Type"]="application/json";const Lo="https://"+location.hostname+":"+{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_OPENVIDU_PORT,Do="MY_SECRET";var Ao={name:"hall-company",props:{where:String},components:{UserVideo:le,OnOff:Te,RoomChat:Vo},data(){return{OV:void 0,session:void 0,mainStreamManager:void 0,publisher:void 0,subscribers:[],disabled:!0,mySessionId:"",myUserName:""}},methods:{joinSession(e){this.mySessionId=e,this.myUserName=e+" Company",this.OV=new q.Dn,this.session=this.OV.initSession(),this.session.on("streamCreated",(({stream:e})=>{const t=this.session.subscribe(e);this.subscribers.push(t)})),this.session.on("streamDestroyed",(({stream:e})=>{const t=this.subscribers.indexOf(e.streamManager,0);t>=0&&this.subscribers.splice(t,1)})),this.session.on("exception",(({exception:e})=>{console.warn(e)})),this.session.on("signal:public-chat",(e=>{this.$refs.chat.addMessage(e.data,JSON.parse(e.data).sender===this.myUserName,!1)})),this.session.on("signal:private-chat",(e=>{this.$refs.chat.addMessage(e.data,!1,!0)})),this.getToken(e+this.mySessionId).then((e=>{this.session.connect(e,{clientData:this.myUserName}).then((()=>{let e=this.OV.initPublisher(void 0,{audioSource:void 0,videoSource:void 0,publishAudio:!0,publishVideo:!0,resolution:"640x640",frameRate:30,insertMode:"APPEND",mirror:!0});this.mainStreamManager=e,this.publisher=e,this.session.publish(this.publisher)})).catch((e=>{console.log("There was an error connecting to the session:",e.code,e.message)}))})),window.addEventListener("beforeunload",this.leaveSession)},leaveSession(){this.session&&this.session.disconnect(),this.session=void 0,this.mainStreamManager=void 0,this.publisher=void 0,this.subscribers=[],this.OV=void 0,this.$emit("leave-video"),window.removeEventListener("beforeunload",this.leaveSession)},updateMainVideoStreamManager(e){this.mainStreamManager!==e&&(this.mainStreamManager=e)},getToken(e){return this.createSession(e).then((e=>this.createToken(e)))},createSession(e){return new Promise(((t,n)=>{$().post(`${Lo}/openvidu/api/sessions`,JSON.stringify({customSessionId:e}),{auth:{username:"OPENVIDUAPP",password:Do}}).then((e=>e.data)).then((e=>t(e.id))).catch((i=>{409===i.response.status?t(e):(console.warn(`No connection to OpenVidu Server. This may be a certificate error at ${Lo}`),window.confirm(`No connection to OpenVidu Server. This may be a certificate error at ${Lo}\n\nClick OK to navigate and accept it. If no certificate warning is shown, then check that your OpenVidu Server is up and running at "${Lo}"`)&&location.assign(`${Lo}/accept-certificate`),n(i.response))}))}))},createToken(e){return new Promise(((t,n)=>{$().post(`${Lo}/openvidu/api/sessions/${e}/connection`,{},{auth:{username:"OPENVIDUAPP",password:Do}}).then((e=>e.data)).then((e=>t(e.token))).catch((e=>n(e.response)))}))},sendMessage({content:e,to:t}){let n=new Date,i=n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),o={content:e,sender:this.myUserName,time:i};"all"===t&&this.session.signal({data:JSON.stringify(o),to:[],type:"public-chat"}).then((()=>{})).catch((e=>{console.log(e)})),"all"!==t&&this.session.signal({data:JSON.stringify(o),to:[t],type:"private-chat"}).then((()=>{this.$refs.chat.addMessage(JSON.stringify(o),!0,!0)})).catch((e=>{console.log(e)}))},comeFirstMan(e){this.$emit("come-first-man",e)},goFirstMan(e){this.$emit("go-first-man",e)},audioOnOff({audio:e}){this.publisher.publishAudio(e)},videoOnOff({video:e}){this.publisher.publishVideo(e)}},computed:(0,G.Se)({wedding:"root/getNowWeddingInfo"}),mounted(){this.joinSession(this.wedding.weddingNum+this.where)},beforeUnmount(){this.leaveSession()}};const jo=(0,se.Z)(Ao,[["render",mo],["__scopeId","data-v-5d859e68"]]);var Bo=jo;const Uo=e=>((0,i.dD)("data-v-5a4de8b2"),e=e(),(0,i.Cn)(),e),Fo={class:"absolute flex top-0 h-screen z-20 right-0 flex-row border-l border-main-100"},Wo={ref:"content",class:"transition-all pt-16 pb-12 px-8 w-80 duration-700 bg-main-300 overflow-hidden flex flex-col items-center justify-between"},$o={id:"chat-bar"},Ho={key:0,class:"border-r-2 border-sub-200 pr-2"},Go={class:"flex flex-row-reverse items-center"},qo=Uo((()=>(0,i._)("span",{class:"text-sub-200 text-md ml-2 font-bold"},"Me",-1))),zo={class:"text-tc-400 text-xs"},Jo={class:"text-tc-300 text-sm break-all text-right"},Xo={key:1,class:"border-l-2 border-main-100 pl-2"},Yo={class:"flex flex-row items-center"},Qo={class:"text-main-100 text-md mr-2 font-bold"},Ko={class:"text-tc-400 text-xs"},Zo={class:"text-tc-300 text-sm break-all text-left"},er={class:"flex flex-col items-start w-full mt-8"},tr={class:"relative inline-flex border-3 rounded-lg border-main-100 w-1/2 mb-4 h-7 p-0"},nr=Uo((()=>(0,i._)("option",{selected:"selected",value:"all"},"all",-1))),ir=["value"],or={class:"w-full p-0 flex flex-row justify-between items-center"};function rr(e,t,n,o,a,c){return(0,i.wg)(),(0,i.iD)("div",Fo,[(0,i._)("div",Wo,[(0,i._)("ul",$o,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.state.chats,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{class:"flex flex-col mb-2",key:t},[e.isMyMessage?((0,i.wg)(),(0,i.iD)("div",Ho,[(0,i._)("div",Go,[qo,(0,i._)("span",zo,(0,r.zw)(e.time),1)]),(0,i._)("div",null,[(0,i._)("p",Jo,(0,r.zw)(e.content),1)])])):((0,i.wg)(),(0,i.iD)("div",Xo,[(0,i._)("div",Yo,[(0,i._)("span",Qo,(0,r.zw)(e.userId),1),(0,i._)("span",Ko,(0,r.zw)(e.time),1)]),(0,i._)("div",null,[(0,i._)("p",Zo,(0,r.zw)(e.content),1)])]))])))),128))]),(0,i._)("div",er,[(0,i._)("div",tr,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.state.selectedUser=e),class:"cursor-pointer font-bold px-4 py-0 text-sm form-select border-0 rounded-md text-gray-600 w-full h-5-5 border-transparent focus:border-transparent focus:ring-0 appearance-none"},[nr,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.state.subscribers,((e,t)=>((0,i.wg)(),(0,i.iD)("option",{value:e.stream.connection,key:t},(0,r.zw)(JSON.parse(e.stream.connection.data).clientData),9,ir)))),128))],512),[[s.bM,o.state.selectedUser]])]),(0,i._)("div",or,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.state.message=e),onKeydown:t[2]||(t[2]=(0,s.D2)(((...e)=>o.sendMessage&&o.sendMessage(...e)),["enter"])),class:"w-5/6 border-2 border-main-100 text-xs focus:border-main-100 focus:border-2 resize-none",cols:"",rows:"2"},null,544),[[s.nr,o.state.message]]),(0,i._)("button",{onClick:t[3]||(t[3]=e=>o.sendMessage())},"메세지보내기")])])],512)])}var sr={props:{subscribers:Object},setup(e,{emit:t}){const n=(0,H.qj)({selectedUser:"all",message:"",subscribers:e.subscribers,chats:[],Q:{man:[],woman:[]}}),i=()=>{let e=n.message.trim();""!==e&&(t("message",{content:e,to:n.selectedUser}),event.preventDefault(),n.message="")},o=async(e,i,o)=>{let r=JSON.parse(e);i&&(r.sender+=" (You)"),o&&(r.content+=" (private)");let s=document.querySelector("#chat-bar"),a=s.scrollHeight-s.scrollTop<=s.clientHeight+2;await n.chats.push({userId:r.sender,time:r.time,content:r.content,isMyMessage:i}),a&&s.scrollTo({top:s.scrollHeight,behavior:"smooth"});const c=r.content.split("꽖쀓")[0],d=r.content.split("꽖쀓")[1],u=r.content.split("꽖쀓")[2];if("in"===c)"man"!==d||n.Q.man.includes(u)?"woman"!==d||n.Q.woman.includes(u)||(n.Q.woman.push(u),t("insert-Q",["woman",u])):(n.Q.man.push(u),t("insert-Q",["man",u]));else if("out"===c){if("man"===d&&n.Q.man.includes(u)){t("out-Q",["man",u]),t("message",{content:"go꽖쀓"+d+"꽖쀓"+u,to:n.selectedUser});const e=n.Q.man.indexOf(u);e>-1&&n.Q.man.splice(e,1)}else if("woman"===d&&n.Q.woman.includes(u)){t("out-Q",["woman",u]),t("message",{content:"go꽖쀓"+d+"꽖쀓"+u,to:n.selectedUser});const e=n.Q.woman.indexOf(u);e>-1&&n.Q.woman.splice(e,1)}}else"come"!==c||u?"go"!==c||u||("man"===d?(t("message",{content:"go꽖쀓"+d+"꽖쀓"+n.Q.man[0],to:n.selectedUser}),t("out-Q",["man",n.Q.man[0]]),n.Q.man.splice(0,1)):"woman"===d&&(t("message",{content:"go꽖쀓"+d+"꽖쀓"+n.Q.woman[0],to:n.selectedUser}),t("out-Q",["woman",n.Q.woman[0]]),n.Q.woman.splice(0,1))):"man"===d?t("message",{content:c+"꽖쀓"+d+"꽖쀓"+n.Q.man[0],to:n.selectedUser}):"woman"===d&&t("message",{content:c+"꽖쀓"+d+"꽖쀓"+n.Q.woman[0],to:n.selectedUser})};return{state:n,sendMessage:i,addMessage:o}}};const ar=(0,se.Z)(sr,[["render",rr],["__scopeId","data-v-5a4de8b2"]]);var cr=ar;$().defaults.headers.post["Content-Type"]="application/json";const dr="https://"+location.hostname+":"+{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_OPENVIDU_PORT,ur="MY_SECRET";var lr={name:"waiting-room",components:{ManVideo:so,HallVideo:Bo,RoomChat:cr},data(){return{OV:void 0,session:void 0,mainStreamManager:void 0,publisher:void 0,subscribers:[],disabled:!1,mySessionId:"",myUserName:"",where:!1,Q:{}}},methods:{clickButton(e){this.where=e,this.Q[e]=[]},clickButton1(e){this.where=e},leaveVideo(){this.where=!1},insertQ([e,t]){this.Q[e].push(t)},outQ([e,t]){const n=this.Q[e].indexOf(t);n>-1&&this.Q[e].splice(n,1)},joinSession(e){this.mySessionId=e,this.myUserName=e+"Company",this.OV=new q.Dn,this.session=this.OV.initSession(),this.session.on("streamCreated",(({stream:e})=>{const t=this.session.subscribe(e);this.subscribers.push(t)})),this.session.on("streamDestroyed",(({stream:e})=>{const t=this.subscribers.indexOf(e.streamManager,0);t>=0&&this.subscribers.splice(t,1)})),this.session.on("exception",(({exception:e})=>{console.warn(e)})),this.session.on("signal:public-chat",(e=>{this.$refs.chat.addMessage(e.data,JSON.parse(e.data).sender===this.myUserName,!1)})),this.session.on("signal:private-chat",(e=>{this.$refs.chat.addMessage(e.data,!1,!0)})),this.getToken(e+this.mySessionId).then((e=>{this.session.connect(e,{clientData:this.myUserName}).then((()=>{let e=this.OV.initPublisher(void 0,{audioSource:void 0,videoSource:void 0,publishAudio:!0,publishVideo:!0,resolution:"640x480",frameRate:30,insertMode:"APPEND",mirror:!1});this.mainStreamManager=e,this.publisher=e,this.session.publish(this.publisher)})).catch((e=>{console.log("There was an error connecting to the session:",e.code,e.message)}))})),window.addEventListener("beforeunload",this.leaveSession)},leaveSession(){this.session&&this.session.disconnect(),this.session=void 0,this.mainStreamManager=void 0,this.publisher=void 0,this.subscribers=[],this.OV=void 0,window.removeEventListener("beforeunload",this.leaveSession)},updateMainVideoStreamManager(e){this.mainStreamManager!==e&&(this.mainStreamManager=e)},getToken(e){return this.createSession(e).then((e=>this.createToken(e)))},createSession(e){return new Promise(((t,n)=>{$().post(`${dr}/openvidu/api/sessions`,JSON.stringify({customSessionId:e}),{auth:{username:"OPENVIDUAPP",password:ur}}).then((e=>e.data)).then((e=>t(e.id))).catch((i=>{409===i.response.status?t(e):(console.warn(`No connection to OpenVidu Server. This may be a certificate error at ${dr}`),window.confirm(`No connection to OpenVidu Server. This may be a certificate error at ${dr}\n\nClick OK to navigate and accept it. If no certificate warning is shown, then check that your OpenVidu Server is up and running at "${dr}"`)&&location.assign(`${dr}/accept-certificate`),n(i.response))}))}))},createToken(e){return new Promise(((t,n)=>{$().post(`${dr}/openvidu/api/sessions/${e}/connection`,{},{auth:{username:"OPENVIDUAPP",password:ur}}).then((e=>e.data)).then((e=>t(e.token))).catch((e=>n(e.response)))}))},sendMessage({content:e,to:t}){let n=new Date,i=n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),o={content:e,sender:this.myUserName,time:i};"all"===t&&this.session.signal({data:JSON.stringify(o),to:[],type:"public-chat"}).then((()=>{})).catch((e=>{console.log(e)})),"all"!==t&&this.session.signal({data:JSON.stringify(o),to:[t],type:"private-chat"}).then((()=>{this.$refs.chat.addMessage(JSON.stringify(o),!0,!0)})).catch((e=>{console.log(e)}))},comeFirstMan(e){this.sendMessage({content:"come꽖쀓"+e,to:"all"})},goFirstMan(e){this.sendMessage({content:"go꽖쀓"+e,to:"all"})},audioOnOff({audio:e}){this.publisher.publishAudio(e)},videoOnOff({video:e}){this.publisher.publishVideo(e)}},computed:(0,G.Se)({wedding:"root/getNowWeddingInfo"}),mounted(){this.joinSession(this.wedding.weddingNum+"waiting")},beforeUnmount(){this.leaveSession()}};const pr=(0,se.Z)(lr,[["render",Ui],["__scopeId","data-v-a8f3f950"]]);var hr=pr,fr={name:"waiting-hall",components:{WaitingGuest:Ci,WaitingCompany:hr},setup(){const e=(0,G.oR)(),t=(0,H.qj)({isGuest:(0,i.Fl)((()=>e.getters["root/getIsGuest"]))});return{state:t}}};const mr=(0,se.Z)(fr,[["render",o],["__scopeId","data-v-9d10ad1e"]]);var vr=mr},3979:function(e,t,n){"use strict";e.exports=n.p+"img/weddinghome.8ee0cec5.png"},8808:function(e){"use strict";e.exports=JSON.parse('["stun.l.google.com:19302","stun1.l.google.com:19302","stun2.l.google.com:19302","stun3.l.google.com:19302","stun4.l.google.com:19302","stun.ekiga.net","stun.ideasip.com","stun.schlund.de","stun.stunprotocol.org:3478","stun.voiparound.com","stun.voipbuster.com","stun.voipstunt.com","stun.voxgratia.org"]')},4576:function(e){"use strict";e.exports=[]},5549:function(e){"use strict";e.exports=JSON.parse('{"_args":[["openvidu-browser@2.22.0","C:\\\\Users\\\\SSAFY\\\\Desktop\\\\asd\\\\Weanodding\\\\frontend"]],"_from":"openvidu-browser@2.22.0","_id":"openvidu-browser@2.22.0","_inBundle":false,"_integrity":"sha512-fug7V5WZPwEXCF4im6RzhWSbv9nYB4QWMXrEQBEsh7RI1VPQ5Jl2VcindiUeMtN+quLqeTjXSRUh4lfkrTlQSQ==","_location":"/openvidu-browser","_phantomChildren":{"lru-cache":"6.0.0"},"_requested":{"type":"version","registry":true,"raw":"openvidu-browser@2.22.0","name":"openvidu-browser","escapedName":"openvidu-browser","rawSpec":"2.22.0","saveSpec":null,"fetchSpec":"2.22.0"},"_requiredBy":["/"],"_resolved":"https://registry.npmjs.org/openvidu-browser/-/openvidu-browser-2.22.0.tgz","_spec":"2.22.0","_where":"C:\\\\Users\\\\SSAFY\\\\Desktop\\\\asd\\\\Weanodding\\\\frontend","author":{"name":"OpenVidu"},"bugs":{"url":"https://github.com/OpenVidu/openvidu/issues"},"dependencies":{"events":"3.3.0","freeice":"2.2.2","hark":"1.2.3","inherits":"2.0.4","jsnlog":"2.30.0","mime":"3.0.0","platform":"1.3.6","semver":"7.3.5","uuid":"8.3.2","wolfy87-eventemitter":"5.2.9"},"description":"OpenVidu Browser","devDependencies":{"@types/node":"17.0.8","@types/platform":"1.3.4","browserify":"17.0.0","grunt":"1.4.1","grunt-cli":"1.4.3","grunt-contrib-copy":"1.0.0","grunt-contrib-sass":"2.0.0","grunt-contrib-uglify":"5.0.1","grunt-contrib-watch":"1.1.0","grunt-postcss":"0.9.0","grunt-string-replace":"1.3.1","grunt-ts":"6.0.0-beta.22","terser":"5.10.0","tsify":"5.0.4","tslint":"6.1.3","typedoc":"0.22.10","typescript":"4.5.4"},"homepage":"https://github.com/OpenVidu/openvidu#readme","license":"Apache-2.0","main":"lib/index.js","name":"openvidu-browser","repository":{"type":"git","url":"git://github.com/OpenVidu/openvidu.git"},"scripts":{"browserify":"VERSION=${VERSION:-dev}; mkdir -p static/js/ && cd src && ../node_modules/browserify/bin/cmd.js Main.ts -p [ tsify ] --exclude kurento-browser-extensions --debug -o ../static/js/openvidu-browser-$VERSION.js -v","browserify-prod":"VERSION=${VERSION:-dev}; mkdir -p static/js/ && cd src && ../node_modules/browserify/bin/cmd.js --debug Main.ts -p [ tsify ] --exclude kurento-browser-extensions | ../node_modules/terser/bin/terser --source-map content=inline --output ../static/js/openvidu-browser-$VERSION.min.js","build":"cd src/OpenVidu && ./../../node_modules/typescript/bin/tsc && cd ../.. && ./node_modules/typescript/bin/tsc --declaration src/index.ts --outDir ./lib --sourceMap --target es5 --lib dom,es5,es2015.promise,scripthost && rm -rf ./ts4.4 && mkdir -p ./ts4.4/lib && cp -r ./lib ./ts4.4 && find ./ts4.4/lib -type f ! -iname \'*.d.ts\' -delete && ./config/replace_for_ts44.sh","docs":"./generate-docs.sh"},"types":"lib/index.d.ts","typesVersions":{"<4.4":{"*":["ts4.4/*"]}},"version":"2.22.0"}')}}]);
//# sourceMappingURL=openvidu.f53a5560.js.map